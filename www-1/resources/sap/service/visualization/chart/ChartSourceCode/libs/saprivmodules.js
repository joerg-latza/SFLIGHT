sap.riv.module({qname:'sap.riv.core.UADetector',version:'1.0.0'},function Setup(){var v;var s=function(l){for(var i=0;i<l.length;i++){var p=l[i].string;var q=l[i].prop;v=l[i].versionSearch||l[i].identity;if(p){if(p.indexOf(l[i].subString)!=-1){return l[i].identity}}else if(q){return l[i].identity}}};var a=[';',' '];var b=function(p){var q=p.indexOf(v);if(q==-1)return;var r=p.substring(q+v.length+1);var i=0,l=a.length,t=-1;while(t===-1&&i<l)t=r.indexOf(a[i++]);if(t!==-1)r=r.slice(0,t);return r};var d=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"Safari",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Apple",identity:"UIWebView",versionSearch:"AppleWebKit"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];var c=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];var e=[{string:navigator.userAgent,subString:"Presto",identity:"Presto"},{string:navigator.userAgent,subString:"KHTML",identity:"KHTML"},{string:navigator.userAgent,subString:"Gecko",identity:"Gecko"},{string:navigator.userAgent,subString:"Trident",identity:"Trident"}];var _=s(d)||"An unknown browser",f=b(navigator.userAgent)||b(navigator.appVersion)||"an unknown version",g=s(d)==="Explorer",h=s(d)==='Firefox',j=s(d)==='Chrome',k=s(d)==='Safari',m=s(d)==='UIWebView',n=s(c)||"an unknown OS",o=s(e)||"An unknown RenderEngine";var U={userAgent:function(){return _},version:function(){return f},isIE:function(){return g},isFirefox:function(){return h},isChrome:function(){return j},isSafari:function(){return k},isUIWebView:function(){return m},os:function(){return n},renderEngine:function(){return o}};return(U)});sap.riv.module({qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},function Setup(){var c={'[object Boolean]':'boolean','[object Number]':'number','[object String]':'string','[object Function]':'function','[object Array]':'array','[object Date]':'date','[object RegExp]':'regexp','[object Object]':'object'};var h=Object.prototype.hasOwnProperty;var r=/\d/;var t=function(o){return o==null?String(o):c[Object.prototype.toString.call(o)]||"object"};var a={isFunction:function(o){return t(o)==="function"},isArray:Array.isArray||function(o){return t(o)==="array"},isString:function(o){return t(o)==="string"},isNonEmptyString:function(o){return this.isString(o)&&o.length!==0},isEmptyString:function(o){return this.isString(o)&&o.length===0},isNaN:function(o){return o===null||o===undefined||!r.test(o)||isNaN(o)},isNumber:function(n){return!this.isNaN(parseFloat(n))&&isFinite(n)},isDefined:function(v){return typeof(v)!=='undefined'},isUndefined:function(v){return typeof(v)==='undefined'},isPlainObject:function(o){if(!o||t(o)!=="object"||o.nodeType||(o&&typeof o==="object"&&"setInterval"in o)){return false}if(o.constructor&&!h.call(o,"constructor")&&!h.call(o.constructor.prototype,"isPrototypeOf")){return false}var k;for(k in o){}return k===undefined||h.call(o,k)},isEmptyObject:function(o){for(var n in o){return false}return this.isPlainObject(o)},isExist:function(o){if((typeof(o)==='undefined')||(o===null)){return false}return true}};return a});sap.riv.module({qname:'sap.riv.core.Math',version:'1.0.0'},[{qname:'sap.riv.core.UADetector',version:'1.0.0'}],function Setup(U){var O={PI:Math.PI,E:Math.E,LN10:Math.LN10,LN2:Math.LN2,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,abs:(function(){if(U.isSafari()||(U.isIE()&&parseFloat(U.version())<9)){return function(n){return n<0?-n:n}}else{return Math.abs}})(),acos:(function(){return Math.acos})(),asin:(function(){return Math.asin})(),atan:(function(){return Math.atan})(),atan2:(function(){return Math.atan2})(),ceil:(function(){return Math.ceil})(),cos:(function(){return Math.cos})(),exp:(function(){return Math.exp})(),floor:(function(){return Math.floor})(),log:(function(){return Math.log})(),max:(function(){return Math.max})(),min:(function(){return Math.min})(),pow:(function(){return Math.pow})(),random:(function(){return Math.random})(),round:(function(){return Math.round})(),sin:(function(){return Math.sin})(),sqrt:(function(){return Math.sqrt})(),tan:(function(){return Math.tan})()};return O});sap.riv.module({qname:'sap.riv.core.utils.RIVExCanvasMgr',version:'1.0.0'},[{qname:'sap.riv.core.UADetector',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(U,M){if(U.isIE()&&parseFloat(U.version())<9){var m=M;var k=m.round;var t=m.sin;var u=m.cos;var A=m.abs;var B=m.sqrt;var Z=10;var C=Z/2;var I=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];function D(){return this.context_||(this.context_=new j1(this))};var E=Array.prototype.slice;function F(f,o,v){var a=E.call(arguments,2);return function(){return f.apply(o,a.concat(E.call(arguments)))}};function G(s){return String(s).replace(/&/g,'&amp;').replace(/"/g,'&quot;')};function J(d,a,b){if(!d.namespaces[a]){d.namespaces.add(a,b,'#default#VML')}};function K(d){J(d,'r_vml_','urn:schemas-microsoft-com:vml');J(d,'r_o_','urn:schemas-microsoft-com:office:office');if(!d.styleSheets['r_ex_canvas_']){var s=d.createStyleSheet();s.owningElement.id='r_ex_canvas_';s.cssText='rivcanvas{display:inline-block;overflow:hidden;'+'text-align:left;width:300px;height:150px}'}};K(document);var L={init:function(o){var d=o||document;d.createElement('rivcanvas');d.attachEvent('onreadystatechange',F(this.init_,this,d))},init_:function(d){var e=d.getElementsByTagName('rivcanvas');for(var i=0;i<e.length;i++){this.initElement(e[i])}},initElement:function(e){if(!e.getContext){e.getContext=D;K(e.ownerDocument);e.innerHTML='';e.attachEvent('onpropertychange',N);e.attachEvent('onresize',O);var a=e.attributes;if(a.width&&a.width.specified){e.style.width=a.width.nodeValue+'px'}else{e.width=e.clientWidth}if(a.height&&a.height.specified){e.style.height=a.height.nodeValue+'px'}else{e.height=e.clientHeight}}return e}};function N(e){var a=e.srcElement;switch(e.propertyName){case'width':a.getContext().clearRect();a.style.width=a.attributes.width.nodeValue+'px';a.firstChild.style.width=a.width+'px';break;case'height':a.getContext().clearRect();a.style.height=a.attributes.height.nodeValue+'px';a.firstChild.style.height=a.height+'px';break}};function O(e){var a=e.srcElement;if(a.firstChild){a.firstChild.style.width=a.clientWidth+'px';a.firstChild.style.height=a.clientHeight+'px'}};L.init();var P=[];for(var i=0;i<16;i++){for(var j=0;j<16;j++){P[i*16+j]=i.toString(16)+j.toString(16)}}function Q(){return[[1,0,0],[0,1,0],[0,0,1]]};function R(a,b){var r=Q();for(var x=0;x<3;x++){for(var y=0;y<3;y++){var s=0;for(var z=0;z<3;z++){s+=a[x][z]*b[z][y]}r[x][y]=s}}return r};function S(o,a){a.fillStyle=o.fillStyle;a.lineCap=o.lineCap;a.lineJoin=o.lineJoin;a.lineWidth=o.lineWidth;a.miterLimit=o.miterLimit;a.shadowBlur=o.shadowBlur;a.shadowColor=o.shadowColor;a.shadowOffsetX=o.shadowOffsetX;a.shadowOffsetY=o.shadowOffsetY;a.strokeStyle=o.strokeStyle;a.globalAlpha=o.globalAlpha;a.font=o.font;a.textAlign=o.textAlign;a.textBaseline=o.textBaseline;a.arcScaleX_=o.arcScaleX_;a.arcScaleY_=o.arcScaleY_;a.lineScale_=o.lineScale_};var T={aliceblue:'#F0F8FF',antiquewhite:'#FAEBD7',aquamarine:'#7FFFD4',azure:'#F0FFFF',beige:'#F5F5DC',bisque:'#FFE4C4',black:'#000000',blanchedalmond:'#FFEBCD',blueviolet:'#8A2BE2',brown:'#A52A2A',burlywood:'#DEB887',cadetblue:'#5F9EA0',chartreuse:'#7FFF00',chocolate:'#D2691E',coral:'#FF7F50',cornflowerblue:'#6495ED',cornsilk:'#FFF8DC',crimson:'#DC143C',cyan:'#00FFFF',darkblue:'#00008B',darkcyan:'#008B8B',darkgoldenrod:'#B8860B',darkgray:'#A9A9A9',darkgreen:'#006400',darkgrey:'#A9A9A9',darkkhaki:'#BDB76B',darkmagenta:'#8B008B',darkolivegreen:'#556B2F',darkorange:'#FF8C00',darkorchid:'#9932CC',darkred:'#8B0000',darksalmon:'#E9967A',darkseagreen:'#8FBC8F',darkslateblue:'#483D8B',darkslategray:'#2F4F4F',darkslategrey:'#2F4F4F',darkturquoise:'#00CED1',darkviolet:'#9400D3',deeppink:'#FF1493',deepskyblue:'#00BFFF',dimgray:'#696969',dimgrey:'#696969',dodgerblue:'#1E90FF',firebrick:'#B22222',floralwhite:'#FFFAF0',forestgreen:'#228B22',gainsboro:'#DCDCDC',ghostwhite:'#F8F8FF',gold:'#FFD700',goldenrod:'#DAA520',grey:'#808080',greenyellow:'#ADFF2F',honeydew:'#F0FFF0',hotpink:'#FF69B4',indianred:'#CD5C5C',indigo:'#4B0082',ivory:'#FFFFF0',khaki:'#F0E68C',lavender:'#E6E6FA',lavenderblush:'#FFF0F5',lawngreen:'#7CFC00',lemonchiffon:'#FFFACD',lightblue:'#ADD8E6',lightcoral:'#F08080',lightcyan:'#E0FFFF',lightgoldenrodyellow:'#FAFAD2',lightgreen:'#90EE90',lightgrey:'#D3D3D3',lightpink:'#FFB6C1',lightsalmon:'#FFA07A',lightseagreen:'#20B2AA',lightskyblue:'#87CEFA',lightslategray:'#778899',lightslategrey:'#778899',lightsteelblue:'#B0C4DE',lightyellow:'#FFFFE0',limegreen:'#32CD32',linen:'#FAF0E6',magenta:'#FF00FF',mediumaquamarine:'#66CDAA',mediumblue:'#0000CD',mediumorchid:'#BA55D3',mediumpurple:'#9370DB',mediumseagreen:'#3CB371',mediumslateblue:'#7B68EE',mediumspringgreen:'#00FA9A',mediumturquoise:'#48D1CC',mediumvioletred:'#C71585',midnightblue:'#191970',mintcream:'#F5FFFA',mistyrose:'#FFE4E1',moccasin:'#FFE4B5',navajowhite:'#FFDEAD',oldlace:'#FDF5E6',olivedrab:'#6B8E23',orange:'#FFA500',orangered:'#FF4500',orchid:'#DA70D6',palegoldenrod:'#EEE8AA',palegreen:'#98FB98',paleturquoise:'#AFEEEE',palevioletred:'#DB7093',papayawhip:'#FFEFD5',peachpuff:'#FFDAB9',peru:'#CD853F',pink:'#FFC0CB',plum:'#DDA0DD',powderblue:'#B0E0E6',rosybrown:'#BC8F8F',royalblue:'#4169E1',saddlebrown:'#8B4513',salmon:'#FA8072',sandybrown:'#F4A460',seagreen:'#2E8B57',seashell:'#FFF5EE',sienna:'#A0522D',skyblue:'#87CEEB',slateblue:'#6A5ACD',slategray:'#708090',slategrey:'#708090',snow:'#FFFAFA',springgreen:'#00FF7F',steelblue:'#4682B4',tan:'#D2B48C',thistle:'#D8BFD8',tomato:'#FF6347',turquoise:'#40E0D0',violet:'#EE82EE',wheat:'#F5DEB3',whitesmoke:'#F5F5F5',yellowgreen:'#9ACD32'};function V(s){var a=s.indexOf('(',3);var e=s.indexOf(')',a+1);var b=s.substring(a+1,e).split(',');if(b.length!=4||s.charAt(3)!='a'){b[3]=1}return b};function X(s){return parseFloat(s)/100};function Y(v,a,b){return M.min(b,M.max(a,v))};function $(a){var r,g,b,h,s,l;h=parseFloat(a[0])/360%360;if(h<0)h++;s=Y(X(a[1]),0,1);l=Y(X(a[2]),0,1);if(s==0){r=g=b=l}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=_(p,q,h+1/3);g=_(p,q,h);b=_(p,q,h-1/3)}return'#'+P[M.floor(r*255)]+P[M.floor(g*255)]+P[M.floor(b*255)]};function _(a,b,h){if(h<0)h++;if(h>1)h--;if(6*h<1)return a+(b-a)*6*h;else if(2*h<1)return b;else if(3*h<2)return a+(b-a)*(2/3-h)*6;else return a};var a1={};function b1(s){if(s in a1){return a1[s]}var a,b=1;s=String(s);if(s.charAt(0)=='#'){a=s}else if(/^rgb/.test(s)){var c=V(s);var a='#',n;for(var i=0;i<3;i++){if(c[i].indexOf('%')!=-1){n=M.floor(X(c[i])*255)}else{n=+c[i]}a+=P[Y(n,0,255)]}b=+c[3]}else if(/^hsl/.test(s)){var c=V(s);a=$(c);b=c[3]}else{a=T[s]||s}return a1[s]={color:a,alpha:b}};var c1={style:'normal',variant:'normal',weight:'normal',size:10,family:'sans-serif'};var d1={};function e1(s){if(d1[s]){return d1[s]}var e=document.createElement('div');var a=e.style;try{a.font=s}catch(b){}return d1[s]={style:a.fontStyle||c1.style,variant:a.fontVariant||c1.variant,weight:a.fontWeight||c1.weight,size:a.fontSize||c1.size,family:a.fontFamily||c1.family}};function f1(s,e){var c={};for(var p in s){c[p]=s[p]}var a=parseFloat(e.currentStyle.fontSize),f=parseFloat(s.size);if(typeof s.size=='number'){c.size=s.size}else if(s.size.indexOf('px')!=-1){c.size=f}else if(s.size.indexOf('em')!=-1){c.size=a*f}else if(s.size.indexOf('%')!=-1){c.size=(a/100)*f}else if(s.size.indexOf('pt')!=-1){c.size=f/.75}else{c.size=a}c.size*=0.981;return c};function g1(s){return s.style+' '+s.variant+' '+s.weight+' '+s.size+'px '+s.family};var h1={'butt':'flat','round':'round'};function i1(l){return h1[l]||'square'};function j1(c){this.m_=Q();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle='#000';this.fillStyle='#000';this.lineWidth=1;this.lineJoin='miter';this.lineCap='butt';this.miterLimit=Z*1;this.globalAlpha=1;this.font='10px sans-serif';this.textAlign='left';this.textBaseline='alphabetic';this.canvas=c;var a='width:'+c.clientWidth+'px;height:'+c.clientHeight+'px;overflow:hidden;position:absolute';var e=c.ownerDocument.createElement('div');e.style.cssText=a;c.appendChild(e);var o=e.cloneNode(false);o.style.backgroundColor='red';o.style.filter='alpha(opacity=0)';c.appendChild(o);this.element_=e;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1};var k1=j1.prototype;k1.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=''};k1.beginPath=function(){this.currentPath_=[]};k1.moveTo=function(x,y){var p=r1(this,x,y);this.currentPath_.push({type:'moveTo',x:p.x,y:p.y});this.currentX_=p.x;this.currentY_=p.y};k1.lineTo=function(x,y){var p=r1(this,x,y);this.currentPath_.push({type:'lineTo',x:p.x,y:p.y});this.currentX_=p.x;this.currentY_=p.y};k1.bezierCurveTo=function(c,a,b,d,x,y){var p=r1(this,x,y);var e=r1(this,c,a);var f=r1(this,b,d);l1(this,e,f,p)};function l1(s,c,a,p){s.currentPath_.push({type:'bezierCurveTo',cp1x:c.x,cp1y:c.y,cp2x:a.x,cp2y:a.y,x:p.x,y:p.y});s.currentX_=p.x;s.currentY_=p.y};k1.quadraticCurveTo=function(c,a,x,y){var b=r1(this,c,a);var p=r1(this,x,y);var d={x:this.currentX_+2.0/3.0*(b.x-this.currentX_),y:this.currentY_+2.0/3.0*(b.y-this.currentY_)};var e={x:d.x+(p.x-this.currentX_)/3.0,y:d.y+(p.y-this.currentY_)/3.0};l1(this,d,e,p)};k1.arc=function(x,y,r,s,e,c){r*=Z;var a=c?'at':'wa';var b=x+u(s)*r-C;var d=y+t(s)*r-C;var f=x+u(e)*r-C;var g=y+t(e)*r-C;if(b==f&&!c){b+=0.125}var p=r1(this,x,y);var h=r1(this,b,d);var l=r1(this,f,g);this.currentPath_.push({type:a,x:p.x,y:p.y,radius:r,xStart:h.x,yStart:h.y,xEnd:l.x,yEnd:l.y})};k1.rect=function(x,y,w,h){this.moveTo(x,y);this.lineTo(x+w,y);this.lineTo(x+w,y+h);this.lineTo(x,y+h);this.closePath()};k1.strokeRect=function(x,y,w,h){var o=this.currentPath_;this.beginPath();this.moveTo(x,y);this.lineTo(x+w,y);this.lineTo(x+w,y+h);this.lineTo(x,y+h);this.closePath();this.stroke();this.currentPath_=o};k1.fillRect=function(x,y,w,h){var o=this.currentPath_;this.beginPath();this.moveTo(x,y);this.lineTo(x+w,y);this.lineTo(x+w,y+h);this.lineTo(x,y+h);this.closePath();this.fill();this.currentPath_=o};k1.createLinearGradient=function(x,y,a,b){var g=new u1('gradient');g.x0_=x;g.y0_=y;g.x1_=a;g.y1_=b;return g};k1.createRadialGradient=function(x,y,r,a,b,c){var g=new u1('gradientradial');g.x0_=x;g.y0_=y;g.r0_=r;g.x1_=a;g.y1_=b;g.r1_=c;return g};k1.drawImage=function(a,v){var b,c,e,f,s,g,l,n;var o=a.runtimeStyle.width;var q=a.runtimeStyle.height;a.runtimeStyle.width='auto';a.runtimeStyle.height='auto';var w=a.width;var h=a.height;a.runtimeStyle.width=o;a.runtimeStyle.height=q;if(arguments.length==3){b=arguments[1];c=arguments[2];s=g=0;l=e=w;n=f=h}else if(arguments.length==5){b=arguments[1];c=arguments[2];e=arguments[3];f=arguments[4];s=g=0;l=w;n=h}else if(arguments.length==9){s=arguments[1];g=arguments[2];l=arguments[3];n=arguments[4];b=arguments[5];c=arguments[6];e=arguments[7];f=arguments[8]}else{throw Error('Invalid number of arguments')}var d=r1(this,b,c);var r=l/2;var x=n/2;var y=[];var W=10;var H=10;y.push(' <r_vml_:group',' coordsize="',Z*W,',',Z*H,'"',' coordorigin="0,0"',' style="width:',W,'px;height:',H,'px;position:absolute;');if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var z=[];z.push('M11=',this.m_[0][0],',','M12=',this.m_[1][0],',','M21=',this.m_[0][1],',','M22=',this.m_[1][1],',','Dx=',k(d.x/Z),',','Dy=',k(d.y/Z),'');var m1=d;var c2=r1(this,b+e,c);var c3=r1(this,b,c+f);var c4=r1(this,b+e,c+f);m1.x=m.max(m1.x,c2.x,c3.x,c4.x);m1.y=m.max(m1.y,c2.y,c3.y,c4.y);y.push('padding:0 ',k(m1.x/Z),'px ',k(m1.y/Z),'px 0;filter:progid:DXImageTransform.Microsoft.Matrix(',z.join(''),", sizingmethod='clip');")}else{y.push('top:',k(d.y/Z),'px;left:',k(d.x/Z),'px;')}y.push(' ">','<r_vml_:image src="',a.src,'"',' style="width:',Z*e,'px;',' height:',Z*f,'px"',' cropleft="',s/w,'"',' croptop="',g/h,'"',' cropright="',(w-s-l)/w,'"',' cropbottom="',(h-g-n)/h,'"',' />','</r_vml_:group>');this.element_.insertAdjacentHTML('BeforeEnd',y.join(''))};k1.stroke=function(f){var l=[];var a=false;var W=10;var H=10;l.push('<r_vml_:shape',' filled="',!!f,'"',' style="position:absolute;width:',W,'px;height:',H,'px;"',' coordorigin="0,0"',' coordsize="',Z*W,',',Z*H,'"',' stroked="',!f,'"',' path="');var n=false;var b={x:null,y:null};var d={x:null,y:null};for(var i=0;i<this.currentPath_.length;i++){var p=this.currentPath_[i];var c;switch(p.type){case'moveTo':c=p;l.push(' m ',k(p.x),',',k(p.y));break;case'lineTo':l.push(' l ',k(p.x),',',k(p.y));break;case'close':l.push(' x ');p=null;break;case'bezierCurveTo':l.push(' c ',k(p.cp1x),',',k(p.cp1y),',',k(p.cp2x),',',k(p.cp2y),',',k(p.x),',',k(p.y));break;case'at':case'wa':l.push(' ',p.type,' ',k(p.x-this.arcScaleX_*p.radius),',',k(p.y-this.arcScaleY_*p.radius),' ',k(p.x+this.arcScaleX_*p.radius),',',k(p.y+this.arcScaleY_*p.radius),' ',k(p.xStart),',',k(p.yStart),' ',k(p.xEnd),',',k(p.yEnd));break}if(p){if(b.x==null||p.x<b.x){b.x=p.x}if(d.x==null||p.x>d.x){d.x=p.x}if(b.y==null||p.y<b.y){b.y=p.y}if(d.y==null||p.y>d.y){d.y=p.y}}}l.push(' ">');if(!f){n1(this,l)}else{q1(this,l,b,d)}l.push('</r_vml_:shape>');this.element_.insertAdjacentHTML('beforeEnd',l.join(''))};function n1(c,l){var a=b1(c.strokeStyle);var b=a.color;var o=a.alpha*c.globalAlpha;var d=c.lineScale_*c.lineWidth;if(d<1){o*=d}l.push('<r_vml_:stroke',' opacity="',o,'"',' joinstyle="',c.lineJoin,'"',' miterlimit="',c.miterLimit,'"',' endcap="',i1(c.lineCap),'"',' weight="',d,'px"',' color="',b,'" />')};function q1(c,l,b,d){var f=c.fillStyle;var e=c.arcScaleX_;var g=c.arcScaleY_;var w=d.x-b.x;var h=d.y-b.y;if(f instanceof u1){var n=0;var o={x:0,y:0};var s=0;var q=1;if(f.type_=='gradient'){var x=f.x0_/e;var y=f.y0_/g;var r=f.x1_/e;var v=f.y1_/g;var z=r1(c,x,y);var H=r1(c,r,v);var W=H.x-z.x;var dy=H.y-z.y;n=M.atan2(W,dy)*180/M.PI;if(n<0){n+=360}if(n<1e-6){n=0}}else{var z=r1(c,f.x0_,f.y0_);o={x:(z.x-b.x)/w,y:(z.y-b.y)/h};w/=e*Z;h/=g*Z;var m1=m.max(w,h);s=2*f.r0_/m1;q=2*f.r1_/m1-s}var o1=f.colors_;o1.sort(function(J1,K1){return J1.offset-K1.offset});var p1=o1.length;var x1=o1[0].color;var y1=o1[p1-1].color;var B1=o1[0].alpha*c.globalAlpha;var C1=o1[p1-1].alpha*c.globalAlpha;var D1=[];for(var i=0;i<p1;i++){var E1=o1[i];D1.push(E1.offset*q+s+' '+E1.color)}l.push('<r_vml_:fill type="',f.type_,'"',' method="none" focus="100%"',' color="',x1,'"',' color2="',y1,'"',' colors="',D1.join(','),'"',' opacity="',C1,'"',' r_o_:opacity2="',B1,'"',' angle="',n,'"',' focusposition="',o.x,',',o.y,'" />')}else if(f instanceof v1){if(w&&h){var F1=-b.x;var G1=-b.y;l.push('<r_vml_:fill',' position="',F1/w*e*e,',',G1/h*g*g,'"',' type="tile"',' src="',f.src_,'" />')}}else{var a=b1(c.fillStyle);var H1=a.color;var I1=a.alpha*c.globalAlpha;l.push('<r_vml_:fill color="',H1,'" opacity="',I1,'" />')}};k1.fill=function(){this.stroke(true)};k1.closePath=function(){this.currentPath_.push({type:'close'})};function r1(c,x,y){var m=c.m_;return{x:Z*(x*m[0][0]+y*m[1][0]+m[2][0])-C,y:Z*(x*m[0][1]+y*m[1][1]+m[2][1])-C}};k1.save=function(){var o={};S(this,o);this.aStack_.push(o);this.mStack_.push(this.m_);this.m_=R(Q(),this.m_)};k1.restore=function(){if(this.aStack_.length){S(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function s1(m){return isFinite(m[0][0])&&isFinite(m[0][1])&&isFinite(m[1][0])&&isFinite(m[1][1])&&isFinite(m[2][0])&&isFinite(m[2][1])};function t1(c,m,a){if(!s1(m)){return}c.m_=m;if(a){var d=m[0][0]*m[1][1]-m[0][1]*m[1][0];c.lineScale_=B(A(d))}};k1.translate=function(x,y){var a=[[1,0,0],[0,1,0],[x,y,1]];t1(this,R(a,this.m_),false)};k1.rotate=function(r){var c=u(r);var s=t(r);var a=[[c,s,0],[-s,c,0],[0,0,1]];t1(this,R(a,this.m_),false)};k1.scale=function(x,y){this.arcScaleX_*=x;this.arcScaleY_*=y;var a=[[x,0,0],[0,y,0],[0,0,1]];t1(this,R(a,this.m_),true)};k1.transform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];t1(this,R(g,this.m_),true)};k1.setTransform=function(a,b,c,d,e,f){var m=[[a,b,0],[c,d,0],[e,f,1]];t1(this,m,true)};k1.drawText_=function(a,x,y,b,s){var m=this.m_,c=1000,l=0,r=c,o={x:0,y:0},e=[];var f=f1(e1(this.font),this.element_);var g=g1(f);var h=this.element_.currentStyle;var n=this.textAlign.toLowerCase();switch(n){case'left':case'center':case'right':break;case'end':n=h.direction=='ltr'?'right':'left';break;case'start':n=h.direction=='rtl'?'right':'left';break;default:n='left'}switch(this.textBaseline){case'hanging':case'top':o.y=f.size/1.75;break;case'middle':break;default:case null:case'alphabetic':case'ideographic':case'bottom':o.y=-f.size/2.25;break}switch(n){case'right':l=c;r=0.05;break;case'center':l=r=c/2;break}var d=r1(this,x+o.x,y+o.y);e.push('<r_vml_:line from="',-l,' 0" to="',r,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!s,'" stroked="',!!s,'" style="position:absolute;width:1px;height:1px;">');if(s){n1(this,e)}else{q1(this,e,{x:-l,y:0},{x:r,y:f.size})}var q=m[0][0].toFixed(3)+','+m[1][0].toFixed(3)+','+m[0][1].toFixed(3)+','+m[1][1].toFixed(3)+',0,0';var v=k(d.x/Z)+','+k(d.y/Z);e.push('<r_vml_:skew on="t" matrix="',q,'" ',' offset="',v,'" origin="',l,' 0" />','<r_vml_:path textpathok="true" />','<r_vml_:textpath on="true" string="',G(a),'" style="v-text-align:',n,';font:',G(g),'" /></r_vml_:line>');this.element_.insertAdjacentHTML('beforeEnd',e.join(''))};k1.fillText=function(a,x,y,b){this.drawText_(a,x,y,b,false)};k1.strokeText=function(a,x,y,b){this.drawText_(a,x,y,b,true)};k1.measureText=function(a){if(!this.textMeasureEl_){var s='<span style="position:absolute;'+'top:-20000px;left:0;padding:0;margin:0;border:none;'+'white-space:pre;"></span>';this.element_.insertAdjacentHTML('beforeEnd',s);this.textMeasureEl_=this.element_.lastChild}var d=this.element_.ownerDocument;this.textMeasureEl_.innerHTML='';this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(d.createTextNode(a));return{width:this.textMeasureEl_.offsetWidth}};k1.clip=function(){};k1.arcTo=function(){};k1.createPattern=function(a,r){return new v1(a,r)};function u1(a){this.type_=a;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]};u1.prototype.addColorStop=function(o,c){c=b1(c);this.colors_.push({offset:o,color:c.color,alpha:c.alpha})};function v1(a,r){z1(a);switch(r){case'repeat':case null:case'':this.repetition_='repeat';break;case'repeat-x':case'repeat-y':case'no-repeat':this.repetition_=r;break;default:w1('SYNTAX_ERR')}this.src_=a.src;this.width_=a.width;this.height_=a.height};function w1(s){throw new A1(s)};function z1(a){if(!a||a.nodeType!=1||a.tagName!='IMG'){w1('TYPE_MISMATCH_ERR')}if(a.readyState!='complete'){w1('INVALID_STATE_ERR')}};function A1(s){this.code=this[s];this.message=s+': DOM Exception '+this.code};var p=A1.prototype=new Error;p.INDEX_SIZE_ERR=1;p.DOMSTRING_SIZE_ERR=2;p.HIERARCHY_REQUEST_ERR=3;p.WRONG_DOCUMENT_ERR=4;p.INVALID_CHARACTER_ERR=5;p.NO_DATA_ALLOWED_ERR=6;p.NO_MODIFICATION_ALLOWED_ERR=7;p.NOT_FOUND_ERR=8;p.NOT_SUPPORTED_ERR=9;p.INUSE_ATTRIBUTE_ERR=10;p.INVALID_STATE_ERR=11;p.SYNTAX_ERR=12;p.INVALID_MODIFICATION_ERR=13;p.NAMESPACE_ERR=14;p.INVALID_ACCESS_ERR=15;p.VALIDATION_ERR=16;p.TYPE_MISMATCH_ERR=17;return L}return});sap.riv.module({qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'}],function Setup(T){var a=/\{(\d+)\}/g;var e=function(){};var f={noop:e,unsupported:function(){throw new Error('Unsupported function!')},unimplemented:function(){throw new Error('Unimplemented function!')},error:function(b){var c=arguments;if(c[0]){var b=c[0].replace(a,function(m,n){return c[parseInt(n)+1]});throw b}else{throw'unknown error!'}},createCallChain:function(){var l=arguments.length;if(l>1){var c=[];for(var i=0;i<l;i++){if(T.isFunction(arguments[i])){c.push(arguments[i])}else{f.error('Could not create call chain for non-function object')}}return(function(){for(var i=0;i<l;i++){c[i].apply(this,arguments)}})}else{return T.isFunction(arguments[0])?arguments[0]:e}}};return f});sap.riv.module({qname:'sap.riv.core.utils.TransformHelper',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(T,M){var _=function(a,b){var d=[];var m=b.length,n=b[0].length;for(var r=0,f;r<m;r++){f=[];for(var c=0,e;c<n;c++){e=0;for(var h=0;h<n;h++){e+=b[r][h]*a[h][c]}f[c]=e}d[r]=f}return d};var g=[[1,0,0],[0,1,0],[0,0,1]];var j={identityMatrix:function(){return g},makeRotateTM:function(a,t){var b=t||g;var c=_([[M.cos(a),-M.sin(a),0],[M.sin(a),M.cos(a),0],[0,0,1]],b);return c},makeRotateInvertTM:function(a,t){var b=t||g;var c=_(b,[[M.cos(a),M.sin(a),0],[-M.sin(a),M.cos(a),0],[0,0,1]]);return c},makeScaleTM:function(x,y,t){var a=t||g;var b=_([[x,0,0],[0,y,0],[0,0,1]],a);return b},makeScaleInvertTM:function(x,y,t){var a=t||g;var b=_(a,[[1/x,0,0],[0,1/y,0],[0,0,1]]);return b},makeSkewTM:function(x,y,t){var a=t||g;var b=_([[1,x,0],[y,1,0],[0,0,1]],a);return b},makeInvertSkewTM:function(x,y,t){var a=t||g;var d=1-x*y;var m;if(d!==0){m=[[1/d,-x/d,0],[-y/d,1/d,0],[0,0,1]]}else{throw new Error('invalid affine transform matrix')}var b=_(a,m);return b},makeTranslateTM:function(x,y,t){var a=t||g;var b=_([[1,0,x],[0,1,y],[0,0,1]],a);return b},makeTranslateInvertTM:function(x,y,t){var a=t||g;var b=_(a,[[1,0,-x],[0,1,-y],[0,0,1]]);return b},makeCustomTM:function(t,a){var b=a||g;if(t[0][0]*t[1][1]!=t[1][0]*t[0][1]){var c=_(t,b);return c}else{throw new Error('invalid affine transform matrix')}},makeCustomInvertTM:function(t,h){var i=h||g;var a=t[0][0],b=t[1][0],c=t[0][1],d=t[1][1],e=t[0][2],f=t[1][2];var k=a*d-b*c;if(k!=0){var l=_(i,[[d/k,-c/k,(c*f-e*d)/k],[-b/k,a/k,(e*b-a*f)/k],[0,0,1]]);return l}else{throw new Error('invalid affine transform matrix')}},isEqualTransform:function(a,b){return a&&b&&(a[0][0]==b[0][0]&&a[0][1]==b[0][1]&&a[0][2]==b[0][2]&&a[1][0]==b[1][0]&&a[1][1]==b[1][1]&&a[1][2]==b[1][2]&&a[2][0]==b[2][0]&&a[2][1]==b[2][1]&&a[2][2]==b[2][2])},isIdentityMatrix:function(a){return(a[0][0]==1&&a[0][1]==0&&a[0][2]==0&&a[1][0]==0&&a[1][1]==1&&a[1][2]==0&&a[2][0]==0&&a[2][1]==0&&a[2][2]==1)},isValidAffineTransform:function(t){if(T.isArray(t)){return t[0][0]*t[1][1]!=t[1][0]*t[0][1]}return false},pointApplyTransform:function(p,t){var x=p.x,y=p.y;return{x:t[0][0]*x+t[0][1]*y+t[0][2],y:t[1][0]*x+t[1][1]*y+t[1][2]}},rectApplyTransform:function(r,t){var x=r.x,y=r.y,w=r.width,h=r.height;var a={minx:Number.MAX_VALUE,maxx:Number.MIN_VALUE,miny:Number.MAX_VALUE,maxy:Number.MIN_VALUE};var c=[[t[0][0]*x+t[0][1]*y+t[0][2],t[1][0]*x+t[1][1]*y+t[1][2]],[t[0][0]*(x+w)+t[0][1]*y+t[0][2],t[1][0]*(x+w)+t[1][1]*y+t[1][2]],[t[0][0]*(x+w)+t[0][1]*(y+h)+t[0][2],t[1][0]*(x+w)+t[1][1]*(y+h)+t[1][2]],[t[0][0]*x+t[0][1]*(y+h)+t[0][2],t[1][0]*x+t[1][1]*(y+h)+t[1][2]]];for(var i=0,b;i<4;i++){b=c[i];if(a.minx>b[0]){a.minx=b[0]}if(a.miny>b[1]){a.miny=b[1]}if(a.maxx<b[0]){a.maxx=b[0]}if(a.maxy<b[1]){a.maxy=b[1]}}return{x:a.minx,y:a.miny,width:a.maxx-a.minx,height:a.maxy-a.miny}},unmatrix:function(t){var a=t[0][0],b=t[1][0],c=t[0][1],d=t[1][1],e=t[0][2],f=t[1][2];var r,s,h,i;if(a*d==b*c){return false}else{s=M.sqrt(a*a+b*b);a/=s;b/=s;i=a*c+b*d;c-=a*i;d-=b*i;h=M.sqrt(c*c+d*d);c/=h;d/=h;i/=h;if(a*d-b*c<0){i=-i;h=-h}r=M.atan2(a,b)}return{tx:e,ty:f,sx:s,sy:h,skew:i,rotate:r}}};return j});sap.riv.module({qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(T,F){var e=function(){};var t=/^\s+/,a=/\s+$/,r=/^[\],:{}\s]*$/,b=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,c=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,d=/(?:^|:|,)(?:\s*\[)+/g;var f=f?function(g){return g==null?"":f.call(g)}:function(g){return g==null?"":g.toString().replace(t,"").replace(a,"")};var o={proxy:function(g,p,h){if(arguments.length===2){if(typeof p==="string"){h=g;g=h[p];p=undefined}else if(p&&!T.isFunction(p)){h=p;p=undefined}}if(!p&&g){p=function(){return g.apply(h||this,arguments)}}return p},extend:function(){var g,n,s,h,j,k,l=arguments[0]||{},i=1,m=arguments.length,p=false;if(typeof l==="boolean"){p=l;l=arguments[1]||{};i=2}if(typeof l!=="object"&&!T.isFunction(l)){l={}}if(m===i){l=this;--i}for(;i<m;i++){if((g=arguments[i])!=null){for(n in g){s=l[n];h=g[n];if(l===h){continue}if(p&&h&&(T.isPlainObject(h)||(j=T.isArray(h)))){if(j){j=false;k=s&&T.isArray(s)?s:[]}else{k=s&&T.isPlainObject(s)?s:{}}l[n]=o.extend(p,k,h)}else if(h!==undefined){l[n]=h}}}}return l},each:function(g,h,j){var n,i=0,l=g.length,k=l===undefined||T.isFunction(g);if(j){if(k){for(n in g){if(h.apply(g[n],j)===false){break}}}else{for(;i<l;){if(h.apply(g[i++],j)===false){break}}}}else{if(k){for(n in g){if(h.call(g[n],n,g[n])===false){break}}}else{for(var v=g[0];i<l&&h.call(v,i,v)!==false;v=g[++i]){}}}return g},parseJSON:function(g){if(typeof g!=="string"||!g){return null}g=f(g);if(r.test(g.replace(b,"@").replace(c,"]").replace(d,""))){return window&&window.JSON&&window.JSON.parse?window.JSON.parse(g):(new Function("return "+g))()}else{T.error("Invalid JSON: "+g)}},derive:function(s,g){var j;var k;if(typeof s==='function'){if(typeof g==='function'){if(g.prototype.constructor==Object.prototype.constructor){g.prototype.constructor=g}e.prototype=g.prototype;var h=new e();var l=s.prototype;for(var p in l){if(l.hasOwnProperty(p)){h[p]=l[p]}}j=F.createCallChain(g,s);k=j.prototype=h;k.constructor=j;k.superclass=g.prototype;k.callParent=(function(){var u=[];return function(){var v=arguments[0];if(!u.length){u.push({funcName:v,thisObj:this,level:0})}else if(u[u.length-1].funcName!==v||u[u.length-1].thisObj!==this){u.push({funcName:v,thisObj:this,level:0})}var w=u[u.length-1].level;var x=this.superclass;while(w--){x=x.superclass}u[u.length-1].level++;var y=[];for(var i=1;i<arguments.length;i++){y.push(arguments[i])}x[v].apply(u[u.length-1].thisObj,y);u[u.length-1].level--;if(!u[u.length-1].level){u.pop()}}})();j.superclazz=g;return j}else if(typeof g==='object'){var m=s;var n=g;var q=m.prototype;e.prototype=q;var h=new e();j=F.createCallChain(m,n.constructor);k=j.prototype=h;for(p in n){if(n.hasOwnProperty(p)){k[p]=n[p]}}k.constructor=j;k.superclass=m.prototype;k.callParent=(function(){var u=[];return function(){var v=arguments[0];if(!u.length){u.push({funcName:v,thisObj:this,level:0})}else if(u[u.length-1].funcName!==v||u[u.length-1].thisObj!==this){u.push({funcName:v,thisObj:this,level:0})}var w=u[u.length-1].level;var x=this.superclass;while(w--){x=x.superclass}u[u.length-1].level++;var y=[];for(var i=1;i<arguments.length;i++){y.push(arguments[i])}x[v].apply(u[u.length-1].thisObj,y);u[u.length-1].level--;if(!u[u.length-1].level){u.pop()}}})();j.superclazz=m}}return j}};return o});sap.riv.module({qname:'sap.riv.graphics.Event',version:'1.0.0'},function Setup(){var E=function(t,b,c){this._type=t;this._targetLayer=this._currentLayer=b;this._canBubbling=c||false;this._timestamp=+new Date};var a=E.prototype;a._setCurrentLayer_=function(c){this._currentLayer=c};a.type=function(){return this._type};a.timestamp=function(){return this._timestamp};a.targetLayer=function(){return this._targetLayer};a.currentLayer=function(){return this._currentLayer};a.isInBubbling=function(){return this._targetLayer.id()!=this._currentLayer.id()};a.shouldBubble=function(){return this._canBubbling};a.stopPropagation=function(){this._canBubbling=false};return E});sap.riv.module({qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.RIVExCanvasMgr',version:'1.0.0'},{qname:'sap.riv.core.UADetector',version:'1.0.0'}],function Setup(T,F,R,U){var $=jQuery;if(!$){F.error('Cannot find jQuery')}var D=function(c){this._canvas2DContext=c};var g=D.prototype;g.save=function(){this._canvas2DContext.save()};g.restore=function(){this._canvas2DContext.restore()};g.scale=function(x,y){this._canvas2DContext.scale(x,y)};g.rotate=function(a){this._canvas2DContext.rotate(a)};g.translate=function(x,y){this._canvas2DContext.translate(x,y)};g.transform=function(a,b,c,d,e,f){this._canvas2DContext.transform(a,b,c,d,e,f)};g.setTransform=function(a,b,c,d,e,f){this._canvas2DContext.setTransform(a,b,c,d,e,f)};g.setAlpha=function(a){this._canvas2DContext.globalAlpha=a};g.setCompositeOperation=function(c){this._canvas2DContext.globalCompositeOperation=c};g.setStrokeStyle=function(s){this._canvas2DContext.strokeStyle=s};g.setFillStyle=function(s){this._canvas2DContext.fillStyle=s};g.setLineWidth=function(a){this._canvas2DContext.lineWidth=a};g.setLineCap=(function(){if(U.isFirefox()&&parseFloat(U.version())<4)return F.noop;else{return function(a){this._canvas2DContext.lineCap=a}}})();g.setLineJoin=(function(){if(U.isFirefox()&&parseFloat(U.version())<4)return F.noop;else{return function(a){this._canvas2DContext.lineJoin=a}}})();g.setMiterLimit=function(a){this._canvas2DContext.miterLimit=a};g.setShadowStyle=function(o,a,b,c){this._canvas2DContext.shadowOffsetX=o;this._canvas2DContext.shadowOffsetY=a;this._canvas2DContext.shadowBlur=b;this._canvas2DContext.shadowColor=c};g.clearRect=function(x,y,w,a){this._canvas2DContext.clearRect(x,y,w,a)};g.fillRect=function(x,y,w,a){this._canvas2DContext.fillRect(x,y,w,a)};g.strokeRect=function(x,y,w,a){this._canvas2DContext.strokeRect(x,y,w,a)};g.beginPath=function(){this._canvas2DContext.beginPath()};g.closePath=function(){this._canvas2DContext.closePath()};g.moveTo=function(x,y){this._canvas2DContext.moveTo(x,y)};g.lineTo=function(x,y){this._canvas2DContext.lineTo(x,y)};g.quadraticCurveTo=function(c,a,x,y){this._canvas2DContext.quadraticCurveTo(c,a,x,y)};g.bezierCurveTo=function(c,a,b,d,x,y){this._canvas2DContext.bezierCurveTo(c,a,b,d,x,y)};g.arcTo=function(x,y,a,b,c){this._canvas2DContext.arcTo(x,y,a,b,c)};g.rect=function(x,y,w,a){this._canvas2DContext.rect(x,y,w,a)};g.arc=function(x,y,a,s,e,b){this._canvas2DContext.arc(x,y,a,s,e,b)};g.fill=function(){this._canvas2DContext.fill()};g.stroke=function(){this._canvas2DContext.stroke()};g.clip=function(){this._canvas2DContext.clip()};g.setFont=function(f){this._canvas2DContext.font=f};g.setTextAlign=function(t){this._canvas2DContext.textAlign=t};g.setTextBaseline=function(t){this._canvas2DContext.textBaseline=t};g.fillText=function(t,x,y,a){if(a!==undefined){this._canvas2DContext.fillText(t,x,y,a)}else{this._canvas2DContext.fillText(t,x,y)}};g.strokeText=function(t,x,y,a){if(T.isDefined(a)){this._canvas2DContext.strokeText(t,x,y,a)}else{this._canvas2DContext.strokeText(t,x,y)}};g.measureText=function(t){return this._canvas2DContext.measureText(t)};g.drawImage=function(i,d,a){if(i instanceof C){this._canvas2DContext.drawImage(i._canvas,d,a)}else{this._canvas2DContext.drawImage(i,d,a)}};g.createLinearGradient=function(x,y,a,b){return this._canvas2DContext.createLinearGradient(x,y,a,b)};g.createRadialGradient=function(x,y,a,b,c,d){return this._canvas2DContext.createRadialGradient(x,y,a,b,c,d)};var C=function(c){this._jqCanvas=c;this._canvas=c.get(0);this._drawingContext=new D(this._canvas.getContext('2d'))};C.prototype.getContext=function(c){return this._drawingContext};C.prototype.toDataURL=function(){return this._canvas.toDataURL.apply(this._canvas,arguments)};C.prototype.width=function(w){if(w!==undefined){w=~~(w+0.5);this._jqCanvas.width(w);this._canvas.width=w;return this}else{return this._canvas.width}};C.prototype.height=function(a){if(a!=undefined){a=~~(a+0.5);this._jqCanvas.height(a);this._canvas.height=a;return this}else{return this._canvas.height}};C.prototype.bind=function(t,c){this._jqCanvas.bind(t,c)};var h=0;var n=function(){return'can:'+h++};var r=R;var j=function(w,a,b){w=~~(w+0.5);a=~~(a+0.5);var c;if(window.__IS_IN_RHINO){var d=document.createElement('canvas');if(!a||a<=0){a=1}if(!w||w<=0){w=1}d.height=a;d.width=w;d.id=n();c=$(d);if(b){c.appendTo(b)}}else if(U.isIE()&&parseFloat(U.version())<9){if(typeof FlashCanvas!="undefined"){var d=document.createElement('canvas');c=$(d).attr('id',n());if(b){c.appendTo(b)}else{$('body').append(d)}FlashCanvas.initElement(d);c.attr('height',a).attr('width',w).width(w).height(a)}else{var d=document.createElement('rivcanvas');c=$(d).attr('id',n()).attr('height',a).attr('width',w).width(w).height(a);if(b){c.appendTo(b)}r.initElement(d)}}else{c=$(document.createElement('canvas')).attr('id',n()).attr('height',a).attr('width',w).width(w).height(a);if(b){c.appendTo(b)}}return new C(c)};var k=undefined;var l=function(){if(!k){k=j(1,1).getContext('2d')}return k};var m={createCanvasElement:j,getCanvasElement:function(c){return new C(c)},createColorStyle:function(s){var a;if(!s){return'#000000'}switch(s.t){case'css':a=s.v;break;case'lg':var b=s.s;var e=s.e;var c=s.st;a=l().createLinearGradient(b.x,b.y,e.x,e.y);for(var i=0,d=c.length,f;i<d;i++){f=c[i];a.addColorStop(f.o,f.v)}break;case'rg':var b=s.s.c;var o=s.s.r;var e=s.e.c;var p=s.e.r;var c=s.st;a=l().createRadialGradient(b.x,b.y,o,e.x,e.y,p);for(var i=0,d=c.length,f;i<d;i++){f=c[i];a.addColorStop(f.o,f.v)}break;default:a=s}return a}};return m});sap.riv.module({qname:'sap.riv.graphics.Drawable',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TransformHelper',version:'1.0.0'}],function Setup(O,F,T){var s=(function(){var a=0;return function(){return's:'+a++}})();var i=T.identityMatrix();var g=function(m){this._isVisible=true;this._id=s();this._shadowSetting=undefined;this._compositionSetting=undefined;this._tm=i;this._itm=i};g.prototype.id=function(){return this._id};g.prototype.visible=function(a){if(a!==undefined){this._isVisible=a;return this}return this._isVisible};g.prototype.rotateAt=function(x,y,a){this._tm=T.makeTranslateTM(x,y,this._tm);this._itm=T.makeTranslateInvertTM(x,y,this._itm);this._tm=T.makeRotateTM(a,this._tm);this._itm=T.makeRotateInvertTM(a,this._itm);return this};g.prototype.rotate=function(a){this._tm=T.makeRotateTM(a,this._tm);this._itm=T.makeRotateInvertTM(a,this._itm);return this};g.prototype.translate=function(x,y){this._tm=T.makeTranslateTM(x,y,this._tm);this._itm=T.makeTranslateInvertTM(x,y,this._itm);return this};g.prototype.scale=function(x,y){this._tm=T.makeScaleTM(x,y,this._tm);this._itm=T.makeScaleInvertTM(x,y,this._itm);return this};g.prototype.skew=function(x,y){this._tm=T.makeSkewTM(x,y,this._tm);this._itm=T.makeInvertSkewTM(x,y,this._itm);return this};g.prototype.customTransform=function(a,b,c,d,e,f){var m=[[a,c,e],[b,d,f],[0,0,1]];this._tm=T.makeCustomTM(m,this._tm);this._itm=T.makeCustomInvertTM(m,this._itm);return this};g.prototype.setTransform=function(a,b,c,d,e,f){this._tm=[[a,c,e],[b,d,f],[0,0,1]];this._itm=T.makeCustomInvertTM(this._tm,i);return this};g.prototype.shadow=function(a){if(a!==undefined){if(a!==false){this._shadowSetting={ox:a.offsetX,oy:a.offsetY,blur:a.blur,color:a.color}}else{this._shadowSetting=undefined}return this}if(this._shadowSetting){return O.extend({},this._shadowSetting)}};g.prototype.compositionMode=function(c){if(c!==undefined){if(c!==false){this._compositionSetting={alpha:c.alpha,operation:c.operation}}else{this._compositionSetting=undefined}return this}if(this._compositionSetting){return O.extend({},this._compositionSetting)}};g.prototype.pointIn=function(p){var a=this._itm;var x=p.x;var y=p.y;return this.doPointInTest({x:a[0][0]*x+a[0][1]*y+a[0][2],y:a[1][0]*x+a[1][1]*y+a[1][2]})};g.prototype.doPointInTest=F.unimplemented;g.prototype.drawTo=function(d){if(!this._isVisible){return}var C=d;if(!T.isIdentityMatrix(this._tm)){var t=this._tm;C.transform(t[0][0],t[1][0],t[0][1],t[1][1],t[0][2],t[1][2])}if(this._shadowSetting){var a=this._shadowSetting;C.setShadowStyle(a.ox,a.oy,a.blur,a.color)}if(this._compositionSetting){var c=this._compositionSetting;C.setAlpha(c.alpha||1.0);C.setCompositeOperation(c.operation||'source-over')}this.doDraw(C)};g.prototype.doDraw=F.noop;return g});sap.riv.module({qname:'sap.riv.graphics.MouseEvent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.Event',version:'1.0.0'}],function Setup(O,E){var M=O.derive(E,{constructor:function(t,a,c,g,p){this._relatedLayer=undefined;this._targetLocalXY=this._currentLocalXY=this._targetLayer.convertPointFromGlobal(g);this._pageXY={x:p.x,y:p.y}},_setRelatedLayer_:function(r){this._relatedLayer=r},_setCurrentLocalXY_:function(c){this._currentLocalXY=c},relatedLayer:function(){return this._relatedLayer},targetLocalXY:function(){return this._targetLocalXY},currentLocalXY:function(){return this._currentLocalXY},pageXY:function(){return this._pageXY}});return M});sap.riv.module({qname:'sap.riv.core.Logger',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(F){var n=F.noop;Date.now=Date.now||function(){return+new Date};var d=0;function c(a){var l,e,w,x,y;if(k[0].length>0){if(a){y=a.getLevel();for(var i=0,z=k[0].length;i<z;i++){l=k[0][i];e=k[1][i];w=k[2][i];x=k[3][i];if(k[1][i]>=y)a.doAppend(l,e,w,x)}return}var B={};for(var E in v){B[E]=v[E].getLevel()}while(k[0].length){l=k[0].shift();e=k[1].shift();w=k[2].shift();x=k[3].shift();for(E in v){a=v[E];if(e>=B[E])a.doAppend(l,e,w,x)}}return}else if(++d===3)r()}function b(){c();if(!p)setTimeout(function(){b()},100)}var C=function(){this.threshold=L.LEVEL.INFO;this.layout=new L.DefaultLayout();this.print=typeof console!==undefined?function(a){console.log(a)}:n};C.prototype={doAppend:function(l,a,e,i){this.print(this.layout.format(l,a,e,i))},setLayout:function(l){l.format&&(this.layout=l)},getLevel:function(){return this.threshold},setLevel:function(l){this.threshold=l}};var D=function(){};D.prototype.format=function(l,a,e,i){return"["+l+"]"+"["+h(a)+"]"+"["+(e||"main")+"]-"+i};var f=function(a){if(!$){throw"need jQuery"}this.threshold=L.LEVEL.INFO;this.divSl=$(a);this.layout=new H()};f.prototype={getLevel:function(){return this.threshold},setLevel:function(l){this.threshold=l},doAppend:function(l,a,e,i){this.divSl.append(this.layout.format(l,a,e,i))}};var H=function(){};H.prototype={getStyle:function(l){var a;if(l===L.LEVEL.ERROR){a='color:red'}else if(l===L.LEVEL.WARN){a='color:orange'}else if(l===L.LEVEL.DEBUG){a='color:green'}else if(l===L.LEVEL.TRACE){a='color:green'}else if(l===L.LEVEL.INFO){a='color:grey'}else{a='color:yellow'}return a},format:function(l,a,e,i){return"<div style=\""+this.getStyle(a)+"\">["+l+"]"+"["+h(a)+"]["+(e||"main")+"]-"+i+"</div>"}};var g=function(){this.array=new Array()};g.prototype={push:function(a){this.array[this.array.length]=a;return this.array.length},pull:function(){if(this.array.length>0){var a=this.array[0];for(var i=0;i<this.array.length-1;i++){this.array[i]=this.array[i+1]}this.array.length=this.array.length-1;return a}return null},length:function(){return this.array.length}};var A=function(a){this.loggingUrl=a;this.isInProgress=false;this.threshold=L.LEVEL.INFO;this.bufferSize=1;this.timeout=2000;this.loggingEventMap=new g();this.layout=new L.JSONLayout();this.httpRequest=null};A.prototype={getLevel:function(){return this.threshold},setLevel:function(l){this.threshold=l},doAppend:function(l,a,e,i){if(this.loggingEventMap.length()<=this.bufferSize||this.isInProgress===true){this.loggingEventMap.push([l,a,e,i])}if(this.loggingEventMap.length()>=this.bufferSize&&this.isInProgress===false){this.send()}},send:function(){if(this.loggingEventMap.length()>0){this.isInProgress=true;var a=[];var l;for(var i=0;i<this.loggingEventMap.length()&&i<this.bufferSize;i++){l=this.loggingEventMap.pull();a.push(this.layout.format(l[0],l[1],l[2],l[3]))}var w=this.layout.getHeader();w+=a.join(this.layout.getSeparator());w+=this.layout.getFooter();var x=this;if(this.httpRequest===null){this.httpRequest=this.getXmlHttpRequest()}this.httpRequest.onreadystatechange=function(){x.onReadyStateChanged.call(x)};this.httpRequest.open("POST",this.loggingUrl,true);this.httpRequest.setRequestHeader("Content-type",this.layout.getContentType());this.httpRequest.send(w);x=this;try{setTimeout(function(){x.httpRequest.onreadystatechange=function(){return};x.httpRequest.abort();x.isInProgress=false;if(x.loggingEventMap.length()>0){x.send()}},this.timeout)}catch(e){}}},onReadyStateChanged:function(){var a=this.httpRequest;if(this.httpRequest.readyState!=4){return}var e=((typeof a.status==="undefined")||a.status===0||(a.status>=200&&a.status<300));if(e){this.isInProgress=false}else{}},getXmlHttpRequest:function(){var a=false;try{if(window.XMLHttpRequest){a=new XMLHttpRequest();if(a.overrideMimeType){a.overrideMimeType(this.layout.getContentType())}}else if(window.ActiveXObject){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){a=new ActiveXObject("Microsoft.XMLHTTP")}}}catch(e){a=false}if(!a){throw"browser don't support AJAX"}return a}};var J=function(){};J.prototype={format:function(l,a,e,i){var w="{\n \"LoggingEvent\": {\n";w+="\t\"category\": \""+(e||"main")+"\",\n";w+="\t\"level\": \""+h(a)+"\",\n";w+="\t\"message\": \""+i+"\",\n";w+="\t\"timestamp\": \""+l+"\"\n";w+="}\n}";return w},getContentType:function(){return"text/json"},getHeader:function(){var a="unknown";try{a=navigator.userAgent}catch(e){a="unknown"}var i="unknown";try{i=location.href}catch(e){i="unknown"}return"{"+"\"ClientInfo\" : {\n"+"\t\"useragent\": \""+a+"\",\n"+"\t\"referer\": \""+i+"\"\n},\n"+"\"VizLogger\": [\n"},getFooter:function(){return"\n]}"},getSeparator:function(){return",\n"}};var X=function(){};X.prototype={format:function(l,a,e,i){var w="<vizLogger:event category=\"";w+=(e||"main")+"\" level=\"";w+=h(a)+"\" timestamp=\"";w+=l+"\">\n";w+="\t<vizLogger:message><![CDATA["+this.escapeCdata(i)+"]]></vizLogger:message>\n";w+="</vizLogger:event>";return w},getContentType:function(){return"text/xml"},getHeader:function(){var a="unknown";try{a=navigator.userAgent}catch(e){a="unknown"}var i="unknown";try{i=location.href}catch(e){i="unknown"}return"<vizLogger:eventSet useragent=\""+a+"\" referer=\""+i.replace(/&/g,"&amp;")+"\">\n"},getFooter:function(){return"</vizLogger:eventSet>\n"},getSeparator:function(){return"\n"},escapeCdata:function(a){return a.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")}};function h(l){switch(l){case L.LEVEL.TRACE:return"TRACE";case L.LEVEL.DEBUG:return"DEBUG";case L.LEVEL.INFO:return"INFO";case L.LEVEL.WARN:return"WARN";case L.LEVEL.ERROR:return"ERROR"}}var j=false;var p=false;var k=[[],[],[],[]];var M=2000;var m=function(l,a,e){if(k[0].length===M)c();k[0].push(Date.now());k[1].push(l);k[2].push(a);k[3].push(e.toString())};var o=function(l,a,e){s();m(l,a,e)};var q=n;var r=function(){p=true;q=o};var s=function(){p=false;q=m;setTimeout(function(){b()},100)};var t=0;var u=function(){return t++};var v={};var L={LEVEL:{TRACE:5000,DEBUG:10000,INFO:20000,WARN:30000,ERROR:40000,NO:Number.MAX_VALUE},isEnable:function(){return j},enable:function(){q=m;j=true;setTimeout(function(){b()},100)},disable:function(){c();q=n;j=false},toggleEnable:function(){j?this.disable():this.enable()},addAppender:function(){var _=u();var a,e;if(arguments.length===1){a=_;e=arguments[0]}else if(arguments.length>=2){a=arguments[0];e=arguments[1]}if(typeof e==="object"&&e.doAppend){if(v[a]!==undefined)return;c();v[a]=e;return a}},setAppenders:function(v){v=[];for(var i=0,l=v.length;i<l;i++){var a=v[i];if(a.appenderKey)this.addAppender(a.appenderKey,a.appender);else this.addAppender(a.appender)}},removeAppender:function(a){if(v[a]===undefined)return false;c(v[a]);return(delete v[a])},getAppender:function(a){return v[a]},ConsoleAppender:C,DivAppender:f,AjaxAppender:A,DefaultLayout:D,HTMLLayout:H,XMLLayout:X,JSONLayout:J,trace:function(a,e){q(L.LEVEL.TRACE,e,a)},debug:function(a,e){q(L.LEVEL.DEBUG,e,a)},info:function(a,e){q(L.LEVEL.INFO,e,a)},warn:function(a,e){q(L.LEVEL.WARN,e,a)},error:function(a,e){q(L.LEVEL.ERROR,e,a)},};v["[default]"]=new L.ConsoleAppender();return L});sap.riv.module({qname:'sap.riv.graphics.shape.ClosedShape',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.Drawable',version:'1.0.0'}],function Setup(O,C,D){var a=O.derive(D,{constructor:function(){this._bdr={width:0,color:'#000000',lineJoin:'miter',miterLimit:10.0}},borderWidth:function(b){if(b!=undefined&&b>=0){this._bdr.width=b;return this}return this._bdr.width},borderColor:function(b){if(b!=undefined){this._bdr.color=C.createColorStyle(b);return this}return this._bdr.color},borderJoin:function(b){if(b!==undefined){this._bdr.lineJoin=b;return this}return this._bdr.lineJoin},borderMiterLimit:function(b){if(b!==undefined&&b>0){this._bdr.miterLimit=b;return this}return this._bdr.miterLimit},drawBorder:function(d){if(this._bdr.width>0){var b=this._bdr;d.save();d.setStrokeStyle(b.color);d.setLineWidth(b.width||1.0);d.setLineJoin(b.lineJoin||'#miter');if(b.lineJoin==='miter'&&b.miterLimit){d.setMiterLimit(b.miterLimit)}d.stroke();d.restore()}}});return a});sap.riv.module({qname:'sap.riv.graphics.ClipRegion',version:'1.0.0'},function Setup(){var c=(function(){var i=0;return function(){return'cr:'+i++}})();var C=function(r){this._id=c();this._spths=[];switch(r.type){case'rect':var x=r.x,y=r.y,w=r.w,h=r.h;var s=[];s.push({pd:'orig',x:x,y:y});s.push({pd:'lnto',x:x+w,y:y});s.push({pd:'lnto',x:x+w,y:y+h});s.push({pd:'lnto',x:x,y:y+h});this._spths.push(s);break;case'path':this._spths=r.spths;break}};C.prototype.id=function(){return this._id};C.prototype.clip=function(a){var b=a;b.beginPath();for(var s=0,e,f=this._spths,g=f.length;s<g;s++){e=f[s];for(var h=0,d,i=e.length;h<i;h++){d=e[h];switch(d.pd){case'orig':b.moveTo(d.x,d.y);break;case'lnto':b.lineTo(d.x,d.y);break;case'spln':b.quadraticCurveTo(d.cx,d.cy,d.x,d.y);break;case'bcur':b.bezierCurveTo(d.c1x,d.c1y,d.c2x,d.c2y,d.x,d.y);break;case'arct':b.arcTo(d.cx,d.cy,d.x,d.y,d.r);break;case'arc':b.arc(d.x,d.y,d.r,d.sa,d.ea,!d.cw);break}}b.closePath()}b.clip()};return C});sap.riv.module({qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(F){var l=function(b,r){this._lhm=b;this._reverse=r||false;this._count=b._length;this._cursor=this._reverse?this._lhm._last:this._lhm._head;if(this._reverse){this.hasMore=this._hasMoreInReverse}else{this.hasMore=this._hasMoreInOrder}};l.prototype._hasMoreInOrder=function(){if(this._count!==0){if(this._count===this._lhm._length){this._cursor=this._lhm._head}else{this._cursor=this._cursor.next}this._count--;return true}else{return false}};l.prototype._hasMoreInReverse=function(){if(this._count!==0){if(this._count===this._lhm._length){this._cursor=this._lhm._last}else{this._cursor=this._cursor.prev}this._count--;return true}else{return false}};l.prototype.hasMore=F.noop;l.prototype.next=function(){var r={key:this._cursor.key,value:this._cursor.value};return r};l.prototype.nextValue=function(){return this._cursor.value};l.prototype.nextKey=function(){return this._cursor.key};l.prototype.reset=function(){this._count=this._lhm._length};var L=function(){this._map={};this._head=undefined;this._last=undefined;this._length=0};var a=L.prototype;a.add=function(k,v){var m=this._map;var r=null;var n={prev:null,key:k,value:v,next:null};if(!this._length){this._head=this._last=n}if(!m.hasOwnProperty(k)){m[k]=n;this._length++;n.prev=this._last;this._last.next=n;this._last=n;this._last.next=this._head;this._head.prev=this._last}else{r=m[k].value;m[k].value=v}return r};a.addAll=function(b){var i=b.getIterator();var e;while(i.hasMore()){e=i.next();this.add(e.key,e.value)}};a.insertBefore=function(k,v,b){var m=this._map;if(!m.hasOwnProperty(k)&&m.hasOwnProperty(b)){var n={prev:null,key:k,value:v,next:null};var c=m[b];if(c!==this._head){n.prev=c.prev;c.prev.next=n}else{this._head=n;n.prev=this._last}n.next=c;c.prev=n;m[k]=n;this._length++;return v}};a.insertAfter=function(k,v,b){var m=this._map;if(!m.hasOwnProperty(k)&&m.hasOwnProperty(b)){var n={prev:null,key:k,value:v,next:null};var c=m[b];if(c!==this._last){n.next=c.next;c.next.prev=n}else{this._last=n;this._last.next=this._head}c.next=n;n.prev=c;m[k]=n;this._length++;return v}};a.replace=function(k,w,b){var m=this._map;if(!m.hasOwnProperty(w)&&m.hasOwnProperty(k)){var n={prev:null,key:w,value:b,next:null};var r=m[k];n.prev=r.prev;n.next=r.next;r.prev.next=n;r.next.prev=n;if(this._head===r)this._head=n;if(this._last===r)this._last=n;m[w]=n;delete m[k];return r.value}};a.get=function(k){var m=this._map;if(m.hasOwnProperty(k)){return m[k].value}return null};a.getFirstInsert=function(){return this._head?this._head.value:null};a.getLastInsert=function(){return this._last?this._last.value:null};a.moveToLast=function(k){var m=this._map;if(m.hasOwnProperty(k)&&this._last.key!==k){var n=m[k];n.prev.next=n.next;n.next.prev=n.prev;n.prev=this._last;n.next=this._last.next;this._last.next=n;this._last=n;this._head=n.next;this._head.prev=n}};a.moveToFirst=function(k){var m=this._map;if(m.hasOwnProperty(k)&&this._head.key!==k){var n=m[k];n.prev.next=n.next;n.next.prev=n.prev;n.next=this._head;n.prev=this._head.prev;this._head.prev=n;this._head=n;this._last=n.prev;this._last.next=n}};a.has=function(k){var m=this._map;return m.hasOwnProperty(k)};a.remove=function(k){var m=this._map;var r;if(m.hasOwnProperty(k)){var n=m[k];r=n.value;if(n===this._head){this._head=n.next}else if(n===this._last){this._last=n.prev}else{n.prev.next=n.next;n.next.prev=n.prev}delete m[k];this._length--;if(this._length===0){this._head=this._last=undefined}return r}};a.purgeAll=function(){this._map={};this._head=undefined;this._last=undefined;this._length=0};a.isEmpty=function(){return this._length==0};a.length=function(){return this._length};a.getIterator=function(r){return new l(this,r)};return L});sap.riv.module({qname:'sap.riv.graphics.TouchEvent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.Event',version:'1.0.0'}],function Setup(O,E){var T=function(){this.tA=[],this.tM={}};var t=T.prototype;t._addTouch_=function(c){this.tA.push(c);this.tM[c.identifier()]=c};t.length=function(){return this.tA.length};t.item=function(i){if(i>=0&&(i<this.tA.length)){return this.tA[i]}};t.identifiedTouch=function(i){if(i){return this.tM[i]}};var a=function(i,c,g,p){this._id=i;this._targetLayer=c;this._localXY=c.convertPointFromGlobal(g);this._pageXY=p};a.prototype.identifier=function(){return this._id};a.prototype.targetLayer=function(){return this._targetLayer};a.prototype.localXY=function(){return{x:this._localXY.x,y:this._localXY.y}};a.prototype.pageXY=function(){return{x:this._pageXY.x,y:this._pageXY.y}};var b=O.derive(E,{constructor:function(c,d,e,f,g,h){this._relatedTarget=undefined;this._touches=f;this._targetTouches=h;this._changedTouches=g},touches:function(){return this._touches},targetTouches:function(){return this._targetTouches},changedTouches:function(){return this._changedTouches}});b.createTouch=function(i,c,g,p){return new a(i,c,g,p)};b.createTouchList=function(){return new T};return b});sap.riv.module({qname:'sap.riv.core.Observable',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'}],function Setup(t){var b=function(o){this._events={};var a=this.constructor;while(a){var e=a.prototype.events,l;if(e){l=e.length;while(l--){this.addEvents(e[l])}}a=a.superclazz}if(o){if(o.listeners){this.addListeners(o.listeners);delete o.listeners}}};var c=b.prototype;c.addEvents=function(){var e=this._events,a=arguments,l=arguments.length;while(l--){if(typeof a[l]==='string'){e[a[l]]=e[a[l]]||[]}}};c.getSupportedEvents=function(){var r=[];for(var e in this._events){r.push(e)}return r};c.addListeners=function(o){var a;if(t.isArray(o)){a=o}else{a=[o]}var d=a.length,l,e;var f=this._events;while(d--){l=a[d];e=l.eventName;if(f.hasOwnProperty(e)){var g=f[e];if(!this.isListening(e,l.listener,l.scope)){g[g.length]={fn:l.listener,scp:l.scope,optArgs:l.optionalArgs}}}}return this};c.findListener=function(e,f,s){var a=this._events;if(!a.hasOwnProperty(e)){return-1}var l=a[e],d=l.length,g;while(d--){g=l[d];if(s){if(g.fn==f&&g.scp==s){return d}}else{if(g.fn==f){return d}}}return-1};c.isListening=function(e,f,s){return this.findListener(e,f,s)>-1};c.removeListener=function(e,f,s){var a=this._events;if(a.hasOwnProperty(e)){var l=a[e];var d=l.length,i;while(d--){i=this.findListener(e,f,s);if(i>-1){l.splice(i,1);d=l.length}}}return this};c.removeAllListeners=function(e){var a=this._events;if(a.hasOwnProperty(e)){a[e]=[]}return this};c.hasListener=function(e){return this._events[e]&&this._events[e].length>0};c.purgeListeners=function(){var a=this._events;for(var e in a){a[e]=[]}};c.fireEvent=function(e){var d=Array.prototype.slice.call(arguments,1);var a=this._events;if(a.hasOwnProperty(e)){var f=a[e],l;for(var i=0,g=f.length;i<g;i++){l=f[i];if(l.optArgs){d.push(l.optArgs)}l.fn.apply(l.scp||this||window,d)}}};c.on=c.addListeners;c.un=c.removeListener;return b});sap.riv.module({qname:'sap.riv.graphics.Layer',version:'1.0.0'},[{qname:'sap.riv.core.Observable',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'},{qname:'sap.riv.core.utils.TransformHelper',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.ClipRegion',version:'1.0.0'}],function Setup(O,a,L,T,C,c){var d=0;var n=function(){return d++};var e=a.derive(O,{events:['contentUpdate','focusin','focusout','focus','blur','mouseenter','mouseleave','mousemove','mousedown','mouseup','click','dblclick','touchstart','touchmove','touchend','touchcancel'],constructor:function(o){o=o||{};this._id=n();this._superLayer=undefined;this._currentClipRegion=undefined;this._clipRegions={};this._shape2clip={};this._clip2shapes={};this._content=new L();this._listenOnLayer={};this._subLayers=new L();this._bgColor=o.bgColor||undefined;this._opacity=1.0;this._hidden=false;this._clipToBounds=false;this._shouldRasterized=false;this._rasterized=false;this._bitmapCache=C.createCanvasElement(1,1);this._bounds={x:0,y:0,width:0,height:0};this._position={x:0,y:0};this._anchorPoint={x:0.5,y:0.5};this._transform=[[1,0,0],[0,1,0],[0,0,1]];this._calcMatrix={m:undefined,i:undefined};this._init(o)},_init:function(o){if(o.size&&o.position){this._position.x=o.position.x;this._position.y=o.position.y}if(o.size){this._bounds.width=o.size.w;this._bounds.height=o.size.h;this._updateBitmapCache()}if(o.anchor){this._anchorPoint.x=o.anchor.x;this._anchorPoint.y=o.anchor.y}this._updateCalcMatrix()},_updateCalcMatrix:function(){this._calcMatrix.m=T.makeTranslateTM(-this._anchorPoint.x*this._bounds.width,-this._anchorPoint.y*this._bounds.height,T.makeCustomTM(this._transform,T.makeTranslateTM(this._position.x,this._position.y)));this._calcMatrix.i=T.makeTranslateInvertTM(-this._anchorPoint.x*this._bounds.width,-this._anchorPoint.y*this._bounds.height,T.makeCustomInvertTM(this._transform,T.makeTranslateInvertTM(this._position.x,this._position.y)))},id:function(){return this._id},shouldRasterized:function(s){if(s!==undefined){this._shouldRasterized=s;this._rasterized=false;this._updateBitmapCache();return this}else{return this._shouldRasterized}},hidden:function(h){if(h!==undefined){if(this._hidden!==h){this._hidden=h;this.fireEvent('contentUpdate')}return this}else{return this._hidden}},opacity:function(o){if(o!==undefined){if(o>=0&&o<=1.0&&o!=this._opacity){this._opacity=o;this._rasterized=false;this.fireEvent('contentUpdate')}return this}else{return this._opacity}},backgroundColor:function(b){if(b!==undefined){if(b===false){this._bgColor=undefined}else{if(this._bgColor!==b){this._bgColor=b;this._rasterized=false;this.fireEvent('contentUpdate')}}return this}else{return this._bgColor}},bounds:function(f){if(f){var o=this._bounds,g=f;if(o.x!==g.x||o.y!==g.y||o.width!==g.width||o.height!==g.height){o.x=g.x;o.y=g.y;o.width=g.width;o.height=g.height;this._rasterized=false;this._updateCalcMatrix();this.fireEvent('contentUpdate')}return this}else{var b=this._bounds;return{x:b.x,y:b.y,width:b.width,height:b.height}}},size:function(s){if(s){var o={width:this._bounds.width,height:this._bounds.height};if(o.width!==s.width||o.height!==s.height){this._bounds.width=s.width;this._bounds.height=s.height;this._rasterized=false;this._updateCalcMatrix();this._updateBitmapCache();this.fireEvent('contentUpdate')}return this}else{return{width:this._bounds.width,height:this._bounds.height}}},width:function(w){if(w){var o=this._bounds.width;if(o!==w){this._bounds.width=w;this._rasterized=false;this._updateCalcMatrix();this._updateBitmapCache();this.fireEvent('contentUpdate')}return this}else{return this._bounds.width}},height:function(h){if(h){var o=this._bounds.height;if(o!==h){this._bounds.height=h;this._rasterized=false;this._updateCalcMatrix();this._updateBitmapCache();this.fireEvent('contentUpdate')}return this}else{return this._bounds.height}},position:function(p){if(p){var o=this._position,b=p;if(o.x!==b.x||o.y!==b.y){o.x=b.x;o.y=b.y;this._updateCalcMatrix();this.fireEvent('contentUpdate')}return this}else{return{x:this._position.x,y:this._position.y}}},anchorPoint:function(b){if(b){var o=this._anchorPoint,f=b;if(o.x!==f.x||o.y!==f.y){o.x=f.x;o.y=f.y;this._updateCalcMatrix();this.fireEvent('contentUpdate')}return this}else{var o=this._anchorPoint;return{x:o.x,y:o.y}}},frame:function(r){if(r){this._bounds.width=r.width;this._bounds.height=r.height;this._position.x=r.x+this._bounds.width*this._anchorPoint.x;this._position.y=r.y+this._bounds.height*this._anchorPoint.y;this._rasterized=false;this._updateCalcMatrix();this._updateBitmapCache();this.fireEvent('contentUpdate');return this}else{return T.rectApplyTransform({x:0,y:0,width:this._bounds.width,height:this._bounds.height},this._calcMatrix.m)}},affineTransform:function(b){var t=this._transform;if(b){if(T.isValidAffineTransform(b)||!T.isEqualTransform(t,b)){t[0][0]=b[0][0];t[1][0]=b[1][0];t[0][1]=b[0][1];t[1][1]=b[1][1];t[0][2]=b[0][2];t[1][2]=b[1][2];this._updateCalcMatrix();this.fireEvent('contentUpdate')}return this}else{return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[0,0,1]]}},clipToBounds:function(b){if(b!==undefined){if(this._clipToBounds!=b){this._clipToBounds=b;this.fireEvent('contentUpdate')}else{this._clipToBounds=b}return this}return this._clipToBounds},_setSuperLayer:function(s){this._superLayer=s},_removeSubLayer:function(s){if(s&&this._subLayers.has(s.id())){s.removeAllListeners('contentUpdate');this._subLayers.remove(s.id());this.fireEvent('contentUpdate')}},_updateBitmapCache:function(){if(this._shouldRasterized){this._bitmapCache.width(this._bounds.width);this._bitmapCache.height(this._bounds.height)}},_getBitmapCache_:function(r){if(r){this._updateBitmapCache()}return this._bitmapCache},_rasterized_:function(r){if(r!==undefined){this._rasterized=r}else{return this._rasterized}},hasContent:function(){return!this._content.isEmpty()},addShape:function(s){var b=s.id();this._content.add(b,s);this._rasterized=false;this.fireEvent('contentUpdate');return s},insertShapeAfter:function(i,b){if(i&&this._content.has(b.id())){var s=i.id();this._content.insertAfter(s,i,b.id());this._rasterized=false;this.fireEvent('contentUpdate');return i}},insertShapeBefore:function(i,b){if(i&&this._content.has(b.id())){var s=i.id();this._content.insertBefore(s,i,b.id());this._rasterized=false;this.fireEvent('contentUpdate');return i}},removeShape:function(s){if(s){var b=s.id();var r=this._content.remove(b);if(r){if(this._shape2clip.hasOwnProperty(b)){var f=this._shape2clip[b];delete this._clip2shapes[f][b];delete this._shape2clip[b]}this._rasterized=false;this.fireEvent('contentUpdate')}}},replaceShape:function(s,w){if(w&&this._content.has(s.id())){var b=w.id();this._content.replace(s.id(),b,w);if(this._shape2clip.hasOwnProperty(s.id())){var f=this._shape2clip[s.id()];delete this._clip2shapes[f][s.id()];this._clip2shapes[f][b]=b;delete this._shape2clip[s.id()];this._shape2clip[b]=f}this._rasterized=false;this.fireEvent('contentUpdate');return w}},addClipRegion:function(b){var f=new c(b);var d=f.id();this._clipRegions[d]=f;this._clip2shapes[d]=[];return d},setClipRegion:function(s,b){if(this._clipRegions.hasOwnProperty(b)&&this._content.has(s.id())){if(this._shape2clip.hasOwnProperty(s.id())){var p=this._shape2clip[s.id()];delete this._clip2shapes[p][s.id()]}this._shape2clip[s.id()]=b;this._clip2shapes[b][s.id()]=s.id();this._rasterized=false;this.fireEvent('contentUpdate')}},clearClipRegion:function(s){var b=s.id();if(this._shape2clip.hasOwnProperty(b)){var f=this._shape2clip[b];delete this._shape2clip[b];delete this._clip2shapes[f][b];this._rasterized=false;this.fireEvent('contentUpdate')}},removeClipRegion:function(b){var f=this._clipRegions;if(f.hasOwnProperty(b)){var s=this._shape2clip;var g=this._clip2shapes;var h=false;for(var i=0,j=g[b],l=j.length;i<l;i++){delete s[j[i]];h=true}delete g[b];delete f[b];if(h){this._rasterized=false;this.fireEvent('contentUpdate')}}},clearContent:function(){this._clipRegions={};this._shape2clip={};this._clip2shapes={};this._content.purgeAll();this._rasterized=false;this.fireEvent('contentUpdate')},superLayer:function(){return this._superLayer},subLayersIterator:function(i){return this._subLayers.getIterator(i)},addSubLayer:function(s){if(s){if(!this._subLayers.has(s.id())){this._subLayers.add(s.id(),s);s.on({eventName:'contentUpdate',listener:function(l){this.fireEvent('contentUpdate')},scope:this,optionalArgs:s});s._setSuperLayer(this);this.fireEvent('contentUpdate')}}},removeFromSuperLayer:function(){if(this._superLayer){this._superLayer._removeSubLayer(this);this._superLayer=undefined;this.fireEvent('contentUpdate')}},replaceSubLayer:function(s,w){if(s.id()!==w.id()){this._subLayers.replace(s.id(),w.id(),w);s.removeAllListeners('contentUpdate');w.on({eventName:'contentUpdate',listener:function(l){this.fireEvent('contentUpdate')},scope:this,optionalArgs:s});s._setSuperLayer(undefined);w._setSuperLayer(this);this.fireEvent('contentUpdate')}},setNeedsDisplay:function(){this._rasterized=false;this.fireEvent('contentUpdate')},drawContent:function(b){b.save();b.beginPath();b.rect(0,0,this._bounds.width,this._bounds.height);b.closePath();b.clip();if(this._bgColor!==undefined){b.setFillStyle(this._bgColor);b.fillRect(0,0,this._bounds.width,this._bounds.height)}b.translate(-this._bounds.x,-this._bounds.y);var i=this._content.getIterator(),s,f,p;var g=this._clipRegions,h=this._shape2clip,j;while(i.hasMore()){p=i.next();s=p.value;f=p.key;if(h.hasOwnProperty(f)){if(this._currentClipRegion!==undefined){b.restore()}j=h[f];b.save();this._currentClipRegion=j;g[j].clip(b)}else if(this._currentClipRegion!==undefined){this._currentClipRegion=undefined;b.restore()}b.save();s.drawTo(b);b.restore()}if(this._currentClipRegion!==undefined){this._currentClipRegion=undefined;b.restore()}b.restore();this._needsDisplay=false},shapeContainsPoint:function(s,l){if(s&&this._content.has(s.id())){return this._content.get(s.id()).pointIn(l)}return false},hittedShape:function(l){var i=this._content.getIterator(true);while(i.hasMore()){if(i.next().value.pointIn(l)){return i.next().value}}},containsPoint:function(l){var b=this.bounds();return l.x>=b.x&&l.x<=(b.x+b.width)&&l.y>=b.y&&l.y<=(b.y+b.height)},convertPointFromSuperLayer:function(p){var i=this._calcMatrix.i;return{x:i[0][0]*p.x+i[0][1]*p.y+i[0][2],y:i[1][0]*p.x+i[1][1]*p.y+i[1][2]}},convertPointFromGlobal:function(g){var s=[this];var b=this;var p=g;while(b._superLayer){s.push(b._superLayer);b=b._superLayer}while(s.length){b=s.pop();p=b.convertPointFromSuperLayer(p)}return p},convertPointFromLayer:function(p,s){return this.convertPointFromGlobal(s.convertPointToGlobal(p))},convertPointToSuperLayer:function(p){var t=this._calcMatrix.m;return{x:t[0][0]*p.x+t[0][1]*p.y+t[0][2],y:t[1][0]*p.x+t[1][1]*p.y+t[1][2]}},convertPointToGlobal:function(p){var b=this;var f=p;while(b){f=b.convertPointToSuperLayer(f);b=b._superLayer}return f},convertPointToLayer:function(p,t){return t.convertPointFromGlobal(this.convertPointToGlobal(p))},hitTest:function(l){var p=[{layer:this,pointInLocal:l,subLayerItr:this.subLayersIterator(true)}];var b,f,g,s;while(p.length){b=p[p.length-1];g=b.layer;f=b.pointInLocal;s=b.subLayerItr;if(!g.hidden()){if(s.hasMore()){var h=s.next().value;p.push({layer:h,pointInLocal:h.convertPointFromSuperLayer(f),subLayerItr:h.subLayersIterator(true)});continue}else if(g.containsPoint(f)){return g}p.pop()}else{p.pop()}}},_fireEvent_:function(b){this.fireEvent(b.type(),b);if(this._superLayer&&b.shouldBubble()){b._setCurrentLayer_(this._superLayer);this._superLayer._fireEvent_(b)}},_fireMouseEvent_:function(b){this.fireEvent(b.type(),b);if(this._superLayer&&b.shouldBubble()){b._setCurrentLayer_(this._superLayer);b._setCurrentLocalXY_(this.convertPointToSuperLayer(b.currentLocalXY()));this._superLayer._fireMouseEvent_(b)}},_fireTouchEvent_:function(b){this.fireEvent(b.type(),b);if(this._superLayer&&b.shouldBubble()){b._setCurrentLayer_(this._superLayer);this._superLayer._fireTouchEvent_(b)}}});return e});sap.riv.module({qname:'sap.riv.graphics.Canvas2DSurface',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.graphics.Event',version:'1.0.0'},{qname:'sap.riv.graphics.MouseEvent',version:'1.0.0'},{qname:'sap.riv.graphics.TouchEvent',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(O,L,E,M,T,a,b){var $=jQuery;if(!$){FuncUtils.error('Cannot find jQuery')}var c=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout})();var d=function(i,l){var p=[{processed:false,layer:l,subLayerItr:l.subLayersIterator()}];var t,l;while(p.length){t=p[p.length-1];l=t.layer;if(!l.hidden()){if(!t.processed){if(l.shouldRasterized()){if(!l._rasterized_()){var k=l._getBitmapCache_(true).getContext('2d');l.drawContent(k);l._rasterized_(true)}i.save();var m=l.position();var n=l.anchorPoint();var o=l.affineTransform();var r=l.bounds();i.translate(m.x,m.y);i.transform(o[0][0],o[1][0],o[0][1],o[1][1],o[0][2],o[1][2]);i.translate(-n.x*r.width,-n.y*r.height);i.setAlpha(l.opacity());i.drawImage(l._getBitmapCache_(),0,0)}else{i.save();var m=l.position();var n=l.anchorPoint();var o=l.affineTransform();var r=l.bounds();i.translate(m.x,m.y);i.transform(o[0][0],o[1][0],o[0][1],o[1][1],o[0][2],o[1][2]);i.translate(-n.x*r.width,-n.y*r.height);i.setAlpha(l.opacity());l.drawContent(i)}if(l.clipToBounds()){i.beginPath();i.rect(0,0,l.bounds().width,l.bounds().height);i.closePath();i.clip()}t.processed=true}if(t.subLayerItr.hasMore()){var s=t.subLayerItr.next().value;p.push({processed:false,layer:s,subLayerItr:s.subLayersIterator()})}else{i.restore();p.pop()}}else{p.pop()}}};var e=[];var f=function(){var r,l,i;while(e.length){r=e.shift();i=r.drawingContext;l=r.layer;i.clearRect(0,0,l.bounds().width,l.bounds().height);d(i,l);b.debug("layer["+l.id()+"]rendering end.","perf");r.onComplete()}h=g};var q=function(i){e.push(i)};var g=function(i){e.push(i);c(f,0);h=q};var h=g;var C=function(o){this._mainCanvasEl=o.canvasEl;this._drawingCtx=this._mainCanvasEl.getContext('2d');this._msTracking=[];this._touch2LayerTracking={};this._layer2TouchTracking={};this._rootLayer=new L({id:"RootLayer",bgColor:o.bgColor,size:{w:this._mainCanvasEl.width(),h:this._mainCanvasEl.height()},anchor:{x:0,y:0},position:{x:0,y:0}});var i=false;var k=function(){i=false};var l=function(){if(!i){h({drawingContext:this._drawingCtx,layer:this._rootLayer,onComplete:k});i=true}};this._rootLayer.on({eventName:'contentUpdate',listener:l,scope:this});d(this._drawingCtx,this._rootLayer)};var j=C.prototype;j.dispatchComponentUIEvent=function(s){var r=this._rootLayer;switch(s.type()){case'mousemove':var t=s.targetLocalXY();var p=s.pageXY();var k=r.hitTest(t);if(k){if(this._msTracking.length){if(this._msTracking[this._msTracking.length-1]!==k){var l=[];var m=k;while(m){l.push(m);m=m.superLayer()}var n=0,o=false,u=a.min(this._msTracking.length,l.length);while(true){var v=undefined;if(!o&&this._msTracking[n]===l[l.length-1-n]){n++;o=n===u}else{while(this._msTracking.length>n){v=this._msTracking.pop();var w=new M('mouseleave',v,false,t,p);w._setRelatedLayer_(k);v._fireMouseEvent_(w)}while(n<l.length){var m=l.shift();v=this._msTracking[l.length-1];this._msTracking[l.length]=m;var w=new M('mouseenter',m,false,t,p);w._setRelatedLayer_(v);m._fireMouseEvent_(w)}break}}}}else{var m=k;do{this._msTracking.push(m);m._fireMouseEvent_(new M('mouseenter',m,false,t,p));m=m.superLayer()}while(m);this._msTracking.reverse()}k._fireMouseEvent_(new M('mousemove',k,true,t,p))}else{while(this._msTracking.length){var v=this._msTracking.pop();v._fireMouseEvent_(new M('mouseleave',v,false,t,p))}}break;case'mouseleave':while(this._msTracking.length){var v=this._msTracking.pop();v._fireMouseEvent_(new M('mouseleave',v,false,s.targetLocalXY(),s.pageXY()))}break;case'mouseup':var t=s.targetLocalXY();var k=r.hitTest(t);if(k){k._fireMouseEvent_(new M('mouseup',k,true,t,s.pageXY()))}break;case'mousedown':var t=s.targetLocalXY();var k=r.hitTest(t);if(k){k._fireMouseEvent_(new M('mousedown',k,true,t,s.pageXY()))}break;case'dblclick':var t=s.targetLocalXY();var k=r.hitTest(t);if(k){if(this._focusedLayer){if(this._focusedLayer.id()!==k.id()){this._focusedLayer._fireEvent_(new E('blur',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusout',this._focusedLayer,true));this._focusedLayer=k;this._focusedLayer._fireEvent_(new E('focus',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusin',this._focusedLayer,true))}}else{this._focusedLayer=k;this._focusedLayer._fireEvent_(new E('focus',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusin',this._focusedLayer,true))}this._focusedLayer._fireMouseEvent_(new M('dblclick',this._focusedLayer,true,t,s.pageXY()))}else{if(this._focusedLayer){this._focusedLayer._fireEvent_(new E('blur',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusout',this._focusedLayer,true));this._focusedLayer=undefined}}break;case'click':var t=s.targetLocalXY();var k=r.hitTest(t);if(k){if(this._focusedLayer){if(this._focusedLayer.id()!==k.id()){this._focusedLayer._fireEvent_(new E('blur',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusout',this._focusedLayer,true));this._focusedLayer=k;this._focusedLayer._fireEvent_(new E('focus',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusin',this._focusedLayer,true))}}else{this._focusedLayer=k;this._focusedLayer._fireEvent_(new E('focus',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusin',this._focusedLayer,true))}this._focusedLayer._fireMouseEvent_(new M('click',this._focusedLayer,true,t,s.pageXY()))}else{if(this._focusedLayer){this._focusedLayer._fireEvent_(new E('blur',this._focusedLayer,false));this._focusedLayer._fireEvent_(new E('focusout',this._focusedLayer,true));this._focusedLayer=undefined}}break;case'touchstart':var x=this._touch2LayerTracking,y=this._layer2TouchTracking;var z={};for(var i=0,A,B=s.changedTouches(),D=B.length();i<D;i++){A=B.item(i);var F=A.identifier();var t=A.localXY();var k=r.hitTest(t);if(k){var G=k.id();x[F]=k;if(!y.hasOwnProperty(G)){y[G]={layer:k,touchIds:[F]}}else{y[G].touchIds.push(F)}if(!z.hasOwnProperty(G)){z[G]={layer:k,touches:[A]}}else{z[G].touches.push(A)}}}this._dispatchTouchEventToLayer(z,s);break;case'touchmove':var x=this._touch2LayerTracking;var z={};for(var i=0,A,B=s.changedTouches(),D=B.length();i<D;i++){A=B.item(i);var F=A.identifier();if(x.hasOwnProperty(F)){var k=x[F];var G=k.id();if(!z.hasOwnProperty(G)){z[G]={layer:k,touches:[A]}}else{z[G].touches.push(A)}}}this._dispatchTouchEventToLayer(z,s);break;case'touchend':var x=this._touch2LayerTracking,y=this._layer2TouchTracking;var z={};for(var i=0,A,B=s.changedTouches(),D=B.length();i<D;i++){A=B.item(i);var F=A.identifier();if(x.hasOwnProperty(F)){var k=x[F];var G=k.id();if(!z.hasOwnProperty(G)){z[G]={layer:k,touches:[A]}}else{z[G].touches.push(A)}delete x[F];y[G].touchIds.splice(y[G].touchIds.indexOf(F),1);if(!y[G].touchIds.length){delete y[G]}}}this._dispatchTouchEventToLayer(z,s);break;case'touchcancel':var x=this._touch2LayerTracking,y=this._layer2TouchTracking;var z={};for(var i=0,A,B=s.changedTouches(),D=B.length();i<D;i++){A=B.item(i);var F=A.identifier();if(x.hasOwnProperty(F)){var k=x[F];var G=k.id();if(!z.hasOwnProperty(G)){z[G]={layer:k,touches:[A]}}else{z[G].touches.push(A)}delete x[F];y[G].touchIds.splice(y[G].touchIds.indexOf(F),1);if(!y[G].touchIds.length){delete y[G]}}}this._dispatchTouchEventToLayer(z,s);break}};j._dispatchTouchEventToLayer=function(t,s){var k=this._touch2LayerTracking,l=this._layer2TouchTracking;for(var m in t){var n=T.createTouchList();var o=t[m].layer;for(var i=0,p,r=t[m].touches,u=r.length;i<u;i++){p=r[i];n._addTouch_(T.createTouch(p.identifier(),o,p.localXY(),p.pageXY()))}var v=T.createTouchList();if(l[m]){var w=l[m].touchIds;for(var i=0,p,x=s.touches(),u=w.length;i<u;i++){p=x.identifiedTouch(w[i]);v._addTouch_(T.createTouch(p.identifier(),o,p.localXY(),p.pageXY()))}}var y=T.createTouchList();for(var i=0,p,o,z=s.touches(),u=z.length();i<u;i++){p=z.item(i);var A=p.identifier();if(k[A]){o=k[A];y._addTouch_(T.createTouch(A,o,p.localXY(),p.pageXY()))}}o._fireTouchEvent_(new T(s.type(),o,true,y,n,v))}};j.size=function(s){if(s!==undefined){if(this._mainCanvasEl.width()!=s.width){this._mainCanvasEl.width(s.width);this._rootLayer.width(s.width)}if(this._mainCanvasEl.height()!=s.height){this._mainCanvasEl.height(s.height);this._rootLayer.height(s.height)}return this}else{return{width:this._mainCanvasEl.width(),height:this._mainCanvasEl.height()}}};j.width=function(w){if(w){var o=this._mainCanvasEl.width();if(o!=w){this._mainCanvasEl.width(w);this._rootLayer.width(w)}return this}else{return this._mainCanvasEl.width()}};j.height=function(i){if(i){var o=this._mainCanvasEl.height();if(o!=i){this._mainCanvasEl.height(i);this._rootLayer.height(i)}return this}else{return this._mainCanvasEl.height()}},j.getRootLayer=function(){return this._rootLayer};j.backgroundColor=function(i){if(i){this._rootLayer.backgroundColor(i)}else{return this._rootLayer.backgroundColor()}};return C});sap.riv.module({qname:'sap.riv.core.utils.ColorUtils',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(T,M){var c=function(h,s,l,a){return u.fromHSLA(h/360,s,l,a||1.0)};var e=function(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p};var f=function(h,s,l){var r,g,b;if(s==0){r=g=b=l}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=e(p,q,h+1/3);g=e(p,q,h);b=e(p,q,h-1/3)}return[M.round(r*255),M.round(g*255),M.round(b*255)]};var k=function(r,g,b){r/=255,g/=255,b/=255;var a=M.max(r,g,b),i=M.min(r,g,b);var h=0,s,l=(a+i)/2;if(a==i){h=s=0}else{var d=a-i;s=l>0.5?d/(2-a-i):d/(a+i);switch(a){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return[h,s,l]};var m=function(a){return parseInt(a.substring(0,a.lastIndexOf('%')))/100};var n=function(a){if(a.lastIndexOf('%')>0){return M.ceil(parseInt(a.substring(0,a.lastIndexOf('%')))*255/100)}else{return parseInt(a)}};var o=function(d){return d<16?'0'+d.toString(16):d.toString(16)};var u={};u.fromCSSColor=function(a){if(a.charAt(0)=='#'){return this.fromRGBHexString(a)}else if(a.substr(0,4).toLowerCase()=='rgba'){return this.fromRGBA(a)}else if(a.substr(0,3).toLowerCase()=='rgb'){return this.fromRGB(a)}else if(a.substr(0,4).toLowerCase()=='hsla'){return this.fromHSLA(a)}else if(a.substr(0,3).toLowerCase()=='hsl'){return this.fromHSL(a)}};u.fromRGB=function(r){var a=0,g=0,b=0;if(arguments.length==1){var d=r.substring(4,r.lastIndexOf(')')).split(',');a=n(d[0]);g=n(d[1]);b=n(d[2])}else if(arguments.length==3){a=arguments[0];g=arguments[1];b=arguments[2]}return new v(a,g,b,1.0)};u.fromRGBA=function(r){var a=0,g=0,b=0,d=0;if(arguments.length==1){var h=r.substring(5,r.lastIndexOf(')')).split(',');a=n(h[0]);g=n(h[1]);b=n(h[2]);d=parseFloat(h[3])}else if(arguments.length==4){a=M.ceil(arguments[0]);g=M.ceil(arguments[1]);b=M.ceil(arguments[2]);d=M.ceil(arguments[3])}return new v(a,g,b,d)};u.fromRGBHexString=function(h){var r=0,g=0,b=0,a=1.0;r=parseInt(h.substr(1,2),16);g=parseInt(h.substr(3,2),16);b=parseInt(h.substr(5,2),16);return new v(r,g,b,a)};u.fromHSL=function(h){if(arguments.length==1){var a=h.substring(4,h.lastIndexOf(')')).split(',');var r=f((parseInt(a[0])%360+360)%360/360,m(a[1]),m(a[2]));return new v(r[0],r[1],r[2],1.0)}else if(arguments.length==3){r=f(arguments[0],arguments[1],arguments[2]);return new v(r[0],r[1],r[2],1.0)}};u.fromHSLA=function(h){if(arguments.length==1){var a=h.substring(5,h.lastIndexOf(')')).split(',');var r=f((parseInt(a[0])%360+360)%360/360,m(a[1]),m(a[2]));return new v(r[0],r[1],r[2],parseFloat(a[3]))}else if(arguments.length==4){r=f(arguments[0],arguments[1],arguments[2]);return new v(r[0],r[1],r[2],arguments[3])}};u.getColorSeries=function(b,t){var a=[b.hue(),b.saturation(),b.lightness(),b.alpha()];var C=new Array();C[0]=c(360-((360-a[0])+15)%360,a[1],a[2]);C[1]=c(a[0],a[1],a[2]);C[2]=c((a[0]+15)%360,a[1],a[2]);var d=new Array();d[0]=new Array();d[1]=new Array();d[2]=new Array();for(var i=0;i<3;i++){for(var j=0;j<10;j++){d[i].unshift(c(C[i].hue(),C[i].saturation(),j/10).toColorString(t))}for(var j=1;j<=4;j++){var g=(360-((360-C[i].hue())+(20*j))%360);d[i].unshift(c(g,C[i].saturation(),0.9).toColorString(t))}}return d};u.changeOpacity=function(a,b){var d=u.fromCSSColor(a);d.alpha(b);return d.toColorString('rgba')};u.getColorSeriesFromCSS=function(a){var b=u.fromCSSColor(a);var d=this.getColorSeries(b,"rgba");return d};u.getColorSeriesForBar=function(a,t){t=t||"rgba";var b=u.fromCSSColor(a);var d=[];if(b.lightness()<=0.75){d[0]=c(b.hue(),b.saturation(),(b.lightness()+0.25),b.alpha()).toColorString(t);d[1]=c(b.hue(),b.saturation(),(b.lightness()+0.15),b.alpha()).toColorString(t);d[2]=b.toColorString(t);d[3]=c(b.hue(),b.saturation(),(b.lightness()-0.1)>0?(b.lightness()-0.1):0,b.alpha()).toColorString(t)}else{d[0]=c(b.hue(),b.saturation(),(b.lightness()+0.1)>1?1.0:(b.lightness()+0.1),b.alpha()).toColorString(t);d[1]=b.toColorString(t);d[2]=c(b.hue(),b.saturation(),(b.lightness()-0.15),b.alpha()).toColorString(t);d[3]=c(b.hue(),b.saturation(),(b.lightness()-0.25),b.alpha()).toColorString(t)}return d};var v=function(r,g,b,a){this._r=r;this._g=g;this._b=b;this._hsl=k(r,g,b);this._a=a};v.prototype.hue=function(){return this._hsl[0]*360};v.prototype.saturation=function(){return this._hsl[1]};v.prototype.lightness=function(){return this._hsl[2]};v.prototype.red=function(r){if(T.isNumber(r)){if(0<=r&&r<=255){this._red=r;this._hsl=k(this._r,this._g,this._b)}return this}return this._r};v.prototype.green=function(g){if(T.isNumber(g)){if(0<=g&&g<=255){this._g=g;this._hsl=k(this._r,this._g,this._b)}return this}return this._g};v.prototype.blue=function(b){if(T.isNumber(b)){if(0<=b&&b<=255){this._b=b;this._hsl=k(this._r,this._g,this._b)}return this}return this._b};v.prototype.alpha=function(a){if(T.isNumber(a)){if(0<=a&&a<=1){this._a=a}return this}return this._a};v.prototype.toColorString=function(t){switch(t){case'rgb':return'rgb('+this._r+','+this._g+','+this._b+')';case'rgba':return'rgba('+this._r+','+this._g+','+this._b+','+(this._a||1.0)+')';case'hsl':var h=k(this._r,this._g,this._b);return'hsl('+h[0]*360+','+h[1]*100+'%,'+h[2]*100+'%)';case'hsla':var h=k(this._r,this._g,this._b);return'hsla('+h[0]*360+','+h[1]*100*100+'%,'+h[2]*100*100+'%,'+(this._a||1.0)+')';default:return'#'+o(this._r)+o(this._g)+o(this._b)}};return u});sap.riv.module({qname:'sap.riv.graphics.shape.FillableShape',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.shape.ClosedShape',version:'1.0.0'}],function Setup(O,C,a){var F=O.derive(a,{constructor:function(){this._fill=undefined},fillingColor:function(c){if(c!==undefined){if(c!==false){this._fill=C.createColorStyle(c)}else{this._fill=undefined}return this}if(this._fill){return this._fill}},fillShape:function(d){if(this._fill){d.save();d.setFillStyle(this._fill);d.fill();d.restore()}}});return F});sap.riv.module({qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Observable',version:'1.0.0'}],function Setup(O,a){var T=new(O.derive(a,{events:['defaultThemeChanged','themeSettingChanged'],constructor:function(o){this._themeReg={}},defaultTheme:function(t){if(t!==undefined){if(this._defaultTheme!==t&&this.hasThemeInstalled(t)){var o=this._defaultTheme;this._defaultTheme=t;this.fireEvent('defaultThemeChanged',o,t)}return this}return this._defaultTheme},hasThemeInstalled:function(t){return this._themeReg.hasOwnProperty(t)},installTheme:function(n,s){if(!this._themeReg.hasOwnProperty(n)){this._themeReg[n]=O.extend({},s)}},getThemeSettings:function(t){if(this._themeReg.hasOwnProperty(t)){return O.extend({},this._themeReg[t])}},updateThemeSetting:function(t,k,v){if(this._themeReg.hasOwnProperty(t)){var o=this._themeReg[t][k];this._themeReg[t][k]=v;this.fireEvent('themeSettingChanged',t,k,o,v)}}}))();return T});sap.riv.module({qname:'sap.riv.graphics.shape.Sector',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.shape.FillableShape',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,F,M){var p=function(r,s,e){var a={x:r*M.cos(s),y:r*M.sin(s),z:0},b={x:r*M.cos(e),y:r*M.sin(e),z:0};return{sr:r*r,sv:a,ev:b,z_of_sv_cross_ev:a.x*b.y-a.y*b.x}};var S=O.derive(F,{constructor:function(){this._center={x:0,y:0};this._radius=0;this._startAngle=0;this._endAngle=0;this._clockwise=false},center:function(c){if(c!==undefined){this._center.x=c.x;this._center.y=c.y;return this}if(this._center){return{x:this._center.x,y:this._center.y}}},radius:function(r){if(r!==undefined){if(r>0){this._radius=r;this._preCalcs=p(this._radius,this._startAngle,this._endAngle)}return this}return this._radius},startAngle:function(s){if(s!==undefined){this._startAngle=s;this._preCalcs=p(this._radius,this._startAngle,this._endAngle);return this}return this._startAngle},endAngle:function(e){if(e!==undefined){this._endAngle=e;this._preCalcs=p(this._radius,this._startAngle,this._endAngle);return this}return this._endAngle},clockwise:function(c){if(c!==undefined){this._clockwise=c;return this}return this._clockwise},doDraw:function(d){var C=d;var c=this._center;C.beginPath();C.moveTo(c.x,c.y);C.arc(c.x,c.y,this._radius,this._startAngle,this._endAngle,!this._clockwise);C.closePath();this.fillShape(C);this.drawBorder(C)},doPointInTest:function(a){var s=this._preCalcs.sv,e=this._preCalcs.ev,b=this._preCalcs.sr,z=this._preCalcs.z_of_sv_cross_ev;var t={x:a.x-this._center.x,y:a.y-this._center.y,z:0};var c=s.x*t.y-s.y*t.x,d=t.x*e.y-t.y*e.x;return(t.x*t.x+t.y*t.y)<=b&&(this._clockwise?(z>0?(c>0&&d>0):!(c<0&&d<0)):(z<0?(c<0&&d<0):!(c>0&&d>0)))}});return S});sap.riv.module({qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'}],function Setup(T){var s=function(o){this._xAxis=null;this._yAxis=null;this._data=[];this._seriesColor='#000000';this._barMarkerSize=s.DEFAULTBARMARKERSIZE;this._lineMarkerSize=s.DEFAULTLINEMARKERSIZE;this._lineSize=s.DEFAULTLINESIZE;this._name=null;this._markerSymbol=s.CIRCLEMARKER;this._visible=true;this._parseOptions(o)};s.DEFAULTBARMARKERSIZE=undefined;s.DEFAULTLINEMARKERSIZE=10;s.DEFAULTLINESIZE=1;s.CIRCLEMARKER='circle';s.TRIANGLEMARKER='triangle';s.DIAMONDMARKER='diamond';s.PENTAGONMARKER='pentagon';s.prototype._parseOptions=function(o){if(T.isExist(o.fillColor)){this._seriesColor=o.fillColor}if(T.isExist(o.barMarkerSize)&&o.barMarkerSize>0){this._barMarkerSize=o.barMarkerSize}if(T.isExist(o.lineMarkerSize)&&o.lineMarkerSize>0){this._lineMarkerSize=o.lineMarkerSize}if(T.isExist(o.lineThickness)){this._lineSize=o.lineThickness}if(T.isExist(o.lineColor)){this._lineColor=o.lineColor}if(T.isExist(o.markerSymbol)){var m=o.markerSymbol;if(m===s.CIRCLEMARKER||m===s.TRIANGLEMARKER||m===s.DIAMONDMARKER||m===s.PENTAGONMARKER){this._markerSymbol=m}}if(T.isExist(o.visible)){this._visible=o.visible}};s.prototype.isVisible=function(){return this._visible};s.prototype.setVisible=function(v){this._visible=v};s.prototype.setData=function(d){this._data=d};s.prototype.getData=function(){return this._data};s.prototype.setXAxis=function(x){this._xAxis=x};s.prototype.setYAxis=function(y){this._yAxis=y};s.prototype.getXAxis=function(){return this._xAxis};s.prototype.getYAxis=function(){return this._yAxis};s.prototype.updateProperties=function(p){if(T.isExist(p)){this._parseOptions(p);return this}};s.prototype.setName=function(n){this._name=n};s.prototype.getName=function(){return this._name};s.prototype.getDataRange=function(){var r={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY};for(var i=0,l=this._data.length;i<l;i++){if(this._data[i].value<r.min){r.min=this._data[i].value}if(this._data[i].value>r.max){r.max=this._data[i].value}}return r};return s});sap.riv.module({qname:'sap.riv.viz.shared.multilayout.ColumnMultiLayout',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(T,M){var b=function(s,i){this._size={width:s.width,height:s.height};this._layoutChanged=false;this._itemLength=0;this._columnLength=2;this._layoutInfo=null;this._parseOptions(i)};b.prototype._parseOptions=function(o){if(T.isExist(o.itemLength)){this._itemLength=o.itemLength}if(T.isExist(o.columnLength)){this._columnLength=o.columnLength>0?o.columnLength:2}this._layoutChanged=true};b.prototype.layoutChanged=function(){return this._layoutChanged};b.prototype.updateSize=function(n){if(this._size.width!=n.width||this._size.height!=n.height){this._size.width=n.width;this._size.height=n.height;this._layoutChanged=true}};b.prototype.updateSettings=function(p){this._parseOptions(p)};b.prototype.getLayoutInfo=function(){if(this._layoutInfo!=null&&!this._layoutChanged){return this._layoutInfo}else{this._layoutInfo=[];var l=this._layoutInfo;if(this._itemLength>0){var n=this._columnLength;var a=M.ceil(this._itemLength/n);var c=M.floor(this._size.width/n);var d=M.floor(this._size.height/a);for(var i=0;i<a;i++){for(var j=0;j<n;j++){l.push({x:j*c,y:i*d,width:c,height:d})}}}this._layoutChanged=false;return this._layoutInfo}};return b});sap.riv.module({qname:'sap.riv.graphics.shape.Circle',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.shape.FillableShape',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,F,M){var C=O.derive(F,{constructor:function(){this._center={x:0,y:0};this._radius=0},center:function(c){if(c!==undefined){this._center.x=c.x;this._center.y=c.y;return this}if(this._center){return{x:this._center.x,y:this._center.y}}},radius:function(r){if(r!==undefined){if(r>0){this._radius=r}return this}return this._radius},doDraw:function(d){var a=d;var c=this._center;a.beginPath();a.arc(c.x,c.y,this._radius,0,2*M.PI,false);a.closePath();this.fillShape(a);this.drawBorder(a)},doPointInTest:function(p){var c=this._center;var x=p.x-c.x;var y=p.y-c.y;return(x*x+y*y)<=this._radius*this._radius}});return C});sap.riv.module({qname:'sap.riv.core.Animator',version:'1.0.0'},[{qname:'sap.riv.core.utils.ColorUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'},{qname:'sap.riv.core.utils.TransformHelper',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(C,F,T,L,a,M){var b=0;var c=function(){return'anim-'+b++};var d=function CubicBezierAtTime(t,p,k,l,m,o){var q=0,r=0,s=0,u=0,v=0,w=0;var y=function(t){return((q*t+r)*t+s)*t};var z=function(t){return((u*t+v)*t+w)*t};var B=function(t){return(3.0*q*t+2.0*r)*t+s};var D=function(o){return 1.0/(200.0*o)};var E=function(x,i){return z(G(x,i))};var G=function(x,H){var K,N,O,Q,S,i;function U(n){if(n>=0){return n}else{return 0-n}};for(O=x,i=0;i<8;i++){Q=y(O)-x;if(U(Q)<H){return O}S=B(O);if(U(S)<1e-6){break}O=O-Q/S}K=0.0;N=1.0;O=x;if(O<K){return K}if(O>N){return N}while(K<N){Q=y(O);if(U(Q-x)<H){return O}if(x>Q){K=O}else{N=O}O=(N-K)*0.5+K}return O};s=3.0*p;r=3.0*(l-p)-s;q=1.0-s-r;w=3.0*k;v=3.0*(m-k)-w;u=1.0-w-v;return E(t,D(o))};var e=(function(){var m=function(k,l,n,o){return function(x){return d(x,k,l,n,o,100)}};var i={Linear:function(x){return x},EaseIn:function(x){return d(x,0.42,0.0,1.0,1.0,100)},EaseOut:function(x){return d(x,0.0,0.0,0.58,1.0,100)},EaseInEaseOut:function(x){return d(x,0.42,0.0,0.58,1.0,100)}};return{getTimingFunction:function(t){if(i.hasOwnProperty(t)){return i[t]}else if(T.isArray(t)&&t.length==2){return m(t[0].x,t[0].y,t[1].x,t[1].y)}}}})();var f=function(s,i,k){this._source=s;this._dest=i;this._range=this._dest-this._source;this._easingFunc=k};f.prototype.interpolateAt=function(p){return this._source+this._easingFunc(p)*this._range};var g=function(s,i,_){this._source=C.fromCSSColor(s);this._dest=C.fromCSSColor(i);this._redRange=this._dest.red()-this._source.red();this._greenRange=this._dest.green()-this._source.green();this._blueRange=this._dest.blue()-this._source.blue();this._alphaRange=this._dest.alpha()-this._source.alpha();this._easingFunc=_};g.prototype.interpolateAt=function(p){var i=this._easingFunc(p);var s=this._source.red(),k=this._source.green(),l=this._source.blue(),m=this._source.alpha();return C.fromRGBA(s+this._redRange*i,k+this._greenRange*i,l+this._blueRange*i,m+this._alphaRange*i)};var P=function(s,i,k){this._source=s;this._dest=i;this._range=[i[0]-s[0],i[1]-s[1]];this._easingFunc=k};P.prototype.interpolateAt=function(p){var i=this._easingFunc(p);return[this._source[0]+this._range[0]*i,this._source[1]+this._range[1]*i]};var R=function(s,i,k){this._source=s;this._dest=i;this._range={x:i.x-s.x,y:i.y-s.y,w:i.w-s.w,h:i.h-s.h};this._easingFunc=k};R.prototype.interpolateAt=function(p){var i=this._easingFunc(p);return{x:this._source.x+this._range.x*i,y:this._source.x+this._range.y*i,w:this._source.x+this._range.w*i,h:this._source.x+this._range.h*i}};var h=function(s,i,k){this._source=a.unmatrix(s);this._dest=a.unmatrix(i);this._range={tx:this._dest.tx-this._source.tx,ty:this._dest.ty-this._source.ty,sx:this._dest.sx-this._dest.sx,sy:this._dest.sy-this._dest.sy,skew:this._dest.skew-this._source.skew,rotate:this._dest.rotate-this._source.rotate};this._easingFunc=k};h.prototype.interpolateAt=function(p){var t=a;var i=this._easingFunc(p);var k=this._source.tx+this._range.tx*i;var l=this._source.ty+this._range.ty*i;var s=this._source.sx+this._range.sx*i;var m=this._source.sy+this._range.sy*i;var n=this._source.skew+this._source.skew*i;var r=this._source.rotate+this._source.rotate*i;return t.makeScaleTM(s,m,t.makeSkewTM(n,n,t.makeRotateTM(r,t.makeTranslateTM(k,l))))};var I={getInterpolator:function(t,s,i,k){switch(t){case'POINT':return new P(s,i,k);case'RECT':return new R(s,i,k);case'FLOAT':return new f(s,i,k);case'COLOR':return new g(s,i,k);case'TRANSFORM':throw new h(s,i,k);default:throw new Error('Unknown type for interpolation')}}};var J={submitted:0,running:1,stopped:2,paused:3,cancelled:4,aborted:5};var A=function(v,s,i,o,k){this._id=c();this._state=J.submitted;this._values=v;this._startWhen=s;this._pauseWhen=0;this._resumeWhen=0;this._endWhen=i;this._duration=i-s;this._onStep=o;this._onComplete=k};var j=(function(){var _=new L();var k=50;var l=20;var m=false;var n=function(r,s){var t=s/r._duration;var u=[];for(var i=0,v,w=r._values,x=w.length;i<x;i++){v=w[i];u.push(v.interpolator.interpolateAt(t))}r._onStep(u)};var o=function(i,r,s){switch(i._state){case J.submitted:switch(r){case J.running:if(s>=i._startWhen){i._state=J.running;var t=M.min(s-i._startWhen-i._resumeWhen+i._pauseWhen,i._duration);n(i,t)}break;case J.stopped:i._state=J.stopped;n(i,i._duration);i._onComplete();break;case J.aborted:i._state=J.aborted;break;case J.cancelled:i._state=J.cancelled;break}break;case J.running:switch(r){case J.running:if(s<i._endWhen+i._resumeWhen-i._pauseWhen){var t=s-i._startWhen-i._resumeWhen+i._pauseWhen;n(i,t)}else{i._state=J.stopped;n(i,i._duration);i._onComplete()}break;case J.paused:i._state=J.Paused;i._pauseWhen=s;break;case J.stopped:i._state=J.stopped;n(i,i._duration);i._onComplete();break;case J.aborted:i._state=J.aborted;break;case J.cancelled:i._state=J.cancelled;n(i,0);break}break;case J.paused:switch(r){case J.running:i._resumeWhen=s;i._state=J.running;break;case J.stopped:i._state=J.stopped;n(i,i._duration);i._onComplete();break;case J.aborted:i._state=J.aborted;break;case J.cancelled:i._state=J.cancelled;n(i,0);break}break;break}};var p=function(){var r=(new Date()).getTime();var s=_.getIterator();var t;var u=[];while(s.hasMore()){t=s.nextValue();if(t._state===J.submitted||t._state===J.running){o(t,J.running,r)}if(t._state===J.aborted||t._state===J.cancelled||t._state===J.stopped){u.push(t._id)}}for(var i=0,v=u.length;i<v;i++){_.remove(u[i])}if(!_.isEmpty()){q()}else{m=false}};var q=function(){m=setTimeout(p,l)};return{fps:function(i){if(i!==undefined){if(i!==k&&i>0&&i<=100){k=i;l=M.ceil(1000/i)}return this}return k},animate:function(r){var s=r.duration;var t,u;var w=[];var x=e.getTimingFunction(r.easing||'Linear');for(var i=0,v,y=r.values.length;i<y;i++){v=r.values[i];w.push({type:v.type,from:v.from,to:v.to,interpolator:I.getInterpolator(v.type,v.from,v.to,x)})}if(T.isNumber(s)&&s>0){t=(new Date()).getTime();u=t+s}else{t=s.startWhen;if(s.hasOwnProperty('duration')){u=t+s.duration}else{u=s.endWhen}}var z=new A(w,t,u,r.onStep||F.noop,r.onComplete||F.noop);_.add(z._id,z);if(!m){q()}return z._id},abortAnimation:function(i){if(_.has(i)){o(_.get(i),J.aborted,(new Date()).getTime())}},pauseAnimation:function(i){if(_.has(i)){o(_.get(i),J.paused,(new Date()).getTime())}},resumeAnimation:function(i){if(_.has(i)){o(_.get(i),J.running,(new Date()).getTime())}},cancelAnimation:function(i){if(_.has(i)){o(_.get(i),J.cancelled,(new Date()).getTime())}},abortAll:function(){var i,r=_.getIterator();while(r.hasMore()){i=r.nextValue();o(i,J.aborted,(new Date()).getTime())}},pauseAll:function(){var i,r=_.getIterator();while(r.hasMore()){i=r.nextValue();o(i,J.paused,(new Date()).getTime())}},resumeAll:function(){var i,r=_.getIterator();while(r.hasMore()){i=r.nextValue();o(i,J.running,(new Date()).getTime())}},cancelAll:function(){var i,r=_.getIterator();while(r.hasMore()){i=r.nextValue();o(i,J.cancelled,(new Date()).getTime())}}}})();return j});sap.riv.module({qname:'sap.riv.viz.shared.series.SeriesGroup',version:'1.0.0'},function Setup(){var s=function(){this._seriesList=[]};s.prototype={addSeries:function(a){this._seriesList.push(a)},getSeriesList:function(){return this._seriesList},updateProperties:function(p){var a=this._seriesList;for(var i=0,l=a.length;i<l;i++){a[i].updateProperties(p[i])}}};return s});sap.riv.module({qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(O,T,L){var p=function(d){this._descriptor=d;this._local={}};var a=p.prototype;a.validate=function(b){var r={};var p=O.extend(true,{},b);for(var i in this._descriptor){if(this._descriptor.hasOwnProperty(i)){r[i]=this.validateObject(p[i],this._descriptor[i])}}return r};a.validateObject=function(p,b){var r;if(b.supportedValueType==='Object'){r={};if(!T.isExist(p)){p={}}else if(typeof(p)!='object'){}var s=b.supportedValues;for(var i=s.length;i--;){var c=s[i].name;r[c]=this.validateObject(p[c],s[i])}}else if(b.supportedValueType==='ObjectArray'){r=[];if(!T.isExist(p)){p=[]}else if(!T.isArray(p)){}var s=b.supportedValues;for(var i=p.length;i--;){r[i]={};r[i]=this.validateObject(p[i],s[0])}}else{r=this.validateItem(p,b)}return r};a.validateItem=function(p,b){var t;if(b.supportedValueType.indexOf('[')!=-1){var l=b.supportedValueType.substring(b.supportedValueType.indexOf('[')+1,b.supportedValueType.indexOf(']'));if(b.supportedValueType.indexOf('IntArray')!=-1){t='IntArray'}else if(b.supportedValueType.indexOf('ColorArray')!=-1){t='ColorArray'}}else{t=b.supportedValueType}if(!T.isExist(p)){p=b.defaultValue}return p};a.validateInt=(function(){var r=new RegExp(/^-?\d+$/);return function(p,b){if(!T.isExist(p))return true;return(!T.isString(p)&&T.isNumber(p)&&r.test(p))|p===Number.POSITIVE_INFINITY|p===Number.NEGATIVE_INFINITY}})();a.validatePositiveInt=(function(){var r=new RegExp(/^(0|[1-9][0-9]*)$/);return function(p,b){if(!T.isExist(p))return true;return(!T.isString(p)&&T.isNumber(p)&&r.test(p))|p===Number.POSITIVE_INFINITY}})();a.validateNegativeInt=(function(){var r=new RegExp(/^\-[1-9][0-9]*$/);return function(p,b){if(!T.isExist(p))return true;return(!T.isString(p)&&T.isNumber(p)&&r.test(p))|p===Number.NEGATIVE_INFINITY}})();a.validateNumber=function(p,b){return!T.isString(p)&&T.isNumber(p)};a.validateBoolean=function(p,b){if(!T.isExist(p))return true;return p===true|p===false};a.validateString=function(p,b){if(!T.isExist(p))return true;return T.isString(p)};a.validateColor=(function(){var h=new RegExp(/(^#[0-9a-fA-F]{6}$)|(^#[0-9a-fA-F]{3}$)/);var r=new RegExp("^[rR][gG][Bb][\\s]*[\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){2}[\\s]*(2[0-4]\\d|25[0-5]|[01]?\\d\\d?)[\\s]*[\)]{1}$");var b=new RegExp("^[rR][gG][Bb][Aa][\\s]*[\(]([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|0.[0-9]*)[\\s]*[\)]{1}$");return function(p,c){if(!T.isExist(p))return true;return h.test(p)|r.test(p)|b.test(p)}})();a.validateFont=(function(){var f=new RegExp('^bold$|^normal$|^bolder$|^lighter$|^100$|^200$|^300$|^400$|^500$|^600$|^700$|^800$|^900$');var b=new RegExp('^\\d{1,9}\\d(px|pt|em)?$');return function(p,c){if(!T.isExist(p))return true;p=p.replace(/^\s\s*/,'').replace(/\s\s*$/,'');var d=p.split(' ');if(d.length<2){return false}else if(d.length>=2){if(b.test(d[0])){var e;for(var i=1,l=d.length;i<l;i++){e+=d[i]}return this.validateString(e)}else{var e;for(var i=2,l=d.length;i<l;i++){e+=d[i]}return f.test(d[0])&&b.test(d[1])&&this.validateString(e)}}}})();a.validateList=function(p,b){if(!T.isExist(p))return true;var s=b.supportedValues;for(var i=s.length;i--;){if(s[i]===p)return true}return false};a.validateStringArray=function(p,b){if(!T.isExist(p))return true;for(var i=p.length;i--;){if(!this.validateString(p[i],null))return false}return true};a.validateObjectArray=function(p,b){if(!T.isExist(p))return true;for(var i=p.length;i--;){if(!this.validateObject(p[i],b))return false}return true};a.validateIntArray=function(p,b){if(!T.isExist(p))return true;for(var i=p.length;i--;){if(!this.validateInt(p[i],null))return false}return true};a.validateColorArray=function(p,b){if(!T.isExist(p))return true;for(var i=p.length;i--;){if(!this.validateColor(p[i],null))return false}return true};a.validateFunction=function(p,b){if(!T.isExist(p))return true;return T.isFunction(p)};a.properties=function(b){if(b){b=O.extend(true,this._local,b);this._local=this.validate(b)}return O.extend(true,{},this._local)};return p});sap.riv.module({qname:'sap.riv.graphics.shape.Line',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.Drawable',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,C,D,M){var L=O.derive(D,{constructor:function(m){this._start={x:0,y:0};this._end={x:0,y:0};this._width=1.0;this._capStyle='butt';this._color='#000000'},_calcForHitTest:function(s,e,w){this._preCalc={A:(e.y-s.y),B:(s.x-e.x),C:s.y*e.x-s.x*e.y,D:M.sqrt((e.y-s.y)*(e.y-s.y)+(s.x-e.x)*(s.x-e.x)),delta:w>2.0?w/2.0:1.0}},from:function(s){if(s!==undefined){this._start.x=s.x;this._start.y=s.y;this._calcForHitTest(s,this._end,this._width);return this}return{x:this._start.x,y:this._start.y}},to:function(e){if(e!==undefined){this._end.x=e.x;this._end.y=e.y;this._calcForHitTest(this._start,e,this._width);return this}return{x:this._end.x,y:this._end.y}},color:function(l){if(l!=undefined){this._color=C.createColorStyle(l);return this}return this._color},width:function(l){if(l!=undefined){if(l>=1.0){this._width=l;this._calcForHitTest(this._start,this._end,l)}return this}return this._width},cap:function(c){if(c!=undefined){this._capStyle=c;return this}return this._capStyle},doDraw:function(d){var x=(this._start.x===this._end.x);var y=(this._start.y===this._end.y);if(x||y){if(x){this._start.x=this._end.x=M.floor(this._start.x);if(this._width%2===1){this._start.x=this._end.x=this._start.x+0.5}this._start.y=M.round(this._start.y);this._end.y=M.round(this._end.y)}if(y){this._start.y=this._end.y=M.floor(this._start.y);if(this._width%2===1){this._start.y=this._end.y=this._start.y+0.5}this._start.x=M.round(this._start.x);this._end.x=M.round(this._end.x)}}var c=d;c.setLineWidth(this._width);c.setLineCap(this._capStyle);c.setStrokeStyle(this._color);c.beginPath();c.moveTo(this._start.x,this._start.y);c.lineTo(this._end.x,this._end.y);c.stroke()},doPointInTest:function(p){var a=this._preCalc;var x=p.x;var y=p.y;var s=this._start;var e=this._end;if(s.x==e.x){return(M.abs(x-s.x)<a.delta)&&((s.y<y&&y<e.y)||(s.y>y&&y>e.y))}return((s.x<x&&x<e.x)||(s.x>x&&x>e.x))&&M.abs((a.A*x+a.B*y+a.C)/a.D)<a.delta}});return L});sap.riv.module({qname:'sap.riv.viz.shared.axis.PositionCalculator',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(T,M){var p=function(){};p.calculateStandardPosition=function(c,m,a,d,s,b){var e=0;if(s=='linear'){var f=p.generateLinearMultiplier(m,a,d);e=p.calculateLinearPosition(c,f,m)}else{var f=p.generateLogarithmicMultiplier(m,a,d);if(b)c*=100;if(c<=0)c=1;e=p.calculateLogarithmicPosition(c,f,m)}return p.validatePosition(e,d,true)};p.generateLinearMultiplier=function(m,a,d){return d/(a-m)};p.calculateLinearPosition=function(v,m,a){return m*(v-a)};p.calculateLinearValue=function(a,m,b){return(a/m)+b};p.generateLogarithmicMultiplier=function(m,a,d){if(m<=0){m=1;if(a<=m)a=2}var b=M.log(m);var c=M.log(a);return d/(c-b)};p.calculateLogarithmicPosition=function(v,m,a){if(v==0||a==0)return 0;return m*(M.log(v)-M.log(a))};p.validatePosition=function(a,d,i){if(a<0)a=0;else if(a>d)a=d;if(T.isNaN(a)){if(i)a=0;else a=d}return a};return p});sap.riv.module({qname:'sap.riv.graphics.shape.DrawableRect',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.shape.ClosedShape',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(F,O,C,M){var D=O.derive(C,{constructor:function(){this._anchor='tl';this._width=0;this._height=0;this._cornerRadius=0;this._vtx=[[0,0],[0,0],[0,0],[0,0]]},_calcVertices:function(a,b){var p=b;var v=this._vtx;var w=this._width;var h=this._height;switch(a){case'tl':v[0][0]=p[0];v[0][1]=p[1];v[1][0]=p[0]+w;v[1][1]=p[1];v[2][0]=p[0]+w;v[2][1]=p[1]+h;v[3][0]=p[0];v[3][1]=p[1]+h;break;case'tc':v[0][0]=p[0]-w/2;v[0][1]=p[1];v[1][0]=p[0]+w/2;v[1][1]=p[1];v[2][0]=p[0]+w/2;v[2][1]=p[1]+h;v[3][0]=p[0]-w/2;v[3][1]=p[1]+h;break;case'tr':v[0][0]=p[0]-w;v[0][1]=p[1];v[1][0]=p[0];v[1][1]=p[1];v[2][0]=p[0];v[2][1]=p[1]+h;v[3][0]=p[0]-w;v[3][1]=p[1]+h;break;case'rc':v[0][0]=p[0]-w;v[0][1]=p[1]-h/2;v[1][0]=p[0];v[1][1]=p[1]-h/2;v[2][0]=p[0];v[2][1]=p[1]+h/2;v[3][0]=p[0]-w;v[3][1]=p[1]+h/2;break;case'br':v[0][0]=p[0]-w;v[0][1]=p[1]-h;v[1][0]=p[0];v[1][1]=p[1]-h;v[2][0]=p[0];v[2][1]=p[1];v[3][0]=p[0]-w;v[3][1]=p[1];break;case'bc':v[0][0]=p[0]-w/2;v[0][1]=p[1]-h;v[1][0]=p[0]+w/2;v[1][1]=p[1]-h;v[2][0]=p[0]+w/2;v[2][1]=p[1];v[3][0]=p[0]-w/2;v[3][1]=p[1];break;case'bl':v[0][0]=p[0];v[0][1]=p[1]-h;v[1][0]=p[0]+w;v[1][1]=p[1]-h;v[2][0]=p[0]+w;v[2][1]=p[1];v[3][0]=p[0];v[3][1]=p[1];break;case'lc':v[0][0]=p[0];v[0][1]=p[1]-h/2;v[1][0]=p[0]+w;v[1][1]=p[1]-h/2;v[2][0]=p[0]+w;v[2][1]=p[1]+h/2;v[3][0]=p[0];v[3][1]=p[1]+h/2;break;case'c':v[0][0]=p[0]-w/2;v[0][1]=p[1]-h/2;v[1][0]=p[0]+w/2;v[1][1]=p[1]-h/2;v[2][0]=p[0]+w/2;v[2][1]=p[1]+h/2;v[3][0]=p[0]-w/2;v[3][1]=p[1]+h/2;break}},_adjustVertices:function(){var v=this._vtx;var w=v[1][0]-v[0][0];var h=v[3][1]-v[0][1];switch(this._anchor){case'tl':this._calcVertices('tl',v[0]);break;case'tc':this._calcVertices('tc',[v[0][0]+w/2,v[0][1]]);break;case'tr':this._calcVertices('tr',v[1]);break;case'rc':this._calcVertices('rc',[v[1][0],v[1][1]+h/2]);break;case'br':this._calcVertices('br',v[2]);break;case'bc':this._calcVertices('bc',[v[2][0]-w/2,v[2][1]]);break;case'bl':this._calcVertices('bl',v[3]);break;case'lc':this._calcVertices('lc',[v[3][0],v[3][1]-h/2]);break;case'c':this._calcVertices('c',[v[0][0]+w/2,v[0][1]+h/2]);break}this._cornerRadius=M.min(this._width/2,this._height/2,this._cornerRadius)},width:function(w){if(w!==undefined){if(w>0){this._width=w;this._adjustVertices()}return this}return this._width},height:function(h){if(h!==undefined){if(h>0){this._height=h;this._adjustVertices()}return this}return this._height},topLeft:function(t){if(t!==undefined){this._anchor='tl';this._calcVertices('tl',t);return this}return{x:this._vtx[0][0],y:this._vtx[0][1]}},topCenter:function(t){if(t!==undefined){this._anchor='tc';this._calcVertices('tc',t);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]}},topRight:function(t){if(t!==undefined){this._anchor='tr';this._calcVertices('tr',t);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]}},rightCenter:function(r){if(r!==undefined){this._anchor='rc';this._calcVertices('rc',r);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]+this._height/2}},bottomRight:function(b){if(b!==undefined){this._anchor='br';this._calcVertices('br',b);return this}return{x:this._vtx[2][0],y:this._vtx[2][1]}},bottomCenter:function(b){if(b!==undefined){this._anchor='bc';this._calcVertices('bc',b);return this}return{x:this._vtx[2][0]-this._width/2,y:this._vtx[2][1]}},bottomLeft:function(b){if(b!==undefined){this._anchor='bl';this._calcVertices('bl',b);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]}},leftCenter:function(l){if(l!==undefined){this._anchor='lc';this._calcVertices('lc',l);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]-this._height/2}},center:function(c){if(c!==undefined){this._anchor='c';this._calcVertices('c',c);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]+this._height/2}},cornerRadius:function(r){if(r!==undefined){if(r>=0){var m=M.min(this._width/2,this._height/2);this._cornerRadius=r>m?m:r}return this}return this._cornerRadius},_antialiasForMin:function(s,t){if(window.__IS_IN_RHINO==true){return parseInt(t)}var a=M.round(t);var b=M.round(s);a=a+b/2;if(a==0.5&&b==1)a=1.5;return a},_antialiasForMax:function(s,t){if(window.__IS_IN_RHINO==true){return parseInt(t)}var a=M.round(t);var b=M.round(s);a=a-b/2;if(a==0.5&&b==1)a=1.5;return a},doDraw:function(d){var v=this._vtx;var m=v[0][0],a=(v[0][0]+v[1][0])/2,b=v[1][0];var c=v[0][1],e=(v[0][1]+v[3][1])/2,f=v[3][1];if(this.borderWidth()>0){var g=this.borderWidth();m=this._antialiasForMin(g,m);b=this._antialiasForMax(g,b);c=this._antialiasForMin(g,c);f=this._antialiasForMax(g,f)}else{m=M.round(m);b=M.round(b);c=M.round(c);f=M.round(f)}var h=d;h.save();h.beginPath();if(this._cornerRadius>0){var r=this._cornerRadius;h.moveTo(m,e);h.arcTo(m,c,a,c,r);h.arcTo(b,c,b,e,r);h.arcTo(b,f,a,f,r);h.arcTo(m,f,m,e,r)}else{h.moveTo(m,c);h.lineTo(b,c);h.lineTo(b,f);h.lineTo(m,f)}h.closePath();h.translate(m,c);this.drawInRect(h);this.drawBorder(h);h.restore()},drawInRect:F.unimplemented,doPointInTest:function(p){var x=p.x;var y=p.y;var v=this._vtx;return v[0][0]<=x&&x<=v[2][0]&&v[0][1]<=y&&y<=v[2][1]}});return D});sap.riv.module({qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},[{qname:'sap.riv.core.UADetector',version:'1.0.0'},{qname:'sap.riv.core.utils.RIVExCanvasMgr',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(U,R,M){var r=R;var h=undefined;var g=function(){if(h){return h}var c;var b=document.body;if(window.__IS_IN_RHINO){c=document.createElement('canvas');b.appendChild(c)}else if(U.isIE()&&parseFloat(U.version())<9){if(typeof FlashCanvas!="undefined"){c=document.createElement('canvas');b.appendChild(c);FlashCanvas.initElement(c);c.setAttribute('height',1);c.setAttribute('width',1);c.style.width='1px';c.style.height='1px';c.style.display='none'}else{c=document.createElement('rivcanvas');c.setAttribute('height',1);c.setAttribute('width',1);c.style.width='1px';c.style.height='1px';b.appendChild(c);r.initElement(c)}}else{c=document.createElement('canvas');c.setAttribute('height',1);c.setAttribute('width',1);c.style.width='1px';c.style.height='1px';c.style.display='none';b.appendChild(c)}h=c.getContext('2d');return h};var p=/(\d+)(px|em|pt|%)/i;var f=/(x{1,2}-)?(small|medium|large)/i;var w=/\d+\b|bold|[\s\t]normal/i;var a={"x-small":9,"xx-small":10,"small":13,"medium":16,"large":18,"x-large":24,"xx-large":32};var T={measureWidth:window.measureWidth||function(b,t){var c=g();c.save();c.font=b;var d=c.measureText(String(t)).width+2;c.restore();return d},measureHeight:function(b,c){var m=p.exec(b);var d=c||10;if(m){var s=0;switch(m[2]){case'em':s=parseFloat(m[1])*d;break;case'%':s=parseFloat(m[1])*d/100;break;case'pt':s=parseFloat(m[1])*1.33;break;case'px':s=parseInt(m[1]);break}return M.ceil(s*1.2)}else{m=f.exec(b);if(m){return M.ceil(a[m[0]]*1.2)}}return undefined},measureWeight:function(b){var m=w.exec(b);var p=400;if(m){switch(m[0]){case' normal':case'500':p=400;break;case'bold':case'bolder':case'600':case'700':case'800':case'900':p=700}}return p},measureText:function(b,t){var d={};d.width=T.measureWidth(b,t);d.height=T.measureHeight(b);return d}};return T});sap.riv.module({qname:'sap.riv.graphics.shape.Paths',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.shape.FillableShape',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,F,M){var P=O.derive(F,{constructor:function(){this._subPaths=[];this._interpolatedVertices=[]},_inplotArc:function(c,s,e,r,v){var m=M.min(s,e);var a=M.max(s,e);var b=(a-m)/50;for(var i=m;i<=a;i+=b){var d=M.sin(i);var f=M.cos(i);v.push([c[0]+f*r,c[1]+d*r])}if(i!=a){var d=M.sin(a);var f=M.cos(a);v.push([c[0]+f*r,c[1]+d*r])}},_inplotSpline:function(p,d,e,v){var f=M.sqrt;var g=d[0]-p[0],h=d[1]-p[1],i=e[0]-d[0],j=e[1]-d[1];var n=M.floor((f(g*g+h*h)+f(i*i+j*j))*0.25);for(var s=1;s<=n;s++){var t=1/n*s,k=1-t;var a=k*k,b=2*t*k,c=t*t;v.push([a*p[0]+b*d[0]+c*e[0],a*p[1]+b*d[1]+c*e[1]])}},_inplotBezier:function(p,e,f,g,v){var h=M.sqrt;var i=e[0]-p[0],j=e[1]-p[1],k=f[0]-e[0],l=f[1]-e[1],m=g[0]-f[0],n=g[1]-f[1];var o=M.floor((h(i*i+j*j)+h(k*k+l*l)+h(m*m+n*n))*0.25);for(var s=1;s<=o;s++){var t=1/o*s,q=1-t;var a=q*q*q,b=3*t*q*q,c=3*t*t*q,d=t*t*t;v.push([a*p[0]+b*e[0]+c*f[0]+d*g[0],a*p[1]+b*e[1]+c*f[1]+d*g[1]])}},moveTo:function(x,y){if(x!==undefined&&y!==undefined){if(this._subPaths.length>0){this._interpolatedVertices[this._interpolatedVertices.length-1].push(this._interpolatedVertices[this._interpolatedVertices.length-1][0])}this._subPaths.push([{cmd:'orig',x:x,y:y}]);this._interpolatedVertices.push([[x,y]]);return this}},closeSubPath:function(){if(this._subPaths.length>0){this._subPaths[this._subPaths.length-1].push({cmd:'close'});var v=this._interpolatedVertices[this._interpolatedVertices.length-1];v.push(v[0]);this.moveTo(v[0][0],v[0][1]);return this}},lineTo:function(x,y){if(x!==undefined&&y!==undefined){if(this._subPaths.length==0){this.moveTo(x,y)}else{this._subPaths[this._subPaths.length-1].push({cmd:'lnto',x:x,y:y});this._interpolatedVertices[this._interpolatedVertices.length-1].push([x,y])}return this}},splineTo:function(c,p){if(c!==undefined&&p!==undefined){if(this._subPaths.length==0){this.moveTo(c.x,c.y)}this._subPaths[this._subPaths.length-1].push({cmd:'spln',cx:c.x,cy:c.y,x:p.x,y:p.y});var v=this._interpolatedVertices[this._interpolatedVertices.length-1];this._inplotSpline(v[v.length-1],[c.x,c.y],[p.x,p.y],v);return this}},bezierCurveTo:function(c,a,p){if(c!==undefined&&a!==undefined&&p!==undefined){if(this._subPaths.length==0){this.moveTo(c.x,c.y)}this._subPaths[this._subPaths.length-1].push({cmd:'bcur',c1x:c.x,c1y:c.y,c2x:a.x,c2y:a.y,x:p.x,y:p.y});var v=this._interpolatedVertices[this._interpolatedVertices.length-1];this._inplotBezier(v[v.length-1],[c.x,c.y],[a.x,a.y],[p.x,p.y],v);return this}},arcTo:function(p,a,r){if(p!==undefined&&a!==undefined&&r>0){if(this._subPaths.length==0){this.moveTo(p.x,p.y)}this._subPaths[this._subPaths.length-1].push({cmd:'arct',c1x:p.x,c1y:p.y,c2x:a.x,c2y:a.y,r:r});this._interpolatedVertices[this._interpolatedVertices.length-1].push([a.x,a.y]);return this}},arc:function(p,r,s,e,c){if(p!==undefined&&s!==undefined&&r>0&&e!==undefined){if(s!==e){if(this._subPaths.length==0){this._subPaths.push([{cmd:'arc',x:p.x,y:p.y,sa:s,ea:e,r:r,cw:c!==undefined?c:false}]);var v=[];this._inplotArc([p.x,p.y],s,e,r,v);this._interpolatedVertices.push(v)}else{this._subPaths[this._subPaths.length-1].push({cmd:'arc',x:p.x,y:p.y,sa:s,ea:e,r:r,cw:c!==undefined?c:false});var v=this._interpolatedVertices[this._interpolatedVertices.length-1];this._inplotArc([p.x,p.y],s,e,r,v)}}return this}},rect:function(x,y,w,h){if(x!==undefined&&y!==undefined&&w>0&&h>0){this._subPaths.push([{cmd:'rect',x:x,y:y,w:w,h:h}]);this._interpolatedVertices.push([[x,y],[x+w,y],[x+w,y+h],[x,y+h],[x,y]]);this.moveTo(x,y);return this}},reset:function(){this._subPaths.splice(0,this._subPaths.length);this._interpolatedVertices.splice(0,this._subPaths.length)},doDraw:function(a){var c=a;c.beginPath();for(var s=0,b,e=this._subPaths,f=e.length;s<f;s++){b=e[s];for(var g=0,d,h=b.length;g<h;g++){d=b[g];switch(d.cmd){case'orig':c.moveTo(d.x,d.y);break;case'close':c.closePath();break;case'lnto':c.lineTo(d.x,d.y);break;case'spln':c.quadraticCurveTo(d.cx,d.cy,d.x,d.y);break;case'bcur':c.bezierCurveTo(d.c1x,d.c1y,d.c2x,d.c2y,d.x,d.y);break;case'arct':c.arcTo(d.c1x,d.c1y,d.c2x,d.c2y,d.r);break;case'arc':c.arc(d.x,d.y,d.r,d.sa,d.ea,!d.cw);break;case'rect':c.rect(d.x,d.y,d.w,d.h);break}}}if(this.fillingColor()){c.closePath();this.fillShape(c)}this.drawBorder(c)},doPointInTest:(function(){var a=function(s,e,t){return((e[0]-s[0])*(t[1]-s[1])-(t[0]-s[0])*(e[1]-s[1]))};return function(b){var w=0;var x=b.x,y=b.y;var p=[x,y];for(var i=0,v=this._interpolatedVertices,e=v.length;i<e;i++){for(var j=0,s=v[i],c=s.length-1;j<c;j++){if(s[j][1]<=y){if(s[j+1][1]>y)if(a(s[j],s[j+1],p)>0)++w}else{if(s[j+1][1]<=y)if(a(s[j],s[j+1],p)<0)--w}}if(w!=0){return true}}return false}})()});return P});sap.riv.module({qname:'sap.riv.graphics.shape.Rectangle',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.shape.DrawableRect',version:'1.0.0'}],function Setup(O,C,D){var R=O.derive(D,{constructor:function(){this._fill=undefined},color:function(c){if(c!==undefined){if(c!==false){this._fill=C.createColorStyle(c)}else{this._fill=undefined}return this}if(this._fill){return this._fill}},drawInRect:function(d){if(this._fill){d.save();d.setFillStyle(this._fill);d.fill();d.restore()}}});return R});sap.riv.module({qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'},[{qname:'sap.riv.core.Observable',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(O,a,L,F){var $=jQuery;if(!$){F.error('Cannot find jQuery')}var b={None:0,FlexibleLeftMargin:1<<0,FlexibleWidth:1<<1,FlexibleRightMargin:1<<2,FlexibleTopMargin:1<<3,FlexibleHeight:1<<4,FlexibleBottomMargin:1<<5};var c=0;var d=function(){return c++};var U=a.derive(O,{events:['widthChanged','heightChanged','sizeChanged','positionChanged','anchorChanged','beforeShow','afterShow','beforeHide','afterHide','focusin','focusout','focus','blur','mousedown','mouseup','mouseenter','mouseleave','mousemove','click','dblclick','touchstart','touchmove','touchend','touchcancel'],constructor:function(o){o=o||{};var _=d();this._id=o.id?o.id+'_'+_:_;this._attached=false;this._container=undefined;this._superComp=undefined;this._subComps=new L();this._hidden=false;this._clipToBound=true;this._parentVisible=false;this._printable=true;this._autoresizeSubComponents=true;this._autoresizingMask=b.None;this._gestureDetectors=[];this._bounds={x:0,y:0,width:1,height:1};this._position={x:0,y:0};this._anchorPoint={x:0.5,y:0.5};this._init_(o)},_init_:function(o){this._container=$(document.createElement('div')).attr('id',this._id).css('position','absolute').css({'font-size':'10px','box-sizing':'border-box','-moz-box-sizing':'border-box','-ms-box-sizing':'border-box','-webkit-box-sizing':'border-box'}).data('selfComp',this);if(o.clipToBound===false){this._container.css('overflow','visible');this._clipToBound=false}else{this._container.css('overflow','hidden')}if(o.hidden===true){this._container.css('display','none');this._hidden=true}if(o.autoSizingMask!=undefined){this._autoresizingMask=o.autoSizingMask}if(o.anchor){this._anchorPoint.x=o.anchor.x;this._anchorPoint.y=o.anchor.y;delete o.anchor}if(o.position){this._position.x=o.position.x;this._position.y=o.position.y;this._container.css('left',this._position.x-this._anchorPoint.x*this._bounds.width);this._container.css('top',this._position.y-this._anchorPoint.y*this._bounds.height);delete o.position}if(o.size){this._bounds.width=o.size.w;this._bounds.height=o.size.h;this._container.width(this._bounds.width);this._container.height(this._bounds.height);delete o.size}this._registerMandatoryHandler()},_registerMandatoryHandler:function(){this.on([{eventName:'sizeChanged',listener:this._updateContainerSize,scope:this},{eventName:'heightChanged',listener:this._updateContainerHeight,scope:this},{eventName:'widthChanged',listener:this._updateContainerWidth,scope:this},{eventName:'positionChanged',listener:this._updateContainerPos,scope:this},{eventName:'anchorChanged',listener:this._updateContainerAnchor,scope:this}])},_updateContainerSize:function(o,n){this._container.width(n.width);this._container.height(n.height);if(this._anchorPoint.x!==0||this._anchorPoint.y!==0){this._container.css('left',this._position.x-this._anchorPoint.x*n.width);this._container.css('top',this._position.y-this._anchorPoint.y*n.height)}this.doContentResize(o,n);this._layout(o,n)},_updateContainerWidth:function(o,n){this._container.width(n);if(this._anchorPoint.x!==0||this._anchorPoint.y!==0){this._container.css('left',this._position.x-this._anchorPoint.x*n)}var e={height:this._bounds.height,width:o},f={height:this._bounds.height,width:n};this.doContentResize(e,f);this._layout(e,f)},_updateContainerHeight:function(o,n){this._container.height(n);if(this._anchorPoint.x!==0||this._anchorPoint.y!==0){this._container.css('top',this._position.y-this._anchorPoint.y*n)}var e={height:o,width:this._bounds.width},f={height:n,width:this._bounds.width};this.doContentResize(e,f);this._layout(e,f)},_updateContainerPos:function(o,n){this._container.css('left',n.x-this._anchorPoint.x*this._bounds.width);this._container.css('top',n.y-this._anchorPoint.y*this._bounds.height)},_updateContainerAnchor:function(o,n){this._container.css('left',this._position.x-n.x*this._bounds.width);this._container.css('top',this._position.y-n.y*this._bounds.height)},_markAttached_:function(){this._attached=true;var s=this._subComps.getIterator();while(s.hasMore()){s.next().value._markAttached_()}this._handleSubCompShow(this)},_markDetached_:function(){this._attached=false;var s=this._subComps.getIterator();while(s.hasMore()){s.next().value._markDetached_()}},id:function(){return this._id},markHide:function(){if(this._hidden===false){if(this._attached&&this._parentVisible){this.doBeforeHide();this.fireEvent('beforeHide')}this._hidden=true;this._container.css('display','none');if(this._attached&&this._parentVisible){this.doAfterHide();this.fireEvent('afterHide');var s=this._subComps.getIterator();while(s.hasMore()){this._handleSubCompHide(s.next().value)}}}return this},_handleSubCompHide:function(e){if(e._parentVisible&&!e._hidden){e.doBeforeHide();e.fireEvent('beforeHide');e.doAfterHide();e.fireEvent('afterHide')}e._parentVisible=false;var s=e._subComps.getIterator();while(s.hasMore()){e._handleSubCompHide(s.next().value)}},markShow:function(){if(this._hidden===true){if(this._attached&&this._parentVisible){this.doBeforeShow();this.fireEvent('beforeShow')}this._hidden=false;this._container.css('display','block');if(this._attached&&this._parentVisible){this.doAfterShow();this.fireEvent('afterShow');var s=this._subComps.getIterator();while(s.hasMore()){this._handleSubCompShow(s.next().value)}}}return this},_handleSubCompShow:function(e){var s=e.superComponent();e._parentVisible=!s._hidden&&s._parentVisible;if(e._parentVisible&&!e._hidden){e.doBeforeShow();e.fireEvent('beforeShow');e.doAfterShow();e.fireEvent('afterShow')}var f=e._subComps.getIterator();while(f.hasMore()){e._handleSubCompShow(f.next().value)}},clipToBound:function(e){if(e!==undefined){if(this._clipToBound!==e){this._clipToBound=e;if(this._clipToBound){this._container.css('overflow','hidden')}else{this._container.css('overflow','visible')}}return this}else{return this._clipToBound}},visibility:function(){return!this._hidden&&this._attached&&this._parentVisible},printable:function(p){if(p!==undefined){if(this._printable!==p){this._printable=p}return this}else{return this._printable}},autoresizeSubComponents:function(e){if(e!==undefined){if(this._autoresizeSubComponents!==e){this._autoresizeSubComponents=e}return this}else{return this._autoresizeSubComponents}},autoresizingMask:function(m){if(m!==undefined){if(this._autoresizingMask!==m){this._autoresizingMask=m}return this}else{return this._autoresizingMask}},bounds:function(e){if(e){var o=this._bounds,n=e;this._bounds.x=n.x;this._bounds.y=n.y;if(o.width!==n.width||o.height!==n.height){var f={width:o.width,height:o.height};var g={width:n.width,height:n.height};this._bounds.width=n.width;this._bounds.height=n.height;this.fireEvent('sizeChanged',f,g)}return this}else{return a.extend({},this._bounds)}},pagePosition:function(){var o=this._container.offset();return{x:o.left,y:o.top}},position:function(p){if(p){var e=this._position,f=p;if(e.x!==f.x||e.y!==f.y){var o={x:e.x,y:e.y};var n={x:f.x,y:f.y};e.x=f.x;e.y=f.y;this.fireEvent('positionChanged',o,n)}return this}else{return a.extend({},this._position)}},size:function(s){if(s){var o={width:this._bounds.width,height:this._bounds.height};if(o.width!==s.width||o.height!==s.height){this._bounds.width=s.width;this._bounds.height=s.height;this.fireEvent('sizeChanged',o,s)}return this}else{return{width:this._bounds.width,height:this._bounds.height}}},width:function(w){if(w){var o=this._bounds.width;if(o!==w){this._bounds.width=w;this.fireEvent('widthChanged',o,w)}return this}else{return this._bounds.width}},height:function(h){if(h){var o=this._bounds.height;if(o!==h){this._bounds.height=h;this.fireEvent('heightChanged',o,h)}return this}else{return this._bounds.height}},anchorPoint:function(e){if(e){var f=this._anchorPoint,g=e;if(f.x!==g.x||f.y!==g.y){var o={x:f.x,y:f.y};var n={x:g.x,y:g.y};f.x=g.x;f.y=g.y;this.fireEvent('anchorChanged',o,n)}return this}else{return a.extend({},this._anchorPoint)}},frame:function(r){if(r){var e=this._bounds,f=this._position;var g=r.x+r.width*this._anchorPoint.x;var h=r.y+r.height*this._anchorPoint.y;var p=false,o=undefined,n=undefined,s=false,i=undefined,j=undefined;if(e.width!==r.width||e.height!==r.height){i={width:e.width,height:e.height};j={width:r.width,height:r.height};e.width=r.width;e.height=r.height;s=true}if(f.x!==g||f.y!==h){o={x:f.x,y:f.y};n={x:g,y:h};f.x=g;f.y=h;p=true}if(p){this.fireEvent('positionChanged',o,n)}if(s){this.fireEvent('sizeChanged',i,j)}return this}else{return{x:this._position.x-this._anchorPoint.x*this._bounds.width,y:this._position.y-this._anchorPoint.y*this._bounds.height,width:this._bounds.width,height:this._bounds.height}}},superComponent:function(){return this._superComp},subComponents:function(){return this._subComps},addSubComponent:function(s){if(s){if(s._superComp===undefined){s._superComp=this;this._subComps.add(s.id(),s);this._container.append(s._container);if(this._attached){s._markAttached_()}return this}else{throw new Error('The component already has a parent component')}}},detachFromSuperComponent:function(){if(this._superComp){if(this._superComp._attached){this._superComp._handleSubCompHide(this);this._markDetached_()}this._superComp._subComps.remove(this.id());this._container.detach();this._superComp=undefined}},removeFromSuperComponent:function(){if(this._superComp){this._superComp._subComps.remove(this.id());this._container.remove();if(this._superComp._attached)this._markDetached_();this._superComp=undefined}},insertBeforeSubComponent:function(s,e){if(s&&e){if(s._superComp===undefined){var n=s.id();var f=e.id();if(this._subComps.has(f)&&n!==f){s._superComp=this;this._subComps.insertBefore(n,s,f);s._container.before(e._container);if(this._attached){s._markAttached_()}}}else{throw new Error('The component already has a parent component')}}},insertAfterSubComponent:function(s,e){if(s&&e){if(s._superComp===undefined){var n=s.id();var f=e.id();if(this._subComps.has(f)&&n!==f){s._superComp=this;this._subComps.insertAfter(n,s,f);s._container.after(e._container);if(this._attached){s._markAttached_()}}}else{throw new Error('The component already has a parent component')}}},bringToFront:function(s){if(s&&this._subComps.has(s.id())&&this._subComps.getLastInsert().id()!==s.id()){this._subComps.moveToLast(s.id());s._container.detach();this._container.append(s._container)}},sendToBack:function(s){if(s&&this._subComps.has(s.id())&&this._subComps.getFirstInsert().id()!==s.id()){this._subComps.moveToFirst(s.id());s._container.detach();this._container.prepend(s._container)}},convertPointFromSuper:function(p){var f=this.frame();return{x:p.x-f.x,y:p.y-f.y}},convertPointToSuper:function(p){var f=this.frame();return{x:p.x+f.x,y:p.y+f.y}},convertPointFromGlobal:function(g){var p=[this];var e=this;var f=g;while(e._superComp){p.push(e._superComp);e=e._superComp}while(p.length){e=p.pop();f=e.convertPointFromSuper(f)}return f},convertPointToGlobal:function(p){var e=this;var f=p;while(e){f=e.convertPointToSuper(f);e=e._superComp}return f},convertPointFromComp:function(p,s){return this.convertPointFromGlobal(s.convertPointToGlobal(p))},convertPointToComp:function(p,t){return t.convertPointFromGlobal(this.convertPointToGlobal(p))},_resizeSubComp:function(s,o,n){var e=s.frame();var x=e.x,y=e.y,w=e.width,h=e.height;var m=x,f=o.width-x-w,g=y,i=o.height-y-h;var j=n.width-o.width,k=n.height-o.height;var l=s._autoresizingMask;var p=b.FlexibleLeftMargin|b.FlexibleWidth|b.FlexibleRightMargin;var v=b.FlexibleTopMargin|b.FlexibleHeight|b.FlexibleBottomMargin;switch(l&p){case b.None:if(m!==0){x+=j*m/(m+f)}break;case b.FlexibleLeftMargin:x+=j;break;case b.FlexibleLeftMargin|b.FlexibleRightMargin:case b.FlexibleRightMargin:break;case b.FlexibleWidth:w+=j;break;case b.FlexibleLeftMargin|b.FlexibleWidth:if(w!==0){x+=j*m/(m+w);w+=j*w/(m+w)}break;case b.FlexibleRightMargin|b.FlexibleWidth:if(w!==0){w+=j*w/(f+w)}break;case b.FlexibleLeftMargin|b.FlexibleWidth|b.FlexibleRightMargin:if(o.width!==0){var r=j/o.width;x+=x*r;w+=w*r}break}switch(l&v){case b.None:if(g!==0){y+=k*g/(g+i)}break;case b.FlexibleTopMargin:y+=k;break;case b.FlexibleTopMargin|b.FlexibleBottomMargin:case b.FlexibleBottomMargin:break;case b.FlexibleHeight:h+=k;break;case b.FlexibleTopMargin|b.FlexibleHeight:if(h!==0){y+=k*g/(g+h);h+=k*h/(g+h)}break;case b.FlexibleBottomMargin|b.FlexibleHeight:if(h!=0){h+=k*h/(i+h)}break;case b.FlexibleTopMargin|b.FlexibleHeight|b.FlexibleBottomMargin:if(o.height){var r=k/o.height;y+=y*r;h+=h*r}break}return{x:x,y:y,height:h,width:w}},_layout:function(o,n){if(this._autoresizeSubComponents){var s=this._subComps.getIterator();var e,f;while(s.hasMore()){e=s.next().value;f=this._resizeSubComp(e,o,n);e.frame(f)}}else if(this.doLayout!=F.noop&&this.doLayout!==undefined){this.doLayout()}},_fireEvent_:function(e){this.fireEvent(e.type(),e);if(this._superComp&&e.shouldBubble()){e._setCurrentTarget_(this._superComp);this._superComp._fireEvent_(e)}},_fireMouseEvent_:function(e){this.fireEvent(e.type(),e);if(this._superComp&&e.shouldBubble()){e._setCurrentTarget_(this._superComp);e._setCurrentLocalXY_({x:e.currentLocalXY().x+this._position.x-this._anchorPoint.x*this._bounds.width,y:e.currentLocalXY().y+this._position.y-this._anchorPoint.y*this._bounds.height});this._superComp._fireMouseEvent_(e)}},_fireTouchEvent_:function(e){this.fireEvent(e.type(),e);if(this._superComp&&e.shouldBubble()){e._setCurrentTarget_(this._superComp);this._superComp._fireTouchEvent_(e)}},purgeListeners:function(){this.callParent('purgeListeners');this._registerMandatoryHandler()},removeAllListeners:function(e){this.callParent('removeAllListeners',e);switch(e){case'sizeChanged':this.on({eventName:'sizeChanged',listener:this._updateContainerSize,scope:this});break;case'heightChanged':this.on({eventName:'heightChanged',listener:this._updateContainerHeight,scope:this});break;case'widthChanged':this.on({eventName:'widthChanged',listener:this._updateContainerWidth,scope:this});break;case'positionChanged':this.on({eventName:'positionChanged',listener:this._updateContainerPos,scope:this});break;case'anchorChanged':this.on({eventName:'anchorChanged',listener:this._updateContainerAnchor,scope:this});break}},addGestureDetector:function(e){if(e!==undefined){e._setOwnerComp_(this);this._gestureDetectors.push(e)}},removeGestureDetector:function(e){for(var i=0,l=this._gestureDetectors.length;i<l;i++){if(this._gestureDetectors[i]===e){this._gestureDetectors.splice(i,1);e._setOwnerComp_(undefined);l--}}},hitTest:function(l){var p=[{comp:this,pointInLocal:l,subCompsItr:this._subComps.getIterator(true)}];var e,f,g,s;while(p.length){e=p[p.length-1];g=e.comp;f=e.pointInLocal;s=e.subCompsItr;if(g.visibility()){if(s.hasMore()){var h=s.next().value;p.push({comp:h,pointInLocal:h.convertPointFromSuper(f),subCompsItr:h._subComps.getIterator(true)});continue}else if(g.containsPoint(f)){return g}p.pop()}else{p.pop()}}},containsPoint:function(l){var e=this.bounds();return l.x>=e.x&&l.x<=(e.x+e.width)&&l.y>=e.y&&l.y<=(e.y+e.height)},printTo:function(e){e.clearRect(0,0,this._bounds.width,this._bounds.height);this.doPrint(e)},doLayout:F.noop,doContentResize:F.noop,doPrint:F.noop,doBeforeHide:F.noop,doAfterHide:F.noop,doBeforeShow:F.noop,doAfterShow:F.noop});U.Autosizing=b;return U});sap.riv.module({qname:'sap.riv.viz.shared.series.BaseRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(F){var b=function(l,o){this._mainLayer=l;this._seriesGroup=[];this._eventLisntener={};this._seriesShapes=[];this._highlights=[];this._initialize(o)};b.prototype._initialize=function(o){};b.prototype.addSeriesGroup=function(s){this._seriesGroup.push(s)};b.prototype.getSeriesGroups=function(){return this._seriesGroup};b.prototype.resetSeriesGroup=function(){this._seriesGroup=[]};b.prototype.getSeriesShapes=function(){return this._seriesShapes};b.prototype.findShape=function(p){if(this._seriesShapes[p.measureIndex]&&this._seriesShapes[p.measureIndex][p.dimensionItemIndex]){return this._seriesShapes[p.measureIndex][p.dimensionItemIndex]}};b.prototype.setHighlights=function(h,l){this._highlights=h;this._layerPrioritization=l};b.prototype.getHighlights=function(){return this._highlights};b.prototype._addEventListener=function(e,a){this._eventLisntener[e]=a};b.prototype.getEventListener=function(){return this._eventLisntener};b.prototype.getLayer=function(){return this._mainLayer};b.prototype.refresh=function(){this._mainLayer.setNeedsDisplay()};b.prototype.getDataContextOnPoint=F.noop;b.prototype.highlight=F.noop;b.prototype.removeHighlights=F.noop;b.prototype.hoverOnPoint=F.noop;b.prototype.onblur=F.noop;return b});sap.riv.module({qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.Canvas2DSurface',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'}],function Setup(O,C,a,U){var b=O.derive(U,{constructor:function(o){this._canvasElement=C.createCanvasElement(this.width(),this.height(),this._container);this._canvasSurface=new a({canvasEl:this._canvasElement});this._registerEventDispatcher()},_canvasSurfaceEventDispatcher:function(v){this._canvasSurface.dispatchComponentUIEvent(v)},_registerEventDispatcher:function(){this.on({eventName:'click',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'dblclick',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'mouseup',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'mousedown',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'mousemove',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'mouseleave',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'touchstart',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'touchmove',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'touchend',listener:this._canvasSurfaceEventDispatcher,scope:this});this.on({eventName:'touchcancel',listener:this._canvasSurfaceEventDispatcher,scope:this})},purgeListeners:function(){this.callParent('purgeListeners');this._registerEventDispatcher()},removeAllListeners:function(e){this.callParent('removeAllListeners',e);switch(e){case'click':this.on({eventName:'click',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'dblclick':this.on({eventName:'dblclick',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'mouseup':this.on({eventName:'mouseup',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'mousedown':this.on({eventName:'mousedown',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'mousemove':this.on({eventName:'mousemove',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'mouseleave':this.on({eventName:'mouseleave',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'touchstart':this.on({eventName:'touchstart',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'touchmove':this.on({eventName:'touchmove',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'touchend':this.on({eventName:'touchend',listener:this._canvasSurfaceEventDispatcher,scope:this});break;case'touchcancel':this.on({eventName:'touchcancel',listener:this._canvasSurfaceEventDispatcher,scope:this});break}},doContentResize:function(o,n){this.callParent('doContentResize',o,n);if(o.width!==n.width){this._canvasSurface.width(n.width)}if(o.height!==n.height){this._canvasSurface.height(n.height)}},getCanvasSurface:function(){return this._canvasSurface},doPrint:function(d){d.drawImage(this._canvasElement,0,0)}});return b});sap.riv.module({qname:'sap.riv.viz.pie.BasicModule',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.Observable',version:'1.0.0'}],function Setup(O,F,a){var B=O.derive(a,{constructor:function(o){this._chart_options=O.extend(true,{},o);this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._defaultSelectionArmed=true;this.addEvents(this.getSupportedAppEvents())},init:function(){this.buildData();this.initSeries()},updateProperties:function(p){var o={};o.properties=p;this._chart_options=o},updateOptions:function(o){this._chart_options=o;this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._hasDrawed=false},buildData:F.unsupported,initSeries:F.unsupported,drawSeries:F.unsupported,doChartLayout:F.unsupported,bindRenderer:F.unsupported,applyTheme:F.unsupported,getSupportedAppEvents:F.unsupported,marqueeOverPoint:F.noop,hoverOnPoint:F.noop,clickOnPoint:F.noop});return B});sap.riv.module({qname:'sap.riv.graphics.shape.TextLine',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.graphics.Drawable',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,T,C,D,M){var d=function(t,b){b.save();var x=t._vtx[0][0],y=t._vtx[0][1];var h=t._height;var w=(t._width<t._textOriginalWidth)?t._width:t._textOriginalWidth;b.beginPath();var r=M.round(x),c=M.round(x+w),e;var s=(t._decorationLineThickness%2===0)?0:0.5;switch(t._textDecoration){case'overline':e=M.round(y+h/30)+s;b.moveTo(r,e);b.lineTo(c,e);break;case'underline':e=M.round(y+h*5/6)+s;b.moveTo(r,e);b.lineTo(c,e);break;case'line-through':e=M.round(y+h/2)+s;b.moveTo(r,e);b.lineTo(c,e);break;default:}b.setLineWidth(t._decorationLineThickness);b.setStrokeStyle(t._textColor);b.stroke();b.restore()};var a=O.derive(D,{constructor:function(){this._anchor='tl';this._cornerRadius=0;this._vtx=[[0,0],[0,0],[0,0],[0,0]];this._font='10px sans-serif';this._height=T.measureHeight(this._font);this._width=30;this._text='';this._textAlign='l';this._textColor='#000000';this._strokeAnchor=[0,0];this._adjustVertices();this._weight=T.measureWeight(this._font);this._textOriginalWidth=T.measureWidth(this._font,this._text);this._decorationLineThickness=M.round(this._height*(this._weight===700?1.5:1)/25);this._textDecoration=null},_calcVertices:function(b,c){var p=c;var v=this._vtx;var w=this._width;var h=this._height;switch(b){case'tl':v[0][0]=p[0];v[0][1]=p[1];v[1][0]=p[0]+w;v[1][1]=p[1];v[2][0]=p[0]+w;v[2][1]=p[1]+h;v[3][0]=p[0];v[3][1]=p[1]+h;break;case'tc':v[0][0]=p[0]-w/2;v[0][1]=p[1];v[1][0]=p[0]+w/2;v[1][1]=p[1];v[2][0]=p[0]+w/2;v[2][1]=p[1]+h;v[3][0]=p[0]-w/2;v[3][1]=p[1]+h;break;case'tr':v[0][0]=p[0]-w;v[0][1]=p[1];v[1][0]=p[0];v[1][1]=p[1];v[2][0]=p[0];v[2][1]=p[1]+h;v[3][0]=p[0]-w;v[3][1]=p[1]+h;break;case'rc':v[0][0]=p[0]-w;v[0][1]=p[1]-h/2;v[1][0]=p[0];v[1][1]=p[1]-h/2;v[2][0]=p[0];v[2][1]=p[1]+h/2;v[3][0]=p[0]-w;v[3][1]=p[1]+h/2;break;case'br':v[0][0]=p[0]-w;v[0][1]=p[1]-h;v[1][0]=p[0];v[1][1]=p[1]-h;v[2][0]=p[0];v[2][1]=p[1];v[3][0]=p[0]-w;v[3][1]=p[1];break;case'bc':v[0][0]=p[0]-w/2;v[0][1]=p[1]-h;v[1][0]=p[0]+w/2;v[1][1]=p[1]-h;v[2][0]=p[0]+w/2;v[2][1]=p[1];v[3][0]=p[0]-w/2;v[3][1]=p[1];break;case'bl':v[0][0]=p[0];v[0][1]=p[1]-h;v[1][0]=p[0]+w;v[1][1]=p[1]-h;v[2][0]=p[0]+w;v[2][1]=p[1];v[3][0]=p[0];v[3][1]=p[1];break;case'lc':v[0][0]=p[0];v[0][1]=p[1]-h/2;v[1][0]=p[0]+w;v[1][1]=p[1]-h/2;v[2][0]=p[0]+w;v[2][1]=p[1]+h/2;v[3][0]=p[0];v[3][1]=p[1]+h/2;break;case'c':v[0][0]=p[0]-w/2;v[0][1]=p[1]-h/2;v[1][0]=p[0]+w/2;v[1][1]=p[1]-h/2;v[2][0]=p[0]+w/2;v[2][1]=p[1]+h/2;v[3][0]=p[0]-w/2;v[3][1]=p[1]+h/2;break}switch(this._textAlign){case'l':this._strokeAnchor[0]=v[0][0];this._strokeAnchor[1]=v[0][1]+h/2;break;case'c':this._strokeAnchor[0]=v[0][0]+w/2;this._strokeAnchor[1]=v[0][1]+h/2;break;case'r':this._strokeAnchor[0]=v[0][0]+w;this._strokeAnchor[1]=v[0][1]+h/2;break}},_adjustVertices:function(){var v=this._vtx;var w=v[1][0]-v[0][0];var h=v[3][1]-v[0][1];switch(this._anchor){case'tl':this._calcVertices('tl',v[0]);break;case'tc':this._calcVertices('tc',[v[0][0]+w/2,v[0][1]]);break;case'tr':this._calcVertices('tr',v[1]);break;case'rc':this._calcVertices('rc',[v[1][0],v[1][1]+h/2]);break;case'br':this._calcVertices('br',v[2]);break;case'bc':this._calcVertices('bc',[v[2][0]-w/2,v[2][1]]);break;case'bl':this._calcVertices('bl',v[3]);break;case'lc':this._calcVertices('lc',[v[3][0],v[3][1]-h/2]);break;case'c':this._calcVertices('c',[v[0][0]+w/2,v[0][1]+h/2]);break}this._cornerRadius=M.min(this._width/2,this._height/2,this._cornerRadius)},topLeft:function(t){if(t!==undefined){this._anchor='tl';this._calcVertices('tl',t);return this}return{x:this._vtx[0][0],y:this._vtx[0][1]}},topCenter:function(t){if(t!==undefined){this._anchor='tc';this._calcVertices('tc',t);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]}},topRight:function(t){if(t!==undefined){this._anchor='tr';this._calcVertices('tr',t);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]}},rightCenter:function(r){if(r!==undefined){this._anchor='rc';this._calcVertices('rc',r);return this}return{x:this._vtx[1][0],y:this._vtx[1][1]+this._height/2}},bottomRight:function(b){if(b!==undefined){this._anchor='br';this._calcVertices('br',b);return this}return{x:this._vtx[2][0],y:this._vtx[2][1]}},bottomCenter:function(b){if(b!==undefined){this._anchor='bc';this._calcVertices('bc',b);return this}return{x:this._vtx[2][0]-this._width/2,y:this._vtx[2][1]}},bottomLeft:function(b){if(b!==undefined){this._anchor='bl';this._calcVertices('bl',b);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]}},leftCenter:function(l){if(l!==undefined){this._anchor='lc';this._calcVertices('lc',l);return this}return{x:this._vtx[3][0],y:this._vtx[3][1]-this._height/2}},center:function(c){if(c!==undefined){this._anchor='c';this._calcVertices('c',c);return this}return{x:this._vtx[0][0]+this._width/2,y:this._vtx[0][1]+this._height/2}},cornerRadius:function(r){if(r!==undefined){if(r>=0){this._cornerRadius=M.min(this._width/2,this._height/2,r)}return this}return this._cornerRadius},font:function(c){if(c!==undefined){this._font=c;var n=T.measureHeight(this._font);var b=T.measureWeight(this._font);var e=T.measureWidth(this._font,this._text);if(this._height!==n){this._height=n;this._adjustVertices()}if(this._weight!==b){this._weight=b}if(this._textOriginalWidth!==e){this._textOriginalWidth=e}var f=M.round(this._height*(this._weight===700?1.5:1)/25);if(this._decorationLineThickness!==f){this._decorationLineThickness=f}return this}return this._font},width:function(w){if(w!==undefined){if(this._width>0&&this._width!==w){this._width=w;this._adjustVertices()}return this}return this._width},text:function(t){if(t!==undefined){this._text=t.toString();return this}return this._text},textAlign:function(t){if(t!==undefined){this._textAlign=t;return this}return this._textAlign},textColor:function(c){if(c!==undefined){if(c!==false){this._textColor=C.createColorStyle(c)}else{this._textColor=undefined}return this}if(this._textColor){return this._textColor}},textDecoration:function(b){if(b!==undefined&&(b===null||b==="overline"||b==="underline"||b==="line-through")){this._textDecoration=b;return this}if(this._textDecoration){return this._textDecoration}},doDraw:function(b){var c=b;c.setFont(this._font);switch(this._textAlign){case'r':c.setTextAlign('right');break;case'c':c.setTextAlign('center');break;case'l':default:c.setTextAlign('left');break}c.setTextBaseline('middle');c.setFillStyle(this._textColor);d(this,c);c.save();c.beginPath();var v=this._vtx;if(this._cornerRadius>0){var r=this._cornerRadius;c.moveTo(v[0][0],(v[0][1]+v[3][1])/2);c.arcTo(v[0][0],v[0][1],(v[0][0]+v[1][0])/2,v[0][1],r);c.arcTo(v[1][0],v[0][1],v[1][0],(v[0][1]+v[3][1])/2,r);c.arcTo(v[1][0],v[3][1],(v[0][0]+v[1][0])/2,v[3][1],r);c.arcTo(v[0][0],v[3][1],v[0][0],(v[0][1]+v[3][1])/2,r)}else{c.moveTo(v[0][0],v[0][1]);c.lineTo(v[1][0],v[1][1]);c.lineTo(v[2][0],v[2][1]);c.lineTo(v[3][0],v[3][1])}c.closePath();c.clip();c.fillText(this._text,this._strokeAnchor[0],this._strokeAnchor[1]);c.restore()},doPointInTest:function(p){var x=p.x;var y=p.y;var v=this._vtx;return v[0][0]<=x&&x<=v[2][0]&&v[0][1]<=y&&y<=v[2][1]}});return a});sap.riv.module({qname:'sap.riv.viz.shared.series.PieRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ColorUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.BaseRenderer',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Animator',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Paths',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Circle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.TextLine',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Sector',version:'1.0.0'}],function Setup(T,C,B,M,S,a,O,A,b,P,c,d,e){var t="The quick brown fox jumps over the lazy dog";var f=O.derive(B,{constructor:function(l,o,m){this._fontFamily='Arial';this._donutType='donut';this._pieType='pie';this._donutMeasureFont='bold 14px Arial';this._donutMeasureColor='#000';this._donutBackground='#FFF';this._innerShadowBlur=20;this._multiMode=m;this._subChartTitleVisible=false;this._centralSeriesNameVisible=false;this._truncReplacement='...';this._isDrawn=false;this._shapes={pieSectors:[],centerCircle:null,measureLabel:null,sectorInnerShadow:[],sectorOuterShadow:[],cover:null,subChartTitle:null};this._isShowInnerShadow=false;this._isShowOuterShadow=false;this._tooltip={shape:null,dimensionLabel:null,valueLabel:null,percentLabel:null};this._meta={center:null,radiusInner:null,radiusOutter:null};this._values=[];this._allSelectable=true;this._allDeSelectable=true;this._defaultSelectedSectorIndexes=[];this._interactionStatus={mouseDown:false,mouseOnPieIndex:null,selected:[]};this._parseOptions(o);this._initialize()},_parseOptions:function(p){this._options=p.properties;this._selectionMode=this._options.selectionMode;this._allSelectable=this._options.allSelectable;this._allDeSelectable=this._options.allDeSelectable;this._defaultSelectedSectorIndexes=this._options.selectedDataIndexes;this._isShowInnerShadow=this._options.isShowPieInnerShadow;this._isShowOuterShadow=this._options.isShowPieOuterShadow;this._subChartTitleVisible=this._multiMode&&this._options.subChartTitle.visible;this._centralSeriesNameVisible=(this._options.pieType===this._donutType)&&(!this._multiMode);this._colorList=this._options._additional.colorList;this._type=this._options.pieType;this._toolTipTextFont=this._options.tooltip.text.font;this._toolTipTextFontColor=this._options.tooltip.text.color;this._toolTipTextFormatString=this._options._additional.tooltipeTextNumberFormat;this._toolTipMainValueFont=this._options.tooltip.mainValue.font;this._toolTipMainValueFontColor=this._options.tooltip.mainValue.color;this._toolTipMainValueFormatString=this._options._additional.tooltipeMainValueNumberFormat;this._toolTipSubValueFont=this._options.tooltip.subValue.font;this._toolTipSubValueFontColor=this._options.tooltip.subValue.color;this._toolTipSubValueFormatString=this._options._additional.tooltipeSubValueNumberFormat},_getSeries:function(){var s=this.getSeriesGroups();if(s.length==0)return;var g=s[0].getSeriesList();if(g.length==0){return}var h=g[0];return h},draw:function(){this._reset();var s=this._getSeries();if(s){this._initSeries(s);this._isDrawn=true;this._update()}},redraw:function(){this._reCalculateSize();this._update();this.refresh()},_update:function(){var s=this._getSeries();if(s){this._drawSeries(s)}},_reCalculateSize:function(){delete this._meta;this._meta={center:null,radiusInner:null,radiusOutter:null};var l=this.getLayer();var n=l.size();var s=0;if(this._subChartTitleVisible){var g=this._getSeries();if(g){var h=g.getName();var i=this._options.subChartTitle.font;s=a.measureHeight(i,h)}}var p=n.height-s;this._meta.center={x:n.width/2,y:p/2};var r=(n.width<p)?n.width:p;this._meta.radiusInner=r/((1.5+1)*2);this._meta.radiusOutter=this._meta.radiusInner*2.3},_initSeries:function(s){var v=s.getData();this._reCalculateSize(s);var l=this.getLayer();var g=0;for(var i=0;i<v.length;i++){var o={'vo':v[i]};this._values.push(o);g+=v[i].value}var h=0,p=0;for(var i=0;i<v.length;i++){this._values[i].percent=this._values[i].vo.value/g;this._values[i].color=this._colorList[this._values[i].vo.dimensionItemIndex];this._shapes.sectorOuterShadow.push(l.addShape(new P()));this._shapes.pieSectors.push(l.addShape(new e()));this._shapes.sectorInnerShadow.push(l.addShape(new e()))}this._shapes.centerCircle=l.addShape(new c());this._shapes.measureLabel=l.addShape(new d());if(this._type==this._pieType){this._shapes.centerCircle.visible(false)}this._shapes.subChartTitle=l.addShape(new d()).visible(this._subChartTitleVisible);this._tooltip.shape=l.addShape(new P());this._tooltip.dimensionLabel=l.addShape(new d());this._tooltip.valueLabel=l.addShape(new d());this._tooltip.percentLabel=l.addShape(new d())},_drawSeries:function(s){var r=this._meta.radiusOutter;for(var i=0,g=0,h=0;i<this._shapes.pieSectors.length;i++){h=g+this._values[i].percent*M.PI*2;this._shapes.pieSectors[i].center(this._meta.center).radius(this._meta.radiusOutter).clockwise(true).startAngle(g).endAngle(h).borderWidth(1).borderColor("#fff").fillingColor(this._values[i].color);this._shapes.sectorOuterShadow[i].reset();this._shapes.sectorOuterShadow[i].visible(this._isShowOuterShadow).arc(this._meta.center,this._meta.radiusOutter,g,h,true).borderWidth(2).borderColor("#fff").shadow({offsetX:1,offsetY:1,blur:8,color:'#000'});var j=this._innerShadowBlur;this._shapes.sectorInnerShadow[i].visible(this._isShowInnerShadow).center(this._meta.center).radius(this._meta.radiusOutter).clockwise(true).startAngle(g).endAngle(h).fillingColor({t:'rg',s:{c:this._meta.center,r:r},e:{c:this._meta.center,r:(r-j<0)?0:r-j},st:[{o:0,v:'#000'},{o:1,v:'#fff'}]}).compositionMode({alpha:0.2});g=h}if(this._subChartTitleVisible){var n=s.getName();var k=this._options.subChartTitle.font;var l=this._options.subChartTitle.color;var m=this.getLayer();var o=m.size();var p=a.measureHeight(k,n);var q=a.measureWidth(k,n);this._shapes.subChartTitle.center([this._meta.center.x,o.height-p/2]).width(q).text(n).font(k).textColor(l)}if(this._type==this._donutType){var u=s.getName();this._shapes.centerCircle.center(this._meta.center).radius(this._meta.radiusInner).fillingColor(this._donutBackground);this._shapes.measureLabel.width(a.measureWidth(this._donutMeasureFont,u)).text(u).font(this._donutMeasureFont).center([this._meta.center.x,this._meta.center.y]).textColor(this._donutMeasureColor);if(this._shapes.pieSectors.length<1){this._shapes.centerCircle.visible(false)}}this._shapes.measureLabel.visible(this._centralSeriesNameVisible);this._hideTooltip();this._defaultSelectedSectorIndexes=[];if(!T.isExist(this._toolTipMainValueFont)){this._toolTipMainValueFont='bold 12px Arial'}if(!T.isExist(this._toolTipTextFont)){this._toolTipTextFont='normal 12px Arial'}if(!T.isExist(this._toolTipSubValueFont)){this._toolTipSubValueFont='normal 12px Arial'}this.getTooltipFontStyle();this._refresh()},autoResizeTooltipFont:function(){var g=['bold ',' Arial'];var l=['normal ',' Arial'];var p=['normal ',' Arial'];var n,m=0,v=[];var h=this._getValueWithLongestNumberOfDigits(v);var j=9;for(var i=0;i<v.length;i++){if(v[i].toString().length===h){while(j>=9){var k=g[0]+j+'px'+g[1];var o=a.measureWidth(k,v[i]);if(o>=(this._meta.radiusInner*2)){j--;break}j++}if(o>m){m=o;n=k}var q=l[0]+j+'px'+l[1];var r=p[0]+j+'px'+p[1]}}this._applyTooltipFontStyleSetting(q,n,r)},_getValueWithLongestNumberOfDigits:function(v){var g,l=0;for(var i=0;i<this._values.length;i++){g=sap.common.globalization.NumericFormatManager.getFormat(this._toolTipMainValueFormatString[i]);v.push((T.isExist(g)?g.display(this._values[i].vo.value):this._values[i].vo.value));if(v[i].toString().length>=l){l=v[i].toString().length}}return l},_applyTooltipFontStyleSetting:function(l,n,p){this._toolTipTextFont=T.isExist(l)?l:this._toolTipTextFont;this._toolTipMainValueFont=T.isExist(n)?n:this._toolTipMainValueFont;this._toolTipSubValueFont=T.isExist(p)?p:this._toolTipSubValueFont},getTooltipFontStyle:function(){var p=/(\d+)(px|em|pt|%)/i;var m=p.exec(this._toolTipMainValueFont);var g=p.exec(this._toolTipTextFont);var h=p.exec(this._toolTipSubValueFont);var k=this._toolTipMainValueFont.split(m[0]);var l=['normal ',' Arial'];var n=['normal ',' Arial'];if(T.isExist(g)){l=this._toolTipTextFont.split(g[0])}if(T.isExist(h)){n=this._toolTipSubValueFont.split(h[0])}var o,q=0,v=[];var r=this._getValueWithLongestNumberOfDigits(v);for(var i=0;i<v.length;i++){if(v[i].toString().length===r){for(var j=m[1];j>=9;j--){var s=k[0]+j+'px'+k[1];var u=a.measureWidth(s,v[i]);if(u<=(this._meta.radiusInner*2)){break}}if(u>q){q=u;o=s}var w=l[0]+j+'px'+l[1];var x=n[0]+j+'px'+n[1]}}this._applyTooltipFontStyleSetting(w,o,x)},applyTheme:function(g){var s=b.getThemeSettings(g);var h=s.global;var p=s['pie'];var j=p.donut;var m=O.extend(true,{},h,j.measureLabel);this._donutMeasureFont=m['font-weight']+" "+m['font-size']+" "+m['font-family'];this._donutMeasureColor=m['color'];this._donutBackground=T.isExist(j.background)?j.background:s.background;var k=this._isShowOuterShadow=p['isShowOuterShadow'];var l=this._isShowInnerShadow=p['isShowInnerShadow'];var n=p.tooltip;var o=O.extend(true,{},h,n.dimensionLabel);this._toolTipTextFont=o['font-weight']+" "+o['font-size']+" "+o['font-family'];this._toolTipTextFontColor=o['color'];var v=O.extend(true,{},h,n.valueLabel);this._toolTipMainValueFont=v['font-weight']+" "+v['font-size']+" "+v['font-family'];this._toolTipMainValueFontColor=v['color'];var q=O.extend(true,{},h,n.percentLabel);this._toolTipSubValueFont=q['font-weight']+" "+q['font-size']+" "+q['font-family'];this._toolTipSubValueFontColor=q['color'];if(this._isDrawn){this._shapes.centerCircle.fillingColor(this._donutBackground);if(this._type==this._donutType){this._shapes.measureLabel.width(a.measureWidth(this._donutMeasureFont,this._getSeries().getName())).font(this._donutMeasureFont).textColor(this._donutMeasureColor)}var r=this._shapes.sectorOuterShadow;var u=this._shapes.sectorInnerShadow;var w=this._shapes.pieSectors.length;for(var i=0;i<w;i++){r[i].visible(k);u[i].visible(l)}var x=this._interactionStatus.selected;for(var i=0,y=x.length;i<y;i++){r[x[i]].visible(false)}if(this._interactionStatus.mouseOnPieIndex!==null){var z=this._mainValueFT.display(this._values[this._interactionStatus.mouseOnPieIndex].vo.value);this._tooltip.valueLabel.font(this._toolTipMainValueFont).textColor(this._toolTipMainValueFontColor).width(a.measureWidth(this._toolTipMainValueFont,z));var D=this._textValueFT.display(this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItem);this._tooltip.dimensionLabel.font(this._toolTipTextFont).textColor(this._toolTipTextFontColor).width(a.measureWidth(this._toolTipTextFont,D));var E=this._subValueFT.display(this._values[this._interactionStatus.mouseOnPieIndex].percent);this._tooltip.percentLabel.font(this._toolTipSubValueFont).textColor(this._toolTipSubValueFontColor).width(a.measureWidth(this._toolTipSubValueFont,E))}}this.getTooltipFontStyle();this._refresh()},_reset:function(){delete this._values;this._values=[];this._resetShapes()},_resetShapes:function(){var l=this.getLayer();var s=this._shapes.pieSectors;var g=this._shapes.sectorInnerShadow;var o=this._shapes.sectorOuterShadow;for(var i=0,h=s.length;i<h;i++){l.removeShape(s[i]);l.removeShape(o[i]);l.removeShape(g[i])}l.removeShape(this._shapes.centerCircle);l.removeShape(this._shapes.measureLabel);l.removeShape(this._shapes.subChartTitle);l.removeShape(this._tooltip.shape);l.removeShape(this._tooltip.dimensionLabel);l.removeShape(this._tooltip.valueLabel);l.removeShape(this._tooltip.percentLabel);delete this._shapes;this._shapes={pieSectors:[],centerCircle:null,measureLabel:null,sectorInnerShadow:[],sectorOuterShadow:[],cover:null,subChartTitle:null};delete this._tooltip;this._tooltip={shape:null,dimensionLabel:null,valueLabel:null,percentLabel:null}},_refresh:function(){this.getLayer().setNeedsDisplay()},_mouseMoveOnPie:function(g){this._moveOnPie(g.currentLocalXY())},_mouseDownOnPie:function(g){this._clickOnPie(g.currentLocalXY())},_touchStartOnPie:function(g){var h=g.targetTouches().item(0);this._moveOnPie(h.localXY())},_touchEndOnPie:function(g){if(g.changedTouches().length()!=1){return}var h=g.changedTouches().item(0);this._clickOnPie(h.localXY())},_touchMoveOnPie:function(g){if(g.targetTouches().length()!=1){return}var h=g.targetTouches().item(0);this._moveOnPie(h.localXY())},_getPieIndexByPos:function(p){var g=null;if(this._type==this._donutType&&this._shapes.centerCircle.doPointInTest(p)){return g}for(var i=0;i<this._shapes.pieSectors.length;i++){if(this._shapes.pieSectors[i].doPointInTest(p)){g=i;break}}return g},_moveOnPie:function(p){var g=this._getPieIndexByPos(p);var l=this._interactionStatus.mouseOnPieIndex;this._interactionStatus.mouseOnPieIndex=g;if(this._interactionStatus.mouseOnPieIndex==null){this._hideTooltip();return}if(l!=this._interactionStatus.mouseOnPieIndex){this._hideTooltip();this._showTooltip()}return{dimensionAxisIndex:0,dimensionIndex:0,dimensionItemIndex:this._values[g].vo.dimensionItemIndex,measureIndex:this._values[g].vo.measureIndex,dimensionLabel:this._values[g].vo.dimensionItem,measureValue:this._values[g].vo.value}},_clickOnPie:function(p){var l=this.getLayer();var g=this._getPieIndexByPos(p);var s=null;for(var i=0;i<this._interactionStatus.selected.length;i++){if(this._interactionStatus.selected[i]===g){s=i;break}}if(g!=null){if(s==null){if(!this._allSelectable){return}if(this._selectionMode==='single'){this._deselectPies(this._interactionStatus.selected);this._interactionStatus.selected=[];s=null}this._interactionStatus.selected.push(g);this._selectPie(g);var h=[];for(var i=0,j=this._interactionStatus.selected.length;i<j;i++){var k=this._interactionStatus.selected[i];var m={measureIndex:this._values[k].vo.measureIndex,dimensionLabel:this._values[k].vo.dimensionItem,measureValue:this._values[k].vo.value};if(T.isExist(this._values[k].vo.dimensionPath)){m.dimensionPath=this._values[k].vo.dimensionPath}else{m.dimensionItemIndex=this._values[k].vo.dimensionItemIndex}h.push(m)}return h}else{if(!this._allDeSelectable){return}this._interactionStatus.selected.splice(s,1);this._deselectPies([g])}}else{if(!this._allDeSelectable){return}this._deselectPies(this._interactionStatus.selected);this._interactionStatus.selected=[]}},_showTooltip:function(){this._shapes.measureLabel.visible(false);var g=this._shapes.pieSectors[this._interactionStatus.mouseOnPieIndex];var p=(g.endAngle()+g.startAngle())/2;var r=this._meta.radiusInner*1.2;var h;var i=this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItemIndex;this._tooltip.shape.reset();this._tooltip.shape.visible(true).arc(this._meta.center,this._meta.radiusInner,p-0.15,p+0.15,false).lineTo(this._meta.center.x+r*M.cos(p),this._meta.center.y+r*M.sin(p)).shadow({offsetX:0,offsetY:0,blur:5,color:'#000000'});this._tooltip.shape.fillingColor('#FFFFFF');h=sap.common.globalization.NumericFormatManager.getFormat(this._toolTipMainValueFormatString[i]);var v=T.isExist(h)?h.display(this._values[this._interactionStatus.mouseOnPieIndex].vo.value):this._values[this._interactionStatus.mouseOnPieIndex].vo.value;var j=a.measureText(this._toolTipMainValueFont,v).height;this._tooltip.valueLabel.visible(true).width(a.measureWidth(this._toolTipMainValueFont,v)).text(v).font(this._toolTipMainValueFont).textColor(this._toolTipMainValueFontColor).center([this._meta.center.x,this._meta.center.y]);h=sap.common.globalization.NumericFormatManager.getFormat(this._toolTipTextFormatString[i]);var k=T.isExist(h)?h.display(this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItem):this._values[this._interactionStatus.mouseOnPieIndex].vo.dimensionItem;var l=a.measureWidth(this._toolTipTextFont,k);var u=a.measureText(this._toolTipTextFont,t).height;var m=this._meta.radiusInner-j/2;var s=true;if(m<u){s=false}if(l>(this._meta.radiusInner*2-u)){var n='r';var o=a.measureWidth(this._toolTipTextFont,this._truncReplacement);var q=a.measureText(this._toolTipTextFont,n).width;var w=M.floor((this._meta.radiusInner*2-u-o)/q);k=k.substring(0,w)+this._truncReplacement}this._tooltip.dimensionLabel.visible(s).width(a.measureWidth(this._toolTipTextFont,k)).text(k).font(this._toolTipTextFont).textColor(this._toolTipTextFontColor).bottomCenter([this._tooltip.valueLabel.topCenter().x,this._tooltip.valueLabel.topCenter().y-j/4]);h=sap.common.globalization.NumericFormatManager.getFormat(this._toolTipSubValueFormatString[i]);var x=T.isExist(h)?h.display(this._values[this._interactionStatus.mouseOnPieIndex].percent):this._values[this._interactionStatus.mouseOnPieIndex].percent;this._tooltip.percentLabel.visible(true).width(a.measureWidth(this._toolTipSubValueFont,x)).text(x).font(this._toolTipSubValueFont).textColor(this._toolTipSubValueFontColor).topCenter([this._tooltip.valueLabel.bottomCenter().x,this._tooltip.valueLabel.bottomCenter().y+j/4]);this._refresh()},_hideTooltip:function(){if(!this._tooltip||this._tooltip.shape==null){return}this._tooltip.shape.visible(false);this._tooltip.dimensionLabel.visible(false);this._tooltip.valueLabel.visible(false);this._tooltip.percentLabel.visible(false);this._shapes.measureLabel.visible(this._centralSeriesNameVisible);this._refresh()},_selectPie:function(i){var p=this._shapes.pieSectors[i];var g=this._shapes.sectorInnerShadow[i];var h=this._innerShadowBlur;var r=this._meta.radiusOutter;var s=this;if(this._isShowOuterShadow){s._shapes.sectorOuterShadow[i].visible(false)}s._refresh();var j=(p.endAngle()+p.startAngle())/2;A.animate({values:[{type:'POINT',from:[s._meta.center.x,s._meta.center.y],to:[s._meta.center.x+10*M.cos(j),s._meta.center.y+10*M.sin(j)]}],duration:200,onStep:function(v){var k={x:v[0][0],y:v[0][1]};p.center(k);g.center(k).fillingColor({t:'rg',s:{c:k,r:r},e:{c:k,r:r-h},st:[{o:0,v:'#000'},{o:1,v:'#fff'}]});s._refresh()}})},_deselectPies:function(g){var h=this._innerShadowBlur;var r=this._meta.radiusOutter;var s=this;var j=[];for(var i=0;i<g.length;i++){var p=this._shapes.pieSectors[g[i]];j.push({type:'POINT',from:[p.center().x,p.center().y],to:[s._meta.center.x,s._meta.center.y]})}A.animate({values:j,duration:200,onStep:function(v){var p,k,l;for(var i=0;i<g.length;i++){l={x:v[i][0],y:v[i][1]};k=s._shapes.sectorInnerShadow[g[i]];k.center(l).fillingColor({t:'rg',s:{c:l,r:r},e:{c:l,r:r-h},st:[{o:0,v:'#000'},{o:1,v:'#fff'}]});p=s._shapes.pieSectors[g[i]];p.center(l)}s._refresh()},onComplete:function(){var k=s._isShowOuterShadow;for(var i=0;i<g.length;i++){if(k){s._shapes.sectorOuterShadow[g[i]].visible(true)}}}})},updateProperties:function(p){this._selectionMode=p.selectionMode;if(this._selectionMode=='single'&&this._interactionStatus.selected.length>1){var u=this._interactionStatus.selected.slice(0,this._interactionStatus.selected.length-1);this._interactionStatus.selected.splice(0,this._interactionStatus.selected.length-1);this._deselectPies(u)}this._colorList=p._additional.colorList;for(var i=0,l=this._shapes.pieSectors.length;i<l;i++){this._values[i].color=this._colorList[this._values[i].vo.dimensionItemIndex];this._shapes.pieSectors[i].fillingColor(this._values[i].color)}this._type=p.pieType;this._centralSeriesNameVisible=(this._type===this._donutType)&&(!this._multiMode);if(this._type==this._pieType){this._shapes.centerCircle.visible(false)}else{this._shapes.centerCircle.visible(true)}this._isShowInnerShadow=p.isShowPieInnerShadow;this._isShowOuterShadow=p.isShowPieOuterShadow;this._toolTipTextFont=p.tooltip.text.font;this._toolTipTextFontColor=p.tooltip.text.color;this._toolTipTextFormatString=p.tooltip.text.numberFormat;this._toolTipTextFormatString=p._additional.tooltipeTextNumberFormat;this._toolTipMainValueFont=p.tooltip.mainValue.font;this._toolTipMainValueFontColor=p.tooltip.mainValue.color;this._toolTipMainValueFormatString=p.tooltip.mainValue.numberFormat;this._toolTipMainValueFormatString=p._additional.tooltipeMainValueNumberFormat;this._toolTipSubValueFont=p.tooltip.subValue.font;this._toolTipSubValueFontColor=p.tooltip.subValue.color;this._toolTipSubValueFormatString=p.tooltip.subValue.numberFormat;this._toolTipSubValueFormatString=p._additional.tooltipeSubValueNumberFormat;this._refresh()},updateOptions:function(p){this._resetShapes();this._shapes={pieSectors:[],centerCircle:null,measureLabel:null,sectorInnerShadow:[],sectorOuterShadow:[],cover:null,};this._isShowInnerShadow=false;this._isShowOuterShadow=false;this._interactionStatus={mouseDown:false,mouseOnPieIndex:null,selected:[]};this._tooltip={shape:null,dimensionLabel:null,valueLabel:null,percentLabel:null};this._parseOptions(p)},highlightOnPoint:function(p){var g=this._clickOnPie(p);return g},hoverOnPoint:function(p){var g=this._moveOnPie(p);return g}});return f});sap.riv.module({qname:'sap.riv.viz.shared.axis.BasicAxisRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.PositionCalculator',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Line',version:'1.0.0'},{qname:'sap.riv.graphics.shape.TextLine',version:'1.0.0'}],function Setup(O,M,T,a,F,L,P,b,c,d){var e=function(o){this._baxr_options=o;this._labelMetrics={top:2,left:2,right:2,bottom:2};this._direction='horizontal';this._showMajorTicks=false;this._showMinorTicks=false;this._minorDivisions=3;this._majorMarkSize=8;this._minorMarkSize=4;this._showAxisLine=true;this._lineThickness=1;this._lineColor='#ffffff';this._textMargin={top:4,left:4,right:4,bottom:4};this._position='hb';this._hideOverlappingLabels=true;this._axisMatrics={top:0,right:0,left:0,bottom:0};this._title={show:false,value:'',style:'bold 13px Arial',color:'#ffffff',formatString:'',margin:{top:4,left:4,right:4,bottom:4}};this._labels={show:true,itemsValue:[],color:'#ffffff',font:'normal 11px Arial',formatString:'',itemsPosition:[]};this._shapeRenderer={title:null,axisLine:null,majorTicks:[],minorTicks:[],labels:[]};this._visibleStart=0;this._visibleEnd=Number.POSITIVE_INFINITY;this._scaled=false;this._baxr_initialize()};e.prototype._baxr_initialize=function(){var o=this._baxr_options;this._position=a.isExist(o.position)?o.position:'hb';this._lineScaling=a.isExist(o.lineScaling)?o.lineScaling:'linear';this._distance=o.distance;this._direction=a.isExist(o.direction)?o.direction:'horizontal';this._lineColor=a.isExist(o.lineColor)?o.lineColor:this._lineColor;this._labels.color=a.isExist(o.labelColor)?o.labelColor:this._labels.color;this._labels.font=a.isExist(o.labelFont)?o.labelFont:this._labels.font;this._labels.formatString=(a.isExist(o.labelsFormatString)&&o.labelsFormatString.length!==0)?o.labelsFormatString:this._labels.formatString;this._lineThickness=a.isExist(o.lineThickness)?o.lineThickness:this._lineThickness;this._showMajorTicks=a.isExist(this._baxr_options.showMajorTicks)?this._baxr_options.showMajorTicks:false;;this._showMinorTicks=a.isExist(this._baxr_options.showMinorTicks)?this._baxr_options.showMinorTicks:false;if(a.isExist(o.showTitle)){this._title.show=o.showTitle;if(a.isExist(o.title)){this._title.value=o.title}if(a.isExist(o.titleFont)){this._title.style=o.titleFont}if(a.isExist(o.titleColor)){this._title.color=o.titleColor}if(a.isExist(o.titleNumberFormat)){this._title.formatString=o.titleFormatString}this._titleFT=sap.common.globalization.NumericFormatManager.getFormat(this._title.formatString)}var l=T.measureWidth(this._labels.font,'M');var f=M.round(0.2*l);this._textMargin={top:f,left:f+2,right:f,bottom:f};var t=T.measureWidth(this._title.style,'M');var g=M.round(0.2*t);this._title.margin={top:g,bottom:g,left:g,right:g}};e.prototype.setLayer=function(l){this._layer=l;l.clipToBounds(true);var f=l.bounds();this._subLayer=new L({anchor:{x:0,y:0},size:{w:f.width,h:f.height}});this._layer.addSubLayer(this._subLayer)};e.prototype.getSubLayer=function(){return this._subLayer};e.prototype.getPreferredSize=function(){return this._getPreferredSize()};e.prototype._getPreferredSize=function(){var t=T;var h=0;var w=0;if(this._position=='vl'||this._position=='vr'){w=this._measureWidth();h=this._distance;this._axisMatrics.bottom=this._axisMatrics.top=t.measureHeight(this._labels.font)/2;h+=this._axisMatrics.top;h+=this._axisMatrics.bottom}else{h=this._measureHeight();w=this._distance;this._axisMatrics.left=t.measureWidth(this._labels.font,this._labels.itemsValue[0].value())/2;this._axisMatrics.right=t.measureWidth(this._labels.font,this._labels.itemsValue[0].value())/2;w+=this._axisMatrics.left;w+=this._axisMatrics.right}return{width:w,height:h}};e.prototype.getPreferredWidth=function(){if(this._position=='vl'||this._position=='vr'){this._preferredWidth=this._measureWidth();return this._preferredWidth}else{if(a.isExist(this._distance)&&this._distance!=0){this._preferredWidth=this._distance;this._preferredWidth+=this._axisMatrics.left;this._preferredWidth+=this._axisMatrics.right;return this._preferredWidth}return 0}};e.prototype.getPreferredHeight=function(){if(this._position=='hb'||this._position=='ht'){this._preferredHeight=this._measureHeight();return this._preferredHeight}else{if(a.isExist(this._distance)&&this._distance!=0){this._preferredHeight=this._distance;this._preferredHeight+=this._axisMatrics.top;this._preferredHeight+=this._axisMatrics.bottom;return this._preferredHeight}return 0}};e.prototype._measureHeight=function(){var t=T;var h=0;if(this._showMajorTicks){if(this._showMinorTicks){if(this._majorMarkSize>=this._minorMarkSize&&this._majorMarkSize>=this._lineThickness){h+=this._majorMarkSize}else if(this._majorMarkSize<this._minorMarkSize&&this._minorMarkSize>=this._lineThickness){h+=this._minorMarkSize}else{h+=this._lineThickness}}else{if(this._majorMarkSize>=this._lineThickness){h+=this._majorMarkSize}else{h+=this._lineThickness}}}else if(this._showMinorTicks){if(this._minorMarkSize>=this._lineThickness){h+=this._minorMarkSize}else{h+=this._lineThickness}}else{h+=this._lineThickness}h+=this._textMargin.top;if(this._direction==='vertical'){}else if(!this._isLabelHorizontal()){this._direction='vertical'}else{this._direction='horizontal'}if(this._direction=='horizontal'){h+=t.measureHeight(this._labels.font)}else{h+=this._getLongestWidth()}h+=this._textMargin.bottom;if(this._title.show){h+=this._title.margin.top;h+=t.measureHeight(this._title.style);h+=this._title.margin.bottom}return h};e.prototype._isLabelHorizontal=function(){if(this._position=='vl'||this._position=='vr'){return true}var t=T;var l=this._labels.itemsPosition;var f=t.measureWidth(this._labels.font,this._labels.itemsValue[0].value());var g=l[0];var r=t.measureWidth(this._labels.font,this._labels.itemsValue[this._labels.itemsValue.length-1].value());var h=l[l.length-1];var w=0;var p=0;var j=true;if(g!=0&&(f/2>g||r/2>this._distance-h)){j=false}if(this._direction=='horizontal'&&j){for(var i=1,k=this._labels.itemsValue,m=k.length;i<m;i++){w=t.measureWidth(this._labels.font,k[i].value());p=l[i];if((g+f/2)>(p-w/2)){j=false;break}f=w;g=p}}else{return false}if(j)return true;return false};e.prototype._measureWidth=function(){var t=T;var w=0;if(this._title.show){w+=this._title.margin.top;w+=t.measureHeight(this._title.style);w+=this._title.margin.bottom}if(this._showMajorTicks){if(this._showMinorTicks){if(this._majorMarkSize>=this._minorMarkSize&&this._majorMarkSize>=this._lineThickness){w+=this._majorMarkSize}else if(this._majorMarkSize<this._minorMarkSize&&this._minorMarkSize>=this._lineThickness){w+=this._minorMarkSize}else{w+=this._lineThickness}}else{if(this._majorMarkSize>=this._lineThickness){w+=this._majorMarkSize}else{w+=this._lineThickness}}}else if(this._showMinorTicks){if(this._minorMarkSize>=this._lineThickness){w+=this._minorMarkSize}else{w+=this._lineThickness}}else{w+=this._lineThickness}w+=this._textMargin.right;w+=this._getLongestWidth();w+=this._textMargin.left;return w};e.prototype.draw=function(r){if(!r){this._resetShapes();this.createRenderer();if(this._scaled===false){this.getSubLayer().size(this._layer.size());this.getSubLayer().position({x:0,y:0})}}if(this._position=='hb'||this._position=='ht'){if(!a.isExist(this._preferredHeight)||this._preferredHeight==0)this._preferredHeight=this._measureHeight()}else{if(!a.isExist(this._preferredWidth)||this._preferredWidth==0)this._preferredWidth=this._measureWidth()}this._draw(this.getSubLayer())};e.prototype._draw=function(l){var t=T;var f=0;if(this._position=='hb'){f+=this._drawLineAndTick(l,f);f+=this._textMargin.top;this._drawLabels(l,f);if(this._direction=='horizontal'){f+=t.measureHeight(this._labels.font)}else{f+=this._getLongestWidth()}f+=this._textMargin.bottom;if(this._title.show){f+=this._title.margin.top;this._drawAxisTitle(l,(this._axisMatrics.left+this._distance+this._axisMatrics.right)/2,f);f+=t.measureHeight(this._title.style);f+=this._title.margin.bottom}}else if(this._position=='ht'){if(this._title.show){f+=this._title.margin.top;this._drawAxisTitle(l,(this._axisMatrics.left+this._distance+this._axisMatrics.right)/2,f);f+=t.measureHeight(this._title.style);f+=this._title.margin.bottom}f+=this._textMargin.top;this._drawLabels(l,f);if(this._direction=='horizontal'){f+=t.measureHeight(this._labels.font)}else{f+=this._getLongestWidth()}f+=this._textMargin.bottom;f+=this._drawLineAndTick(l,f)}else if(this._position=='vl'){if(this._title.show){f+=this._title.margin.top;this._drawAxisTitle(l,f,(this._axisMatrics.top+this._distance+this._axisMatrics.bottom)/2);f+=t.measureHeight(this._title.style);f+=this._title.margin.bottom}var g=this._axisMatrics.top;f+=this._textMargin.left;f+=this._getLongestWidth();this._drawLabels(l,f);f+=this._textMargin.right;f+=this._drawLineAndTick(l,f)}else if(this._position=='vr'){var g=this._axisMatrics.top;f+=this._drawLineAndTick(l,f);f+=this._textMargin.left;this._drawLabels(l,f);f+=this._getLongestWidth();f+=this._textMargin.right;if(this._title.show){f+=this._title.margin.top;this._drawAxisTitle(l,f,(this._axisMatrics.top+this._distance+this._axisMatrics.bottom)/2);f+=t.measureHeight(this._title.style);f+=this._title.margin.bottom}}};e.prototype.createRenderer=function(){this._shapeRenderer.backgroundAxisLine=this._layer.addShape(new c());var s=this.getSubLayer();if(this._title.show){this._shapeRenderer.title=s.addShape(new d())}this._shapeRenderer.axisLine=s.addShape(new c());if(this._showMajorTicks){var m=this.getMajorTicks();for(var i=0,l=m.length;i<l;i++){this._shapeRenderer.majorTicks[i]=s.addShape(new c());if(i==0){this._shapeRenderer.majorTicks[i].visible(false)}}}if(this._showMinorTicks){var f=this.getMinorTicks();for(var i=0,l=f.length;i<l;i++){this._shapeRenderer.minorTicks[i]=s.addShape(new c())}}for(var i=0,g=this._labels.itemsValue,l=g.length;i<l;i++){this._shapeRenderer.labels[i]=s.addShape(new d())}};e.prototype._drawLineAndTick=function(l,f){if(this._showMajorTicks){if(this._showMinorTicks){if(this._majorMarkSize>=this._minorMarkSize&&this._majorMarkSize>=this._lineThickness){this._drawLine(l,f+this._majorMarkSize/2);this._drawMajorTickMarks(l,f+this._majorMarkSize/2);this._drawMinorTickMarks(l,f+this._majorMarkSize/2);f+=this._majorMarkSize}else if(this._majorMarkSize<this._minorMarkSize&&this._minorMarkSize>=this._lineThickness){this._drawLine(l,f+this._minorMarkSize/2);this._drawMajorTickMarks(l,f+this._minorMarkSize/2);this._drawMinorTickMarks(l,f+this._minorMarkSize/2);f+=this._minorMarkSize}else{this._drawLine(l,f+this._lineThickness/2);this._drawMajorTickMarks(l,f+this._lineThickness/2);this._drawMinorTickMarks(l,f+this._lineThickness/2);f+=this._lineThickness}}else{if(this._majorMarkSize>this._lineThickness){this._drawLine(l,f+this._majorMarkSize/2);this._drawMajorTickMarks(l,f+this._majorMarkSize/2);f+=this._majorMarkSize}else{this._drawLine(l,f+this._lineThickness/2);this._drawMajorTickMarks(l,f+this._lineThickness/2);f+=this._lineThickness}}}else if(this._showMinorTicks){if(this._minorMarkSize>=this._lineThickness){this._drawLine(l,f+this._minorMarkSize/2);this._drawMinorTickMarks(l,f+this._minorMarkSize/2);f+=this._minorMarkSize}else{this._drawLine(l,f+this._lineThickness/2);this._drawMinorTickMarks(l,f+this._lineThickness/2);f+=this._lineThickness}}else{f+=this._drawLine(l,f+this._lineThickness/2)}return f};e.prototype._drawLine=function(l,f){if(this._showAxisLine){var g=this._shapeRenderer.axisLine;g.color(this._lineColor);g.width(this._lineThickness);if(this._position=='hb'||this._position=='ht'){g.from({x:this._axisMatrics.left,y:f}).to({x:this._axisMatrics.left+this._distance,y:f})}else{g.from({x:f,y:this._axisMatrics.top}).to({x:f,y:this._axisMatrics.top+this._distance})}var h=this._shapeRenderer.backgroundAxisLine;h.color(this._lineColor);h.width(this._lineThickness);if(this._position=='hb'||this._position=='ht'){h.from({x:this._axisMatrics.left,y:f}).to({x:this._layer.size().width-this._axisMatrics.right,y:f})}else{h.from({x:f,y:this._axisMatrics.top}).to({x:f,y:this._layer.size().height-this._axisMatrics.bottom})}return this._lineThickness}return 0};e.prototype._drawLabel=function(r,l,v,x,y,f){if(this._direction=='horizontal'){r.visible(true).width(T.measureWidth(this._labels.font,v)).text(v).font(this._labels.font).textColor(this._labels.color);if(f=='topCenter')r.topCenter([x,y]);else if(f=='rightCenter')r.rightCenter([x,y]);else if(f=='leftCenter'){r.leftCenter([x,y])}}else{var t=T;r.visible(true).font(this._labels.font).textColor(this._labels.color);if(this._position=='hb'){r.width(t.measureWidth(this._labels.font,v)).translate(x,y).text(v).rightCenter([0,0]).rotate(-M.PI/2)}else if(this._position=='ht'){r.width(this._longestWidth).translate(x,y+this._longestWidth).text(v).leftCenter([0,0]).rotate(3*M.PI/2)}}};e.prototype._drawLabels=function(l,f){var m=this.getMajorTicks();if(this._position=='hb'){var g=this._axisMatrics.left;for(var i=0,h=this._labels.itemsValue,j=m.length;i<j;i++){if(h[i].visible()){this._drawLabel(this._shapeRenderer.labels[i],l,h[i].value(),m[i],f,'topCenter')}}}else if(this._position=='ht'){var g=this._axisMatrics.left;for(var i=0,h=this._labels.itemsValue,j=m.length;i<j;i++){if(h[i].visible()){this._drawLabel(this._shapeRenderer.labels[i],l,h[i].value(),m[i],f,'topCenter')}}}else if(this._position=='vl'){var k=this._axisMatrics.top;for(var i=0,h=this._labels.itemsValue,j=m.length;i<j;i++){if(h[i].visible()){this._drawLabel(this._shapeRenderer.labels[i],l,h[i].value(),f,m[i],'rightCenter')}}}else{var k=this._axisMatrics.top;for(var i=0,h=this._labels.itemsValue,j=m.length;i<j;i++){if(h[i].visible()){this._drawLabel(this._shapeRenderer.labels[i],l,h[i].value(),f,m[i],'leftCenter')}}}};e.prototype._drawSignalTickMark=function(r,l,x,y,t){r.color(this._lineColor);r.width(this._lineThickness);if(this._position=='hb'||this._position=='ht'){r.from({x:x,y:y-t/2}).to({x:x,y:y+t/2})}else{r.from({x:x-t/2,y:y}).to({x:x+t/2,y:y})}};e.prototype._drawMajorTickMarks=function(l,f){var m=this.getMajorTicks();if(this._position=='hb'||this._position=='ht'){for(var i=0,g=m.length;i<g;i++){this._drawSignalTickMark(this._shapeRenderer.majorTicks[i],l,m[i],f,this._majorMarkSize)}}else{for(var i=0,g=m.length;i<g;i++){this._drawSignalTickMark(this._shapeRenderer.majorTicks[i],l,f,m[i],this._majorMarkSize)}}};e.prototype._drawMinorTickMarks=function(l,f){var m=this.getMinorTicks();if(this._position=='hb'||this._position=='ht'){for(var i=0,g=m.length;i<g;i++){this._drawSignalTickMark(this._shapeRenderer.minorTicks[i],l,m[i],f,this._minorMarkSize)}}else{for(var i=0,g=m.length;i<g;i++){this._drawSignalTickMark(this._shapeRenderer.minorTicks[i],l,f,m[i],this._minorMarkSize)}}};e.prototype._drawAxisTitle=function(l,x,y){if(this._title.show){var f=this._shapeRenderer.title;var g=a.isExist(this._titleFT)?this._titleFT.display(this._title.value):this._title.value;if(this._position=='hb'||this._position=='ht'){f.visible(true).width(T.measureWidth(this._title.style,g)).text(g).font(this._title.style).textColor(this._title.color).topCenter([x,y])}else{f.visible(true).width(T.measureWidth(this._title.style,g)).text(g).font(this._title.style).textColor(this._title.color);if(this._position=='vl'){f.translate(x,y).topCenter([0,0]).rotate(-M.PI/2)}else if(this._position=='vr'){f.translate(x,y).topCenter([0,0]).rotate(3*M.PI/2)}}}};e.prototype.u2p=function(v){if(this._lineScaling=="linear"){if(this._position=='hb'||this._position=='ht'){return P.calculateLinearPosition(v,this._positionMultiplier,this._minValue)}else{return this.getMajorTicks()[0]-P.calculateLinearPosition(v,this._positionMultiplier,this._minValue)}}else{if(this._position=='hb'||this._position=='ht'){return P.calculateLogarithmicPosition(v,this._positionMultiplier,this._minValue)}else{return this.getMajorTicks()[0]-P.calculateLogarithmicPosition(v,this._positionMultiplier,this._minValue)}}};e.prototype.p2u=function(p){var f=P;if(this._lineScaling=="linear"){if(this._position=='hb'||this._position=='ht'){return f.calculateLinearValue(p,this._positionMultiplier,this._minValue)-this._axisMatrics.left}else{return f.calculateLinearPosition(p,this._positionMultiplier,this._minValue)-this._axisMatrics.top}}else{if(this._position=='hb'||this._position=='ht'){return f.calculateLogarithmicValue(p,this._positionMultiplier,this._minValue)-this._axisMatrics.left}else{return f.calculateLogarithmicValue(p,this._positionMultiplier,this._minValue)-this._axisMatrics.top}}};e.prototype.getMajorTicks=function(){if(!a.isExist(this._majorTickPositions)||this._majorTickPositions.length==0){var m=this._majorTickPositions=[];var l=this._labels.itemsPosition;if(this._position=='hb'||this._position=='ht'){var f=this._axisMatrics.left;for(var i=0,g=this._labels.itemsValue,h=l.length;i<h;i++){m[i]=f+l[i]}}else{var j=this._axisMatrics.top;for(var g=this._labels.itemsValue,h=l.length,i=0;i<h;i++){m[i]=j+l[h-i-1]}}}return this._majorTickPositions};e.prototype.getMinorTicks=function(){if(!a.isExist(this._minorTickPositions)||this._minorTickPositions.length==0){var m=this._minorTickPositions=[];var f=this.getMajorTicks();var g=f[1]-f[0];var h=g/this._minorDivisions;for(var i=0,l=f.length;i<l;i++){if(i!=l-1){for(var j=0,k=this._minorDivisions-1;j<k;j++){m[i*k+j]=f[i]+h*(j+1)}}}}return this._minorTickPositions};e.prototype.getTickInterval=function(){var f=this.getMajorTicks();var t;if(f.length>1){t=M.abs(f[1]-f[0])}else{t=this._distance}return t};e.prototype.getMajorTickWidth=function(){if(this._showMajorTicks){return this._majorMarkSize}return 0};e.prototype._resetShapes=function(){var s=this._shapeRenderer;var l=this.getSubLayer();var m=this._layer;if(s.backgroundAxisLine){m.removeShape(s.backgroundAxisLine)}if(s.title){l.removeShape(s.title)}if(s.axisLine){l.removeShape(s.axisLine)}for(var i=0,f=s.majorTicks,g=f.length;i<g;i++){l.removeShape(f[i])}for(var i=0,h=s.minorTicks,g=h.length;i<g;i++){l.removeShape(h[i])}for(var i=0,j=s.labels,g=j.length;i<g;i++){l.removeShape(j[i])}};e.prototype.reset=function(){this._majorTickPositions=null;this._minorTickPositions=null;this._positionMultiplier=null;this._preferredHeight=null;this._preferredWidth=null;this._direction='horizontal'};e.prototype.position=function(x,y){this.getSubLayer().position({x:x,y:y})};e.prototype.parseOptions=function(o){if(o&&o.distance===this.distance){}};e.prototype.updateProperties=function(p){this.parseOptions()};e.prototype.getAxisWidth=function(){if(this._position=='hb'||this._position=='ht'){if(this._showMajorTicks){return this.getPreferredHeight()-this._majorMarkSize/2}else{return this.getPreferredHeight()}}else{if(this._showMajorTicks){return this.getPreferredWidth()-this._majorMarkSize/2}else{return this.getPreferredWidth()}}};e.prototype.getFirstTickOffset=function(){return this.getMajorTicks()[0]};e.prototype.getLastTickOffset=function(){var m=this.getMajorTicks();return m[m.length-1]};e.prototype.getLineThickness=function(){return this._lineThickness};e.prototype.zoom=F.noop;e.prototype._calculatePositionMultiplier=function(){if(!a.isExist(this._positionMultiplier)){this._positionMultiplier=P.generateLinearMultiplier(this._minValue,this._maxValue,this._distance)}return this._positionMultiplier};e.prototype.applyTheme=function(t){var s=b.getThemeSettings(t);var g=s.global;var f=s.axis;var h=O.extend(true,{},g,f.title);this._title.style=h['font-weight']+" "+h['font-size']+" "+h['font-family'];this._title.color=h['color'];var l=O.extend(true,{},g,f.label);this._labels.font=l['font-weight']+" "+l['font-size']+" "+l['font-family'];this._labels.color=l['color'];this._lineColor=f.lineColor;if(this._shapeRenderer.title){this._shapeRenderer.title.font(this._title.style).textColor(this._title.color)}if((this._shapeRenderer.labels)&&(this._shapeRenderer.labels.length)){for(var i=0,j=this._shapeRenderer.labels.length;i<j;i++){this._shapeRenderer.labels[i].font(this._labels.font).textColor(this._labels.color)}}if(this._shapeRenderer.axisLine){this._shapeRenderer.axisLine.color(this._lineColor)}if(this._shapeRenderer.backgroundAxisLine){this._shapeRenderer.backgroundAxisLine.color(this._lineColor)}if((this._shapeRenderer.majorTicks)&&(this._shapeRenderer.majorTicks.length)){for(var i=0,j=this._shapeRenderer.majorTicks.length;i<j;i++){this._shapeRenderer.majorTicks[i].color(this._lineColor)}}if((this._shapeRenderer.minorTicks)&&(this._shapeRenderer.minorTicks.length)){for(var i=0,j=this._shapeRenderer.minorTicks.length;i<j;i++){this._shapeRenderer.minorTicks[i].color(this._lineColor)}}};e.prototype.Label=function(){this._value='';this._visible=true};e.prototype.Label.prototype.value=function(v){if(a.isExist(v)){this._value=v;return this}return this._value};e.prototype.Label.prototype.visible=function(v){if(a.isExist(v)){this._visible=v;return this}return this._visible};return e});sap.riv.module({qname:'sap.riv.viz.pie.MultiPieModule',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.pie.BasicModule',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.SeriesGroup',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.viz.shared.multilayout.ColumnMultiLayout',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.PieRenderer',version:'1.0.0'}],function Setup(O,T,B,S,c,C,L,P){var M=O.derive(B,{events:['selectData'],constructor:function(o){this._seriesGroups=null;this._multiLayout=null;this._layoutModeType=null;this._pieRenderers=[];this._mainLayer=null;this._subLayers=[];this._hasDrawed=false;this._options=o},buildData:function(){this._data=[];var a=this._metaData.axisNum;var d=this._dataTree;var s=0;if(a===2){s=1}var b=[];var n=[];var e=this._metaData.dimension;for(var i=0,l=e.length;i<l;i++){var f=e[i];if(f.analysisAxisIndex!==s){if(b.length===0){var m=d.getSubMembersAt();var g=d.getSubMemberLabels();for(var j=0,h=m.length;j<h;j++){b.push([m[j]]);n.push([g[j]])}}else{var t=[];var o=[];for(var j=0,h=b.length;j<h;j++){var p=b[j];var q=d.getSubMembersAt(p);var r=d.getSubMemberLabels(p);for(var k=0,u=q.length;k<u;k++){t.push(p.concat(q[k]));o.push(n[j].concat(r[k]))}}b=t;n=o}}else{if(b.length===0){b.push([]);n.push([])}for(var j=0,h=b.length;j<h;j++){var p=b[j];var q=d.getSubMembersAt(p);var r=d.getSubMemberLabels(p);var v={};for(var k=0,u=q.length;k<u;k++){var w=d.getMeasuresAt(p.concat(q[k]));for(var x in w){if(w.hasOwnProperty(x)){if(!T.isExist(v[x])){v[x]={'namePath':n[j].concat(x),'data':[]}}var y=w[x].sum.result;v[x].data.push({'value':(T.isNumber(y))?y:'NaN','dimensionPath':w[x].sum.tags.dimensionPath,'measureIndex':w[x].sum.tags.measureIndex,'dimensionItem':r[k],'dimensionItemIndex':k})}}}for(var z in v){this._data.push(v[z])}}}}},initSeries:function(){var a=this._chart_options.properties.measures;var b=this._chart_options.properties.measureDefault;this._seriesGroups=[];for(var i=0,l=this._data.length;i<l;i++){var d=this._data[i];var e=new S();var o=O.extend(true,{},b,a[i]);var s=new c(o);s.setName(d.namePath.join('/'));var f=[];var g=d.data;for(var j=0,h=g.length;j<h;j++){var v=g[j];if(v.value!=='NaN'&&v.value>0){f.push(v)}}this._processData(f);s.setData(f);e.addSeries(s);this._seriesGroups.push(e)}},_processData:function(d){var r=d.slice();r.sort(function(a,b){return a-b});var m=r[r.length-1];for(var i=0,l=d.length;i<l;i++){if((d[i]/m-0.0001)<0){d[i]=0}}},bindRenderer:function(l){this._mainLayer=l;if(this._multiLayout==null){this._layoutModeType=this._options.properties.layoutMode.type;switch(this._layoutModeType){case'column':default:this._multiLayout=new C(l.size(),{'itemLength':this._seriesGroups.length,'columnLength':this._options.properties.layoutMode.columnLength});break}}for(var i=0,a=this._seriesGroups.length;i<a;i++){var s=new L({anchor:{x:0,y:0}});this._subLayers.push(s);l.addSubLayer(s);var b=this._seriesGroups[i];var p=this._pieRenderers[i];if(!T.isExist(p)){p=new P(s,this._options,true);this._pieRenderers[i]=p}else{p.resetSeriesGroup()}p.addSeriesGroup(b)}},drawSeries:function(){if(!this._hasDrawed){for(var i=0,l=this._pieRenderers.length;i<l;i++){var p=this._pieRenderers[i];p.draw()}this._hasDrawed=true}else{for(var i=0,l=this._pieRenderers.length;i<l;i++){var p=this._pieRenderers[i];p.redraw()}}if(this._defaultSelectionArmed){var d=this._chart_options.properties.selectedDataIndexes;if(this._chart_options.properties.allSelectable&&d.length>0){for(i=0;i<this._pieRenderers.length;i++){for(var j=0,a=d.length;j<a;j++){if(!this._pieRenderers[i]._shapes.pieSectors[d[j]]){continue}if(this._chart_options.properties.selectionMode.toLowerCase()==='single'&&j===1){break}this._pieRenderers[i]._selectPie(d[j]);this._pieRenderers[i]._interactionStatus.selected.push(d[j])}}}this._defaultSelectionArmed=false}var s;for(i=0,l=this._pieRenderers.length;i<l;i++){s=this._pieRenderers[i]._interactionStatus.selected;if(T.isExist(s)&&s.length>0){for(var j=0,a=s.length;j<a;j++){if(this._chart_options.properties.selectionMode.toLowerCase()==='single'&&j===1){break}this._pieRenderers[i]._selectPie(s[j])}}}},doChartLayout:function(n,s,a){s.size(n);s.position({x:0,y:0});a.size(n);a.position({x:0,y:0});this._multiLayout.updateSize(n);this._relayoutSubItems()},_relayoutSubItems:function(){if(this._multiLayout.layoutChanged()){var l=this._multiLayout.getLayoutInfo();for(var i=0,a=this._subLayers.length;i<a;i++){this._subLayers[i].position({'x':l[i].x,'y':l[i].y});this._subLayers[i].size({'width':l[i].width,'height':l[i].height})}}},updateProperties:function(p){this.callParent('updateProperties',p);var l=this._mainLayer;var n=this._options.properties.layoutMode.type;if(n!==this._layoutModeType){this._layoutModeType=n;switch(this._layoutModeType){case'column':default:this._multiLayout=new C(l.size(),{'itemLength':this._seriesGroups.length,'columnLength':this._options.properties.layoutMode.columnLength});break}}else{this._multiLayout.updateSettings(this._options.properties.layoutMode)}this._relayoutSubItems();for(var i=0,a=this._pieRenderers.length;i<a;i++){this._pieRenderers[i].updateProperties(p)}var s=this._chart_options.properties.measures;var d=this._chart_options.properties.measureDefault;var b=[];for(var i=0,a=s.length;i<a;i++){var o=O.extend(true,{},d,s[i]);b.push(o)}for(var i=0,a=this._seriesGroups.length;i<a;i++){this._seriesGroups[i].updateProperties(b)}},getSupportedAppEvents:function(){return['selectData']},clickOnPoint:function(p){for(var i=0,l=this._subLayers.length;i<l;i++){var s=this._subLayers[i];var a=s.convertPointFromSuperLayer(p);if(s.containsPoint(a)){var d=this._pieRenderers[i].highlightOnPoint(a);if(d){this.fireEvent('selectData',{name:'selectData',data:d})}}}},hoverOnPoint:function(p){for(var i=0,l=this._subLayers.length;i<l;i++){var s=this._subLayers[i];var a=s.convertPointFromSuperLayer(p);if(s.containsPoint(a)){this._pieRenderers[i].hoverOnPoint(a)}}},applyTheme:function(t){for(var i=0,l=this._pieRenderers.length;i<l;i++){this._pieRenderers[i].applyTheme(t)}},updateOptions:function(o){this.callParent('updateOptions',o);for(var i=0,l=this._pieRenderers.length;i<l;i++){var p=this._pieRenderers[i];p.updateOptions(o)}},});return M});sap.riv.module({qname:'sap.riv.viz.shared.descriptor.Descriptor',version:'1.0.0'},function Setup(){var d={getCommonChartProperties:function(){var j={type:{name:'type',supportedValueType:'String',supportedValues:'combination',defaultValue:'combination',description:'internal property to determine which chart module we should use',isExported:false},theme:{name:'theme',supportedValueType:'List',supportedValues:['classic-day','classic-night'],defaultValue:null,description:'Set theme of chart. Be noted that theme can only be updated through applyTheme().'},background:{name:'background',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:'#000000',description:'Set background color of chart.'},{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set visibility of background.'}],description:'Set background of chart.'},legend:{name:'legend',supportedValueType:'Object',supportedValues:[{name:'position',supportedValueType:'List',supportedValues:['left','right','top','bottom'],defaultValue:'right',description:'Set legend position.'},{name:'verticalOffset',supportedValueType:'Int',defaultValue:0,description:'Set vertical offset of legend only if legend position is left or right.'},{name:'horizontalOffset',supportedValueType:'Int',defaultValue:0,description:'Set horizontal offset of legend only if legend position is top or bottom.'},{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set visibility of legend.'},{name:'labelFont',supportedValueType:'Font',defaultValue:'bold 16px Arial',description:'Set label font style of legend label.'},{name:'labelColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set label color of legend label.'},{name:'titleFont',supportedValueType:'Font',defaultValue:'bold 16px Arial',description:'Set title font style of legend title.',isExported:false},{name:'titleColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set title color of legend title.',isExported:false},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set format string of legend and re-use the last one in the array.'}],description:'Set legend related properties. The labels come from measure names for Bar/Column/Line/Combination chart and dimension names for Pie chart.'},layout:{name:'layout',supportedValueType:'Object',supportedValues:[{name:'padding',supportedValueType:'IntArray[4]',defaultValue:[0,0,0,0],description:'Set padding of layout. The padding clears an area inside of chart. The corresponding directions of padding are top, right, bottom, left.'},{name:'legendFirst',supportedValueType:'Boolean',defaultValue:true,description:'Set whether the layout is legend first.',isExported:false}],description:'Set the layout related properties.'},tooltip:{name:'tooltip',supportedValueType:'Object',supportedValues:[{name:'text',supportedValueType:'Object',supportedValues:[{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font style of tooltip text. '},{name:'color',supportedValueType:'Color',defaultValue:undefined,description:'Set color of tooltip text.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:"Set number format of tooltip text."}],description:'Set display properties of tooltip text.'},{name:'mainValue',supportedValueType:'Object',supportedValues:[{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font style of tooltip main value.'},{name:'color',supportedValueType:'Color',defaultValue:undefined,description:'Set font color of tooltip main value.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:"Set number format of tooltip main value and re-use the last one in the array."}],description:'Set display properties of tooltip main value.'},{name:'subValue',supportedValueType:'Object',supportedValues:[{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font style of sub value.'},{name:'color',supportedValueType:'Color',defaultValue:undefined,description:'Set font color of tooltip sub value.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:['0.00%'],description:"Set number format of tooltip sub value."}],description:'Set display property of tooltip sub value.'}],description:'Set tooltip related properties.'},title:{name:'title',supportedValueType:'Object',supportedValues:[{name:'main',supportedValueType:'Object',supportedValues:[{name:'text',supportedValueType:'String',defaultValue:'Default Chart Title',description:'Set text value of main title.'},{name:'font',supportedValueType:'Font',defaultValue:'bold 16px Arial',description:'Set font style of main title.'},{name:'color',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set font color of main title.'},{name:'visible',supportedValueType:'Boolean',defaultValue:false,description:'Set visibility of main title.'},{name:'horizontalAlign',supportedValueType:'List',supportedValues:['center','left','right'],defaultValue:'center',description:'Set horizontal align of main title.'},{name:'formatString',supportedValueType:'String',defaultValue:'',description:'Set format string of main title.'}],description:'Set main title related properties.'},{name:'sub',supportedValueType:'Object',supportedValues:[{name:'text',supportedValueType:'String',defaultValue:'Default Sub Title',description:'Set text value of sub title.'},{name:'font',supportedValueType:'Font',defaultValue:'bold 14px Arial',description:'Set font style of sub title.'},{name:'color',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set font color of sub title.'},{name:'visible',supportedValueType:'Boolean',defaultValue:false,description:'Set visibility of sub title.'},{name:'horizontalAlign',supportedValueType:'List',supportedValues:['center','left','right'],defaultValue:'center',description:'Set horizontal align of sub title.'},{name:'formatString',supportedValueType:'String',defaultValue:'',description:'Set format string of sub title.'}],description:'Set sub title related properties.'}],description:'Set the title related properties.'},selectability:{name:'selectability',supportedValueType:'Object',supportedValues:[{name:'mode',supportedValueType:'List',supportedValues:['single','multiple','none'],defaultValue:'single',description:'Set select mode. Be noted that it cannot be updated after chart initialization.'},{name:'deSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether it can be de-selectable. Be noted that it cannot be updated after chart initialization.'},{name:'defaultSelectedItems',supportedValueType:'ObjectArray',supportedValues:[{name:'measureIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected measure items. Be noted that it cannot be updated after chart initialization.'},{name:'dimensionItemIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected dimension items. Be noted that it cannot be updated after chart initialization.'}],defaultValue:[],description:'Set default selectedItems. Be noted that it cannot be updated after chart initialization.'}],description:'Set the selectability related properties. Be noted that it cannot be updated after chart initialization.',isExported:false},xAxis:{name:'xAxis',supportedValueType:'ObjectArray',supportedValues:[{name:'xAxis member',supportedValueType:'Object',supportedValues:[{name:'title',supportedValueType:'String',defaultValue:'X1',description:'Set value of X axis title.'},{name:'lineThickness',supportedValueType:'PositiveInt',defaultValue:1,description:'set line thickness of X axis.'},{name:'lineColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set line color of X axis.'},{name:'labelColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set label color of X axis.'},{name:'titleColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set X axis title color.'},{name:'labelFont',supportedValueType:'Font',defaultValue:'normal 11px Arial',description:'Set label color of X axis.'},{name:'titleFont',supportedValueType:'Font',defaultValue:'bold 13px Arial',description:'Set label color of X axis.'},{name:'showTitle',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide X axis title.'},{name:'titleFormatString',supportedValueType:'String',defaultValue:'',description:'Set title format string.'},{name:'showMajorTicks',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide X axis majorTicks.'},{name:'showMinorTicks',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide X axis minorTicks.'},{name:'labelsFormatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set X axis labels format string, re-use the last one in the array.'},{name:'gridLine',supportedValueType:'Object',supportedValues:[{name:'showMajor',supportedValueType:'Boolean',defaultValue:undefined,description:'Show/hide major grid line and only works on value axis'},{name:'majorColor',supportedValueType:'Color',defaultValue:'#B8B8B8',description:'Set the major grid line color.'},{name:'majorThickness',supportedValueType:'Int',defaultValue:1,description:'Set the major grid line thickness.'},{name:'showMinor',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide minor grid line and only works on value axis. If showMajor is false, this option will not work'},{name:'minorColor',supportedValueType:'Color',defaultValue:'#B8B8B8',description:'Set the minor grid line color.'},{name:'minorThickness',supportedValueType:'Int',defaultValue:1,description:'Set the minor grid line thickness.'},{name:'showSub',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide sub grid line and only works on dimension axis'},{name:'subColor',supportedValueType:'Color',defaultValue:'#B8B8B8',description:'Set sub grid line color.'}],description:'Set the grid line releated properties.'+'For value axis, only showMajor and showMinor options work. If showSub is set to true on value axis, it takes effect but the behavior is unexpected.'+'For dimension axis, only showSub option works. If showMajor and showMinor options are set to true on dimension axis, it takes effect but the behavior is unexpected.'}]}],description:'Set X axis releated properties.'},yAxis:{name:'yAxis',supportedValueType:'ObjectArray',supportedValues:[{name:'yAxis member',supportedValueType:'Object',supportedValues:[{name:'title',supportedValueType:'String',defaultValue:'Y1',description:'Set value of Y axis title.'},{name:'lineColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set line color of Y axis.'},{name:'lineTickness',supportedValueType:'PositiveInt',defaultValue:1,description:'Set line thickness of Y axis.'},{name:'labelColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set label color of Y axis.'},{name:'titleColor',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set Y axis title color.'},{name:'labelFont',supportedValueType:'String',defaultValue:'normal 11px Arial',description:'Set label font style of Y axis.'},{name:'titleFont',supportedValueType:'String',defaultValue:'bold 13px Arial',description:'Set title font style of Y axis.'},{name:'showTitle',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide Y axis title.'},{name:'titleFormatString',supportedValueType:'String',defaultValue:'',description:'set the title format string.'},{name:'showMajorTicks',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide Y axis majorTicks.'},{name:'showMinorTicks',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide Y axis minorTicks.'},{name:'labelsFormatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set Y axis labels fromat string and re-use the last one in the array.'},{name:'gridLine',supportedValueType:'Object',supportedValues:[{name:'showMajor',supportedValueType:'Boolean',defaultValue:undefined,description:'Show/hide major grid line and only works on value axis'},{name:'majorColor',supportedValueType:'Color',defaultValue:'#B8B8B8',description:'Set the major grid line color.'},{name:'majorThickness',supportedValueType:'Int',defaultValue:1,description:'Set the major grid line thickness.'},{name:'showMinor',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide the minor grid line and only works on value axis. If showMajor is false, this option will not work'},{name:'minorColor',supportedValueType:'Color',defaultValue:'#B8B8B8',description:'Set minor grid line color.'},{name:'minorThickness',supportedValueType:'Int',defaultValue:1,description:'Set the minor grid line thickness.'},{name:'showSub',supportedValueType:'Boolean',defaultValue:false,description:'Show/hide sub grid line and only works on dimension axis'},{name:'subColor',supportedValueType:'Color',defaultValue:'#B8B8B8',description:'Set sub grid line color.'}],description:'Set the grid line releated properties.'+'For value axis, only showMajor and showMinor options work. If showSub is set to true on value axis, it takes effect but the behavior is unexpected.'+'For dimension axis, only showSub option works. If showMajor and showMinor options are set to true on dimension axis, it takes effect but the behavior is unexpected.'}]}],description:'Set Y axis releated properties.'},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'type',supportedValueType:'List',supportedValues:['bar','line'],defaultValue:'line',description:'Set measure type'},{name:'valueAxis',supportedValueType:'Int',defaultValue:'',description:'Set index value for the axis.'},{name:'fillColor',supportedValueType:'Color',defaultValue:undefined,description:'Set barMarker color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'An internal properties, as it does not make sense to set size per series. Set barMarker size of measure member.',isExported:false},{name:'lineMarkerSize',supportedValueType:'PositiveInt',defaultValue:10,description:'An internal properties, as it does not make sense to set size per series. Set lineMarker size of measure member.',isExported:false},{name:'lineColor',supportedValueType:'Color',defaultValue:'#000000',description:'Set line color of measure member.'},{name:'lineThickness',supportedValueType:'PositiveInt',defaultValue:1,description:'Set line thickness of measure member.'},{name:'markerSymbol',supportedValueType:'List',supportedValues:['circle','triangle','diamond'],defaultValue:'circle',description:'Set line markerSymbol of measure member.'}],description:'Set measure member related properties.'}],description:'Set measures related properties.'},visibleRange:{name:'visibleRange',supportedValueType:'Object',supportedValues:[{name:'start',supportedValueType:'Int',defaultValue:0,description:'Set start value of visible range.'},{name:'end',supportedValueType:'Int',defaultValue:Number.POSITIVE_INFINITY,description:'Set end value of visible range.'}],description:'Set the visible range releated propertie.',isExported:false}};return j},getBarDescriptor:function(){var j={theme:this.getCommonChartProperties().theme,background:this.getCommonChartProperties().background,legend:this.getCommonChartProperties().legend,layout:this.getCommonChartProperties().layout,tooltip:this.getCommonChartProperties().tooltip,title:this.getCommonChartProperties().title,selectability:{name:'selectability',supportedValueType:'Object',supportedValues:[{name:'mode',supportedValueType:'List',supportedValues:['single','none'],defaultValue:'single',description:'Set selection mode. Be noted that it cannot be updated after chart initialization.'},{name:'deSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether it can be de-selectable. Be noted that it cannot be updated after chart initialization.'},{name:'defaultSelectedItems',supportedValueType:'ObjectArray',supportedValues:[{name:'measureIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected measure items. Be noted that it cannot be updated after chart initialization.'},{name:'dimensionItemIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected dimension items. Be noted that it cannot be updated after chart initialization.'}],defaultValue:[],description:'Set default selectedItems. Be noted that it cannot be updated after chart initialization.'}],description:'Set the selectability related properties. Be noted that it cannot be updated after chart initialization.'},xAxis:this.getCommonChartProperties().xAxis,yAxis:this.getCommonChartProperties().yAxis,bar:{name:'bar',supportedValueType:'Object',supportedValues:[{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set bar marker size of bar.'}],description:'It is applied for all bar series.'},visibleRange:this.getCommonChartProperties().visibleRange,measure:{name:'measure',supportedValueType:'Object',supportedValues:[{name:'visibilityChangeable',supportedValueType:'Boolean',defaultValue:false,description:'Set the visibility changeable property.'}],description:'Set measure releated properties.',isExported:false},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'fillColor',supportedValueType:'Color',defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'An internal properties, as it does not make sense to set size per series. Set the bar marker size of measure member.',isExported:false},{name:'valueAxis',supportedValueType:'PositiveInt',defaultValue:0,description:'Set value axis of measure member.'},{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set visibility of measure member.',isExported:false}],description:'Set the measure member releated properties.'}],description:'Set the measures releated properties.'}};return j},getCombinationDescriptor:function(){var j={type:this.getCommonChartProperties().type,theme:this.getCommonChartProperties().theme,background:this.getCommonChartProperties().background,legend:this.getCommonChartProperties().legend,layout:this.getCommonChartProperties().layout,tooltip:this.getCommonChartProperties().tooltip,title:this.getCommonChartProperties().title,xAxis:this.getCommonChartProperties().xAxis,yAxis:this.getCommonChartProperties().yAxis,selectability:{name:'selectability',supportedValueType:'Object',supportedValues:[{name:'mode',supportedValueType:'List',supportedValues:['single','none'],defaultValue:'none',description:'Set select mode. Be noted that it cannot be updated after chart initialization.'},{name:'deSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether it can be de-selectable. Be noted that it cannot be updated after chart initialization.'},{name:'defaultSelectedItems',supportedValueType:'ObjectArray',supportedValues:[{name:'measureIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected measure items.'},{name:'dimensionItemIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected dimension items.'}],defaultValue:[],description:'Set default selectedItems. Be noted that it cannot be updated after chart initialization.'}],description:'Set the selectability related properties. Be noted that it cannot be updated after chart initialization.',isExported:false},line:{name:'line',supportedValueType:'Object',supportedValues:[{name:'lineMarkerSize',supportedValueType:'PositiveInt',defaultValue:10,description:'Set line marker size of series.'},{name:'lineThickness',supportedValueType:'PositiveInt',defaultValue:1,description:'Set line thinkness of series.'}],description:'Set line releated properties.'},bar:{name:'bar',supportedValueType:'Object',supportedValues:[{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set bar marker size of series.'}],description:'Set bar releated properties.'},visibleRange:this.getCommonChartProperties().visibleRange,measure:{name:'measure',supportedValueType:'Object',supportedValues:[{name:'visibilityChangeable',supportedValueType:'Boolean',defaultValue:false,description:'Set the visibility changeable property.'}],description:'Set measure releated properties.',isExported:false},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'type',supportedValueType:'List',supportedValues:['bar','line'],defaultValue:'line',description:'Set the measure type. Be noted that it cannot be updated after chart initialization.'},{name:'fillColor',supportedValueType:'Color',defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'An internal properties, as it does not make sense to set size per series. Set the bar marker size of measure member.',isExported:false},{name:'lineMarkerSize',supportedValueType:'PositiveInt',defaultValue:10,description:'An internal properties, as it does not make sense to set size per series. Set the line marker size of measure member.',isExported:false},{name:'lineColor',supportedValueType:'Color',defaultValue:undefined,description:'Set the line color of measure member.'},{name:'lineThickness',supportedValueType:'PositiveInt',defaultValue:1,description:'Set the line size of measure member.'},{name:'valueAxis',supportedValueType:'PositiveInt',defaultValue:0,description:'Set value axis of measure member.'},{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set visibility of measure member.',isExported:false},{name:'markerSymbol',supportedValueType:'List',supportedValues:['circle','triangle','diamond'],defaultValue:'circle',description:'Set marker symbol of measure member.'}],description:'Set the measure member releated properties'}],description:'Set the measures releated properties.'}};return j},getMultiPieDescriptor:function(){var j={type:this.getCommonChartProperties().type,theme:this.getCommonChartProperties().theme,background:this.getCommonChartProperties().background,legend:this.getCommonChartProperties().legend,title:this.getCommonChartProperties().title,layout:this.getCommonChartProperties().layout,pieType:{name:'pieType',supportedValueType:'List',supportedValues:['pie','donut'],defaultValue:'pie',description:'Set display type of every sub pie.'},selectionMode:{name:'selectionMode',supportedValueType:'List',supportedValues:['single','multiple'],defaultValue:'single',description:'Set the selection mode of every sub pie.'},allSelectable:{name:'allSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether every sub pie is selectable. Be noted that it cannot be updated after chart initialization.'},allDeSelectable:{name:'allDeSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether every sub pie is deselectable. Be noted that it cannot be updated after chart initialization.'},selectedDataIndexes:{name:'selectedDataIndexes',supportedValueType:'IntArray',defaultValue:[],description:'Set the default selected sector. Be noted that it cannot be updated after chart initialization.'},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'sectorColors',supportedValueType:'ColorArray',defaultValue:["#113975","#e06f00","#5a92e2","#624628","#e03c2f","#ffbe7f","#96a8c3","#a9a9a9","#830b00","#344b6d","#e2ce44","#ff6657"],description:'Color palette to be used for sectors of each sub pie.'}],description:'Set measure member for each sub pie.'}],description:'Set measure properties.'},tooltip:{name:'tooltip',supportedValueType:'Object',supportedValues:[{name:'mainValue',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:undefined,description:'Set color of tooltip main value.'},{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font of tooltip main value.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set format string of tooltip main value.'}],description:'Set properties of tooltip main value (data value) for every sub pie. '},{name:'subValue',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:undefined,description:'Set color of tooltip sub value.'},{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font of tooltip sub value.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set format string of tooltip sub value.'}],description:'Set properties of tooltip sub value (percentage) for every sub pie.'},{name:'text',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:undefined,description:'Set color of tooltip text.'},{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font of tooltip text.'},{name:'formatString',supportedValueType:'StringObject',defaultValue:[''],description:'Set format string of tooltip text.'}],description:'Set properties of tooltip text (dimension label) for every sub pie.'}],description:'Set tooltip properties for every sub pie.'},layoutMode:{name:'layoutMode',supportedValueType:'Object',supportedValues:[{name:'type',supportedValueType:'List',supportedValues:['column'],defaultValue:'column',description:'Set the layout mode of multi-pie.'},{name:'columnLength',supportedValueType:'PositiveInt',defaultValue:2,description:'Set the column number of column layout mode.'}],description:'Set layout mode of multi-pie.'},subChartTitle:{name:'subChartTitle',supportedValueType:'Object',supportedValues:[{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set the visibility of sub chart title.'},{name:'font',supportedValueType:'Font',defaultValue:'normal 14px Arial',description:'Set font of sub chart title.'},{name:'color',supportedValueType:'Color',defaultValue:'#ffffff',description:'Set color of sub chart title.'}],description:'Set sub chart title releated properties of multi-pie.'}};return j},getPieDescriptor:function(){var j={type:this.getCommonChartProperties().type,theme:this.getCommonChartProperties().theme,background:this.getCommonChartProperties().background,legend:this.getCommonChartProperties().legend,title:this.getCommonChartProperties().title,layout:this.getCommonChartProperties().layout,pieType:{name:'pieType',supportedValueType:'List',supportedValues:['pie','donut'],defaultValue:'pie',description:'Set display type of pie chart.'},selectionMode:{name:'selectionMode',supportedValueType:'List',supportedValues:['single','multiple'],defaultValue:'single',description:'Set the selection mode of pie chart.'},allSelectable:{name:'allSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether the pie chart is selectable. Be noted that it cannot be updated after chart initialization.'},allDeSelectable:{name:'allDeSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether the pie chart is deselectable. Be noted that it cannot be updated after chart initialization.'},selectedDataIndexes:{name:'selectedDataIndexes',supportedValueType:'IntArray',defaultValue:[],description:'Set the default selected sector. Be noted that it cannot be updated after chart initialization.'},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'sectorColors',supportedValueType:'ColorArray',defaultValue:["#113975","#e06f00","#5a92e2","#624628","#e03c2f","#ffbe7f","#96a8c3","#a9a9a9","#830b00","#344b6d","#e2ce44","#ff6657"],description:'Color palette to be used for sectors of each sub pie.'}],description:'Set measure member for each sub pie.'}],description:'Set measure properties.'},tooltip:{name:'tooltip',supportedValueType:'Object',supportedValues:[{name:'mainValue',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:'#000000',description:'Set color of tooltip main value.'},{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font of tooltip main value.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set format string of tooltip main value.'}],description:'Set properties of tooltip main value (data value).'},{name:'subValue',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:'#000000',description:'Set color of tooltip sub value.'},{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font of tooltip sub value.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set format string of tooltip sub value.'}],description:'Set properties of tooltip sub value (percentage).'},{name:'text',supportedValueType:'Object',supportedValues:[{name:'color',supportedValueType:'Color',defaultValue:'#000000',description:'Set color of tooltip text.'},{name:'font',supportedValueType:'Font',defaultValue:undefined,description:'Set font of tooltip text.'},{name:'formatString',supportedValueType:'StringArray',defaultValue:[''],description:'Set format string of tooltip text.'}],description:'Set properties of tooltip text (dimension label).'}],description:'Set tooltip properties of pie chart.'}};return j},getColumnDescriptor:function(){var j={type:this.getCommonChartProperties().type,theme:this.getCommonChartProperties().theme,background:this.getCommonChartProperties().background,legend:this.getCommonChartProperties().legend,layout:this.getCommonChartProperties().layout,tooltip:this.getCommonChartProperties().tooltip,title:this.getCommonChartProperties().title,xAxis:this.getCommonChartProperties().xAxis,yAxis:this.getCommonChartProperties().yAxis,visibleRange:this.getCommonChartProperties().visibleRange,selectability:{name:'selectability',supportedValueType:'Object',supportedValues:[{name:'mode',supportedValueType:'List',supportedValues:['single','none'],defaultValue:'none',description:'Set select mode. Be noted that it cannot be updated after chart initialization.'},{name:'deSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether it can be de-selectable. Be noted that it cannot be updated after chart initialization.'},{name:'defaultSelectedItems',supportedValueType:'ObjectArray',supportedValues:[{name:'measureIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected measure items.'},{name:'dimensionItemIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected dimension items.'}],defaultValue:[],description:'Set default selectedItems. Be noted that it cannot be updated after chart initialization.'}],description:'Set the selectability related properties. Be noted that it cannot be updated after chart initialization.',isExported:false},measure:{name:'measure',supportedValueType:'Object',supportedValues:[{name:'visibilityChangeable',supportedValueType:'Boolean',defaultValue:false,description:'Set the visibility changeable property.'},{name:'type',supportedValueType:'String',defaultValue:'',description:'Top level type of element shapes',isExported:false}],description:'Set the measure releated properties.',isExported:false},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'fillColor',supportedValueType:'Color',defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set the bar marker size of measure member.',isExported:false},{name:'valueAxis',supportedValueType:'PositiveInt',defaultValue:0,description:'Set value axis of measure member.'},{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set visibility of measure member.',isExported:false}],description:'Set the measure member releated properties.'}],description:'Set the measures releated properties.'},bar:{name:'bar',supportedValueType:'Object',supportedValues:[{name:'barMarkerSize',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set bar marker size of series.'}],description:'Set bar releated properties.'}};return j},getLineDescriptor:function(){var j={type:this.getCommonChartProperties().type,theme:this.getCommonChartProperties().theme,background:this.getCommonChartProperties().background,legend:this.getCommonChartProperties().legend,layout:this.getCommonChartProperties().layout,tooltip:this.getCommonChartProperties().tooltip,title:this.getCommonChartProperties().title,xAxis:this.getCommonChartProperties().xAxis,yAxis:this.getCommonChartProperties().yAxis,selectability:{name:'selectability',supportedValueType:'Object',supportedValues:[{name:'mode',supportedValueType:'List',supportedValues:['single','none'],defaultValue:'none',description:'Set select mode. Be noted that it cannot be updated after chart initialization.'},{name:'deSelectable',supportedValueType:'Boolean',defaultValue:true,description:'Set whether it can be de-selectable. Be noted that it cannot be updated after chart initialization.'},{name:'defaultSelectedItems',supportedValueType:'ObjectArray',supportedValues:[{name:'measureIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected measure items.'},{name:'dimensionItemIndex',supportedValueType:'PositiveInt',defaultValue:undefined,description:'Set default selected dimension items.'}],defaultValue:[],description:'Set default selectedItems. Be noted that it cannot be updated after chart initialization.'}],description:'Set the selectability related properties. Be noted that it cannot be updated after chart initialization.',isExported:false},line:{name:'line',supportedValueType:'Object',supportedValues:[{name:'lineMarkerSize',supportedValueType:'PositiveInt',defaultValue:10,description:'Set line marker size of series.'},{name:'lineThickness',supportedValueType:'PositiveInt',defaultValue:1,description:'Set line thinkness of series.'}],description:'Set the line releated properties.'},visibleRange:this.getCommonChartProperties().visibleRange,measure:{name:'measure',supportedValueType:'Object',supportedValues:[{name:'visibilityChangeable',supportedValueType:'Boolean',defaultValue:false,description:'Set the visibility changeable property.'}],description:'Set the measure releated properties.',isExported:false},measures:{name:'measures',supportedValueType:'ObjectArray',supportedValues:[{name:'measure member',supportedValueType:'Object',supportedValues:[{name:'fillColor',supportedValueType:'Color',defaultValue:undefined,description:'Set the fill color of measure member. if it is unspecified, we will use following color palette: [ "#113975", "#e06f00", "#5a92e2", "#624628", "#e03c2f", "#ffbe7f", "#96a8c3", "#a9a9a9", "#830b00", "#344b6d", "#e2ce44", "#ff6657" ]'},{name:'lineMarkerSize',supportedValueType:'PositiveInt',defaultValue:10,description:'An internal properties, as it does not make sense to set size per series. Set the line marker size of measure member.',isExported:false},{name:'lineColor',supportedValueType:'Color',defaultValue:undefined,description:'Set the line color of measure mmeber.'},{name:'lineThickness',supportedValueType:'PositiveInt',defaultValue:1,description:'Set the line size of measure mmeber.'},{name:'valueAxis',supportedValueType:'PositiveInt',defaultValue:0,description:'Set value axis of measure mmeber.'},{name:'visible',supportedValueType:'Boolean',defaultValue:true,description:'Set visibility of measure mmeber.',isExported:false},{name:'markerSymbol',supportedValueType:'List',supportedValues:['circle','triangle','diamond'],defaultValue:'circle',description:'Set marker symbol of measure mmeber.'}],description:'Set the measure mmeber releated properties.'}],description:'Set the measures releated properties.'}};return j},};return d});sap.riv.module({qname:'sap.riv.viz.pie.PieModule',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.pie.BasicModule',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.PieRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.SeriesGroup',version:'1.0.0'}],function Setup(O,T,B,P,S,c){var e=O.derive(B,{events:['selectData'],constructor:function(o){this._seriesGroup=null;this._pieRenderer=null;this._hasDrawed=false},buildData:function(){this._data=[];var a=this._dataTree.getSubMembersAt();var b=this._dataTree.getSubMemberLabels();var f=[];for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var m=this._metaData.measureMembers[i];for(var j=0,g=a.length;j<g;j++){var h=[a[j]];var s=this._dataTree.getMeasuresAt(h)[m].sum;f.push(s.result)}}this._processData(f);for(i=0,l=this._metaData.measureMembers.length;i<l;i++){var k=[];var m=this._metaData.measureMembers[i];for(var j=0,L=a.length;j<L;j++){var d=[a[j]];var n=this._dataTree.getMeasuresAt(d)[m].sum;var o=n.tags.dimensionPath;var p=o.length>0?o[0]:{};var v=f[j];k.push({value:T.isNumber(v)?v:'NaN',dimensionItemIndex:p.dimensionItemIndex,measureIndex:n.tags.measureIndex,dimensionItem:b[j]})}this._data.push(k)}},_processData:function(d){for(var i=0,l=d.length;i<l;i++){if(d[i]==='NaN'||d[i]<0)d[i]=0}var r=d.slice();r.sort(function(a,b){return a-b});var m=r[r.length-1];for(var i=0,l=d.length;i<l;i++){if((d[i]/m-0.0001)<0){d[i]=0}}},initSeries:function(){var a=this._chart_options.properties.measures;var m=this._metaData.measureMembers;var b=this._chart_options.properties.measureDefault;this._seriesGroup=new c();for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var o=O.extend(true,{},b,a[i]);var s=new S(o);s.setName(m[i]);var d=[];var f=this._data[i];for(var j=0,g=f.length;j<g;j++){var v=f[j];if(v.value!=='NaN'&&v.value>0){d.push(v)}}s.setData(d);this._seriesGroup.addSeries(s)}},bindRenderer:function(l){if(this._pieRenderer==null){this._pieRenderer=new P(l,this._chart_options,false)}else{this._pieRenderer.resetSeriesGroup()}this._pieRenderer.addSeriesGroup(this._seriesGroup)},drawSeries:function(){if(!this._hasDrawed){this._pieRenderer.draw();this._hasDrawed=true}else{this._pieRenderer.redraw()}if(this._defaultSelectionArmed){var d=this._chart_options.properties.selectedDataIndexes;if(this._chart_options.properties.allSelectable&&d.length>0){for(var a=0;a<d.length;a++){if(!this._pieRenderer._shapes.pieSectors[d[a]]){continue}if(this._chart_options.properties.selectionMode.toLowerCase()==='single'&&a===1){break}this._pieRenderer._selectPie(d[a]);this._pieRenderer._interactionStatus.selected.push(d[a])}}this._defaultSelectionArmed=false}else{var s=this._pieRenderer._interactionStatus.selected;if(T.isExist(s)&&s.length>0){for(var i=0;i<s.length;i++){if(this._chart_options.properties.selectionMode.toLowerCase()==='single'&&i===1){break}this._pieRenderer._selectPie(s[i])}}}},doChartLayout:function(n,s,a){s.size(n);s.position({x:0,y:0});a.size(n);a.position({x:0,y:0})},updateProperties:function(p){this.callParent('updateProperties',p);this._pieRenderer.updateProperties(p);var s=this._chart_options.properties.measures;var d=this._chart_options.properties.measureDefault;var a=[];for(var i=0,l=s.length;i<l;i++){var o=O.extend(true,{},d,s[i]);a.push(o)}this._seriesGroup.updateProperties(a)},getSupportedAppEvents:function(){return['selectData']},clickOnPoint:function(p){if(this._pieRenderer==null){O.error('No renderer to handle event!')}var d=this._pieRenderer.highlightOnPoint(p);if(d){this.fireEvent('selectData',{name:'selectData',data:d})}},hoverOnPoint:function(p){if(this._pieRenderer==null){O.error('No renderer to handle event!')}this._pieRenderer.hoverOnPoint(p)},applyTheme:function(t){this._pieRenderer.applyTheme(t)},updateOptions:function(o){this.callParent('updateOptions',o);this._pieRenderer.updateOptions(o)},});return e});sap.riv.module({qname:'sap.riv.viz.shared.title.TitleCanvasComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.graphics.shape.TextLine',version:'1.0.0'}],function Setup(O,T,a,C,P,b,c,N){var d={main:{"text":'Default Chart Title',"font":'bold 16px Arial',"color":'#ffffff',"horizontalAlign":'center',"formatString":'',"visible":false},sub:{"text":'Default Sub Title',"font":'normal 14px Arial',"color":'#ffffff',"horizontalAlign":'center',"formatString":'',"visible":false}};var t=function(s){return s.replace(/^\s\s*/,'').replace(/\s\s*$/,'')};var e=function(i,p){this._text=i;this._lineCapacity=p.lineWidth;this._wordWrap=p.wordWrap};e.prototype={constructor:this,getLines:function(){this._lineData=[];this._text=t(this._text+'');var g=this._text.split('');if(this._wordWrap){if(g.length<=this._lineCapacity){this._lineData.push(this._text);return this._lineData}var s=' ';var h=[];for(var i=0;i<g.length;i++)if(g[i]===s)h.push(i);h.push(g.length);var j=0;var k=this._lineCapacity;var l,m,p;for(i=0;i<h.length;i++){m=h[i]-j;if(m===k){l=g.slice(j,h[i]).join('');this._lineData.push(l);j=h[i];p=h[i]}else if(m>k){l=g.slice(j,h[i-1]).join('');this._lineData.push(l);j=h[i-1]+1;p=h[i-1]}else{continue}}if(T.isDefined(p)&&t(this._lineData.join('')).length<g.length){l=g.slice(p+1,g.length);this._lineData.push(l.join(''))}return this._lineData}},setText:function(i){this._text=i},setWidth:function(w){this._lineCapacity=w},setWordWrapEnabled:function(g){this._wordWrap=g}};var f=O.derive(C,{constructor:function(o){this._options=o.titleOptions;this._canvasSurface=this.getCanvasSurface();this._layer=this._canvasSurface.getRootLayer();this._textShapes=[];this._anchor={x:0,y:0};this._textProcessor;this._theme},paint:function(g){for(var i=0;i<this._textShapes.length;i++){this._layer.removeShape(this._textShapes[i])}if(!g||!g.main||!g.main.visible){this._refresh();return}this._textShapes.splice(0,this._textShapes.length);this._anchor={x:0,y:0};var m=this.wrapWord(g.main.text,this.getLineCapacity(g.main.font));var h;for(i=0;i<m.length;i++){h=this._layer.addShape(new c());this.paintln({text:m[i],font:g.main.font,color:g.main.color,align:g.main.horizontalAlign},h);this._textShapes.push(h)}if(g.sub&&g.sub.visible){var s=this.wrapWord(g.sub.text,this.getLineCapacity(g.sub.font));var j;for(i=0;i<s.length;i++){j=this._layer.addShape(new c());this.paintln({text:s[i],font:g.sub.font,color:g.sub.color,align:g.sub.horizontalAlign},j);this._textShapes.push(j)}}this._refresh()},paintln:function(g,h){if(!g||!h)return;var i=a.measureWidth(g.font,g.text);h.text(g.text).font(g.font).textColor(g.color).width(i).visible(true);var j=this._containerSize.width/2;var k=a.measureHeight(g.font);switch(g.align.toLowerCase()){case"center":this._anchor.x=j;h.center([this._anchor.x,this._anchor.y+k/2]);break;case"left":this._anchor.x=0;h.leftCenter([this._anchor.x,this._anchor.y+k/2]);break;case"right":this._anchor.x=this._containerSize.width;h.rightCenter([this._anchor.x,this._anchor.y+k/2]);break;default:this._anchor.x=j;h.center([this._anchor.x,this._anchor.y+k/2])}this._anchor.y+=k},wrapWord:function(i,w){if(this._textProcessor){this._textProcessor.setText(i);this._textProcessor.setWidth(w);this._textProcessor.setWordWrapEnabled(true);return this._textProcessor.getLines()}else{this._textProcessor=new e(i,{lineWidth:w,wordWrap:true});return this._textProcessor.getLines()}},getPreferredSize:function(g,s){if(!g||!s||!s.main){return}this._containerSize=g;var r={width:0,height:0},l,m,h;if(T.isExist(s.main.visible)&&!s.main.visible){return r}l=this.getLineCapacity(s.main.font);if(s.main.text.length>=l){r.width=m=this._containerSize.width}else{if(s.sub&&s.sub.visible){l=this.getLineCapacity(s.sub.font);if(s.sub.text.length>=l){r.width=h=this._containerSize.width}else{m=a.measureWidth(s.main.font,s.main.text);h=a.measureWidth(s.sub.font,s.sub.text);m>h?r.width=m:r.width=h}}}l=this.getLineCapacity(s.main.font);var i=this.wrapWord(s.main.text,l);r.height+=(i.length*a.measureHeight(s.main.font));l=this.getLineCapacity(s.sub.font);var j=this.wrapWord(s.sub.text,l);r.height+=(j.length*a.measureHeight(s.sub.font));return r},setPreferredSize:function(s){this._containerSize=s},getLineCapacity:function(g){var l=0;var r='r';var u=a.measureText(g,r).width;l=Math.floor(this._containerSize.width/u);return l},_refresh:function(){this._layer.setNeedsDisplay()},updateProperties:function(p){delete this._options;this._options=p.title;var m=T.isExist(this._options.main.formatString)?this._options.main.formatString:d.main.formatString;var g=sap.common.globalization.NumericFormatManager.getFormat(m);var s=T.isExist(this._options.sub.formatString)?this._options.sub.formatString:d.sub.formatString;var h=sap.common.globalization.NumericFormatManager.getFormat(s);this._options.main.text=T.isExist(g)?g.display(this._options.main.text):this._options.main.text;this._options.sub.text=T.isExist(h)?h.display(this._options.sub.text):this._options.sub.text;this.paint(this._options)},doContentResize:function(o,n){this.callParent('doContentResize',o,n);var m=T.isExist(this._options.main.formatString)?this._options.main.formatString:d.main.formatString;var g=sap.common.globalization.NumericFormatManager.getFormat(m);var s=T.isExist(this._options.sub.formatString)?this._options.sub.formatString:d.sub.formatString;var h=sap.common.globalization.NumericFormatManager.getFormat(s);this._options.main.text=T.isExist(g)?g.display(this._options.main.text):this._options.main.text;this._options.sub.text=T.isExist(h)?h.display(this._options.sub.text):this._options.sub.text;this.paint(this._options)},applyTheme:function(g){this._theme=b.getThemeSettings(g);var h,i,s=' ';var m=O.extend(true,{},this._theme.global,this._theme.title.mainTitle);var j=O.extend(true,{},this._theme.global,this._theme.title.subTitle);h=m["font-weight"]+s+m["font-size"]+s+m["font-family"];i=m["color"];this._options.main.font=h;this._options.main.color=i;if(this._options.sub){h=j["font-weight"]+s+j["font-size"]+s+j["font-family"];i=j["color"];this._options.sub.font=h;this._options.sub.color=i}if(this._textShapes.length!==0){this.paint(this._options)}},doPrint:function(g){g.drawImage(this._canvasElement,0,0)}});f.getDefaultOption=function(){return d};return f});sap.riv.module({qname:'sap.riv.graphics.shape.Polygon',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.graphics.shape.FillableShape',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,T,F,M){var _=function(s,e,w){var x=(s[0]===e[0]);var y=(s[1]===e[1]);if(x||y){if(x){s[0]=e[0]=M.floor(s[0]);if(w%2===1){s[0]=e[0]=s[0]+0.5}}if(y){s[1]=e[1]=M.floor(s[1]);if(w%2===1){s[1]=e[1]=s[1]+0.5}}}return{start:[s[0],s[1]],end:[e[0],e[1]]}};var P=O.derive(F,{constructor:function(){this._isClosed=false;this._vertices=[];this._hitTestVertices=[]},addVertices:function(x,y){if(T.isArray(x)){var v=x;for(var i=0,l=v.length;i<l;i++){this._vertices.push([v[i][0],v[i][1]]);this._hitTestVertices.push([v[i][0],v[i][1]])}}else{if(x!==undefined,y!==undefined){this._vertices.push([x,y]);this._hitTestVertices.push([x,y])}}return this},close:function(){if(!this._isClosed){this._hitTestVertices.push([].concat(this._vertices[0]));this._isClosed=true}return this},reset:function(){this._isClosed=false;this._vertices.splice(0,this._vertices.length);this._hitTestVertices.splice(0,this._hitTestVertices.length)},doDraw:function(d){var v=this._vertices;if(v.length<2){return}for(var i=1,e,l=v.length;i<l;i++){var s=v[i-1];var a=v[i];var r=_(s,a,this.borderWidth());v[i-1]=r.start;v[i]=r.end}var c=d;c.beginPath();c.moveTo(v[0][0],v[0][1]);for(var i=1,e,l=v.length;i<l;i++){e=v[i];c.lineTo(e[0],e[1])}c.closePath();this.fillShape(c);this.drawBorder(c)},doPointInTest:(function(){var a=function(s,e,t){return((e[0]-s[0])*(t[1]-s[1])-(t[0]-s[0])*(e[1]-s[1]))};return function(b){var w=0;var x=b.x,y=b.y;var p=[x,y];for(var i=0,v=this._hitTestVertices,e=v.length-1;i<e;i++){if(v[i][1]<=y){if(v[i+1][1]>y)if(a(v[i],v[i+1],p)>0)++w}else{if(v[i+1][1]<=y)if(a(v[i],v[i+1],p)<0)--w}}return w}})()});return P});sap.riv.module({qname:'sap.riv.viz.shared.layout.BasicLayout',version:'1.0.0'},function Setup(){var b=function(s,i){this._size={width:s.width,height:s.height};this._layoutChanged=false;this._mainTitleVisible=false;this._subTitleVisible=false;this._showLegend=true;this._legendDock="right";this._padding=[0,0,0,0];this._legendFirst=false;this._maxLegendWidth=0;this._maxLegendHeight=0;this._preferredTitleWidth=0;this._preferredTitleHeight=0;this._parseOptions(i)};b.prototype={_parseOptions:function(o){if(o.legend){if(this._showLegend!=o.legend.visible){this._showLegend=o.legend.visible;this._layoutChanged=true}if(this._legendDock!=o.legend.position){this._legendDock=o.legend.position;this._layoutChanged=true}}if(o.title){if(o.title.main){if(this._mainTitleVisible!==o.title.main.visible){if(o.title.main.visible===false){this._mainTitleVisible=false;this._subTitleVisible=false}else{this._mainTitleVisible=true}this._layoutChanged=true}}if(o.title.sub){if(this._mainTitleVisible&&this._subTitleVisible!=o.title.sub.visible){this._subTitleVisible=o.title.sub.visible;this._layoutChanged=true}}}if(o.layout){if(this._padding!=o.layout.padding){this._padding=o.layout.padding;this._layoutChanged=true}if(this._legendFirst!=o.layout.legendFirst){this._legendFirst=o.layout.legendFirst;this._layoutChanged=true}}},layoutChanged:function(){return this._layoutChanged},updateSize:function(n){if(this._size.width!=n.width||this._size.height!=n.height){this._size.width=n.width;this._size.height=n.height;this._layoutChanged=true}},updateSettings:function(s){this._parseOptions(s)},getLayoutInfo:function(){var r=new Object();var p=t(this._padding);var w=this._size.width-p[1]-p[3];var h=this._size.height-p[0]-p[2];var a=0;if(this._mainTitleVisible){r.title=[];r.title.push(p[3],p[0],w);a=this._preferredTitleHeight;r.title.push(a)}if(this._showLegend){var c,d,l,e,f=0;if(this._legendDock==='left'||this._legendDock==='right'){c=w*0.79;d=h-a;l=w*0.15;e=h;f=w*0.03;if(this._legendFirst){l=this._maxLegendWidth;c=w-l-2*f}}else{l=w;e=h*0.06;f=h*0.03;c=w;d=h-e-a-2*f;if(this._legendFirst){e=this._maxLegendHeight;d=h-a-e-2*f}}var g=0,i=0,m=0,j=0;r.main=[];r.legend=[];switch(this._legendDock){case'top':g=0;i=a+f;m=0;j=a+2*f+e;break;case'bottom':g=0;i=a+d+f;m=0;j=a;break;case'left':g=f;i=0;m=f+l+f;j=a;break;case'right':default:g=c+f;i=0;m=0;j=a;break}r.main.push(m+p[3],j+p[0],c,d);r.legend.push(g+p[3],i+p[0],l,e)}else{var c=w;r.main=[];r.main.push(p[3],a+p[0],c,h-a)}r.background=[];r.background.push(0,0,this._size.width,this._size.height);return r},setMaxLegendWidth:function(v){this._maxLegendWidth=v},setMaxLegendHeight:function(v){this._maxLegendHeight=v},setPreferredTitleWidth:function(v){this._preferredTitleWidth=v},setPreferredTitleHeight:function(v){this._preferredTitleHeight=v}};var t=function(p){if(p.length===0){p[0]=0}for(var i=0;i<4;i++){var v=p[i];if(v==undefined){if(i!=3){p[i]=p[0]}else{p[i]=p[1]}}}return p};return b});sap.riv.module({qname:'sap.riv.viz.shared.axis.FoucsCalculator',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(T,M){var c=function(){};c.createFocus=function(v){switch(v){case'off':return new c.NoFocus();case'full':return new c.StandardFocus();case'growth':return new c.ZoomOutFocus();default:return new c.ManualFocus()}};c.StandardFocus=function(){return this};c.StandardFocus.prototype.calculateFocus=function(o){switch(o.lineScaling){case'logarithmic':case'log10':return this.calculateLogarithmicFocus(o.minValue,o.maxValue);default:return this.calculateLinearFocus(o.minValue,o.maxValue)}};c.StandardFocus.prototype.calculateLogarithmicFocus=function(m,a){var b={};b.major=this.calculateMajorUnitFromBounds(m,a);b.minor=b.major/3;var d=M.log(m)/M.log(10);var e=M.log(a)/M.log(10);if(e>=0&&d>=0){b.max=a+0.05*(a-m);var f=M.ceil(b.max/b.major);b.max=f*b.major;b.min=m-((a-m)/2);b.min=b.major*M.ceil(b.min/b.major);b.min=M.max(1,b.min)}else if(e<=0&&d<=0){if(e-d>0.16667*d)b.max=1}if(b.min<1)b.min=1/M.pow(10,M.max(1,b.min.toString().length-1));return b};c.StandardFocus.prototype.calculateLinearFocus=function(m,a){var b={};b.major=this.calculateMajorUnitFromBounds(m,a);b.minor=b.major/3;if(a>=0&&m>=0){b.max=a+0.05*(a-m);var d=M.ceil(b.max/b.major);b.max=d*b.major;{b.min=m-((a-m)/2);d=M.max(0,M.floor(b.min/b.major));b.min=d*b.major}}else if(a<=0&&m<=0){b.min=m+0.05*(m-a);d=M.floor(b.min/b.major);b.min=d*b.major;{b.max=a-((m-a)/2);d=M.min(0,M.ceil(b.max/b.major));b.max=d*b.major}}else{b.max=a+0.05*(a-m);d=M.ceil(b.max/b.major);b.max=d*b.major;b.min=m+0.05*(m-a);d=M.floor(b.min/b.major);b.min=d*b.major}return b};c.DEFAULT_MIN_BOUND=0;c.DEFAULT_MAX_BOUND=5;c.validateBounds=function(m,a){if(T.isNaN(m)||T.isNaN(a)){m=c.DEFAULT_MIN_BOUND;a=c.DEFAULT_MAX_BOUND}if(m===a){if(m>0)m=0;else if(a<0)a=0;else{m=c.DEFAULT_MIN_BOUND;a=c.DEFAULT_MAX_BOUND}}return{min:m,max:a}};c.StandardFocus.prototype.calculateMajorUnitFromBounds=function(m,a){var s=0;var r=a-m;if(a>0&&m<0){s=M.log(r)/M.log(10);s=M.floor(s);r=r/M.pow(10,s);if(1<=r&&r<1+(81/99))r=0.2;else if(1+(81/99)<=r&&r<4+(54/99))r=0.5;else if(4+(54/99)<=r&&r<9+(1/11))r=1;else r=2;return r*M.pow(10,s)}else if(r<(a*0.16667)){r=r/6.3492063492063;s=M.log(r)/M.log(10);s=M.floor(s);r=r/M.pow(10,s);if(r/5>1)r=10;else if(r/2>1)r=5;else if(r>1)r=2;else r=1;return r*M.pow(10,s)}else{if(m<0)a=M.abs(m);r=M.log(a)/M.log(10);s=M.floor(r);r=a/M.pow(10,s);if(1<=r&&r<1.90476)return 0.2*M.pow(10,s);if(1.09476<=r&&r<4.76190)return 0.5*M.pow(10,s);if(4.76190<=r&&r<9.5239)return M.pow(10,s);return 2*M.pow(10,s)}};c.NoFocus=function(){return this};c.NoFocus.prototype.calculateFocus=function(o){};c.ZoomOutFocus=function(){};c.ZoomOutFocus.prototype.calculateFocus=function(o){};c.ManualFocus=function(){};c.ManualFocus.prototype.calculateFocus=function(o){};return c});sap.riv.module({qname:'sap.riv.vizkit.VizAppDelegate',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'}],function Setup(F,T){var V=function(){this._publicMethodsRegistry={};this._theme=T.defaultTheme();this._application};var v=V.prototype;v._afterLaunched=function(a,l){this._application=a;this.appDidFinishLaunching(a,l);var r=this.rootController();r._setApplication_(this._application);this._application._setRootController(r)};v.appDidFinishLaunching=F.noop;v.rootController=F.unimplemented;v.registerPublicMethod=function(m,f){this._publicMethodsRegistry[m]=f};v._invokePublicMethod=function(p,o){if(this._publicMethodsRegistry.hasOwnProperty(p)){this._publicMethodsRegistry[p].call(this,o)}};v._currentTheme=function(){return this._theme};v._applyTheme=function(t){if(this._theme!==t){this.rootController().doThemeApplied(t)}};v._updateThemeSetting=function(t,k,o,n){if(this._theme===t){this.rootController().doThemeUpdated(k,o,n)}};v.getProperties=function(){return{}};v.updateProperties=F.noop;v.setDataset=F.noop;v.getPreloadAssets=function(){return[]};v.getSupportedEvents=function(){return[]};v.getSupportedMethods=function(){var r=[];for(var p in this._publicMethodsRegistry){r.push(p)}return r};return V});sap.riv.module({qname:'sap.riv.viz.shared.axis.DimensionAxisRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.BasicAxisRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.PositionCalculator',version:'1.0.0'}],function Setup(O,T,a,B,P){var d=O.derive(B,{constructor:function(o){this._daxr_initialize();return this},_daxr_initialize:function(){this._maxValue=this._baxr_options.labels.length+0.5;this._minValue=0.5;this._num_interval=this._baxr_options.labels.length-1;this._dimensionAxisFT=[];for(var i=0;i<this._baxr_options.labels.length;i++){if(i<this._labels.formatString.length){this._dimensionAxisFT.push(sap.common.globalization.NumericFormatManager.getFormat(this._labels.formatString[i]))}else{this._dimensionAxisFT.push(sap.common.globalization.NumericFormatManager.getFormat(this._labels.formatString[this._labels.formatString.length-1]))}}this._hideOverlappingLabels=false},_getLongestWidth:function(){if(!a.isExist(this._longestWidth)||this._longestWidth==0){var t=T;var s=a.isExist(this._dimensionAxisFT[0])?this._dimensionAxisFT[0].display(this._baxr_options.labels[0]):this._baxr_options.labels[0];var b=s.toString().length;var f,c;for(var i=1,e=this._baxr_options.labels,l=e.length;i<l;i++){f=a.isExist(this._dimensionAxisFT[i])?this._dimensionAxisFT[i].display(e[i]):e[i];c=f.toString().length;if(b<c){b=e[i].toString().length;s=f}}this._longestWidth=t.measureWidth(this._labels.font,s)}return this._longestWidth},_createLabelsAndPosition:function(){var o=this._baxr_options;var c=this._labels.itemsValue;var l=this._labels.itemsPosition=[];var m=this._calculatePositionMultiplier();for(var i=0,b=o.labels;i<b.length;i++){c[i]=new this.Label();c[i].value(a.isExist(this._dimensionAxisFT[i])?this._dimensionAxisFT[i].display(b[i]):b[i]);c[i].visible(true);l[i]=P.calculateLinearPosition(i+1,m,this._minValue)}},distance:function(b){if(a.isExist(b)){this._distance=b;this._createLabelsAndPosition();if(this._hideOverlappingLabels){this._removeOverlappingLabels(this._labels.itemsPosition.length)}if(this._position=='hb'||this._position=='ht'){this._axisMatrics.left=this._axisMatrics.right=0}else{this._axisMatrics.bottom=this._axisMatrics.top=0}return this}return this._distance},zoom:function(x,y,b){this._scaled=true;this._positionMultiplier=null;this._majorTickPositions=null;this._minorTickPositions=null;var s=this.getSubLayer();var o=s.size();s.size({height:o.height*y,width:o.width*x});this.distance(this._distance*b);this.draw()},setVisibleRange:function(x,y,b){this._scaled=true;this._positionMultiplier=null;this._majorTickPositions=null;this._minorTickPositions=null;var s=this.getSubLayer();var o=this._layer.size();s.size({height:o.height*y,width:o.width*x});this.distance(this._distance*b)}});return d});sap.riv.module({qname:'sap.riv.viz.shared.legend.LegendCanvasComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Circle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.TextLine',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Rectangle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Polygon',version:'1.0.0'}],function Setup(T,O,a,C,P,b,c,d,R,e){var f={visible:true,position:'right',verticalOffset:0,horizontalOffset:0,labelFont:'bold 16px Arial',labelColor:'#000000',titleFont:'bold 16px Arial',titleColor:'#000000',formatString:['']};var t="The quick brown fox jumps over the lazy dog";var L=O.derive(C,{constructor:function(o){this._options=o.legendOptions.properties.legend;this._parseOptions(o.legendOptions.properties);this._canvasSurface=this.getCanvasSurface();this._layer=this._canvasSurface.getRootLayer();this._content=null;this._maxLabelHeight=null;this._curmaxLabelHeight=this._maxLabelHeight;this._eventObservers=[];this._stateChangeable=false;this._initialize();this._hookEvents()},_parseOptions:function(o){this._titletxt=o._additional.legendTitle||"";this._colorList=o._additional.colorList;this._labels=o._additional.legendLabels;this._labelFont=o.legend.labelFont;this._labelFontColor=o.legend.labelColor;this._titleLabelFont=o.legend.titleFont;this._titleLabelFontColor=o.legend.titleColor;this._markerList=o._additional.legendMarkers||[];this._formatString=o._additional.legendNumberFormat;this._legendFirst=o.layout.legendFirst},_initialize:function(){var l=this._labels;this._title=this._layer.addShape(new d());this._content=[];var m=this._markerList;var g;this._maxLabelHeight=a.measureText(this._labelFont,t).height;for(var i=0;i<l.length;i++){var h={};h.active=true;h.label=this._layer.addShape(new d());h.colorListIndex=i;if(!this._legendFirst){g=sap.common.globalization.NumericFormatManager.getFormat(this._formatString[i]);this._labels[i].category=T.isExist(g)?g.display(this._labels[i].category):this._labels[i].category}h.measureIndex=l[i].measureIndex;this._createMarkupShape(h,m[i]);this._content.push(h)}},_createMarkupShape:function(g,m){switch(m){case"circle":g.markup=this._layer.addShape(new c());g.checkedShape=this._layer.addShape(new c());break;case"diamond":case"triangle":g.markup=this._layer.addShape(new e());g.checkedShape=this._layer.addShape(new e());break;case"rect":default:g.markup=this._layer.addShape(new R());g.checkedShape=this._layer.addShape(new R());break}},_refresh:function(){this._layer.setNeedsDisplay()},_resetShapes:function(){this._layer.removeShape(this._title);for(var i=0,l=this._content.length;i<l;i++){this._layer.removeShape(this._content[i].label);this._layer.removeShape(this._content[i].markup);this._layer.removeShape(this._content[i].checkedShape)}},_update:function(){var o=this._options;var m=this._markerList;var g=a.measureWidth(this._titleLabelFont,this._titletxt);var l=this._maxLabelHeight;var h=0.5*l;var j=0.2*l;var k=0.6*l;var n=0.1*l;var p=0.2*l;var q;if(o.position=='right'||o.position=='left'){var r=0,s=0;if(T.isExist(this._titletxt)&&this._titletxt.toString()!==''){this._title.text(this._titletxt).textAlign('l').font(this._titleLabelFont).textColor(this._titleLabelFontColor).width(g);r=this._title._height+n}s=r+(l+n)*this._content.length-n;var u=p,v=p+(this._chartHeight-s-2*p)/2;v=v-o.verticalOffset;if(T.isExist(this._titletxt)&&this._titletxt.toString()!==''){this._title.topLeft([u,v])}var w=r+v;for(var i=0;i<this._content.length;i++){var x=this._content[i];q=i;this._drawMarkup(m[i],x.markup,{x:u,y:w+j},this._colorList[q]);this._drawCheckedShape(m[i],x.checkedShape,{x:u,y:w+j},this._colorList[q]);x.label.text(this._labels[i].category).textAlign('l').font(this._labelFont).textColor(this._labelFontColor).leftCenter([u+k+h,w+l/2]).width(a.measureWidth(this._labelFont,this._labels[i].category));w+=n+l}}else{var y=0,u=p,v=p;for(var i=0;i<this._content.length;i++){y+=a.measureWidth(this._labelFont,this._labels[i].category)+this._maxLabelHeight+10}u=u+(this._chartWidth-y)/2;u=u+o.horizontalOffset;this._title.text('');var z=u;for(var i=0;i<this._content.length;i++){var x=this._content[i];q=i;var A=a.measureWidth(this._labelFont,this._labels[i].category);this._drawMarkup(m[i],x.markup,{x:z,y:v+j},this._colorList[q]);this._drawCheckedShape(m[i],x.checkedShape,{x:z,y:v+j},this._colorList[q]);x.label.text(this._labels[i].category).textAlign('l').font(this._labelFont).textColor(this._labelFontColor).topLeft([z+k+h,v]).width(A);z+=k+h+A+n}}this._refresh()},_drawMarkup:function(m,g,p,h){var i=this._maxLabelHeight*0.6;g.borderWidth(1).borderColor(h);switch(m){case"circle":g.center({x:p.x+i/2,y:p.y+i/2}).radius(i/2);break;case"diamond":g.reset();g.addVertices(p.x+i/2,p.y);g.addVertices(p.x,p.y+i/2);g.addVertices(p.x+i/2,p.y+i);g.addVertices(p.x+i,p.y+i/2);g.close();break;case"triangle":g.reset();var r=i/2;p.x=p.x+i/2;p.y=p.y+i/2;g.addVertices(p.x,p.y-r);g.addVertices(p.x+r*Math.sqrt(3)/2,p.y+r/2);g.addVertices(p.x-r*Math.sqrt(3)/2,p.y+r/2);g.close();break;case"rect":default:g.topLeft([p.x,p.y]).width(i).height(i);break}},_drawCheckedShape:function(m,g,p,h){var i=this._maxLabelHeight*0.6-4;p.x=p.x+2;p.y=p.y+2;switch(m){case"circle":g.center({x:p.x+i/2,y:p.y+i/2}).radius(i/2);g.fillingColor(h);break;case"diamond":g.reset();g.addVertices(p.x+i/2,p.y);g.addVertices(p.x,p.y+i/2);g.addVertices(p.x+i/2,p.y+i);g.addVertices(p.x+i,p.y+i/2);g.close();g.fillingColor(h);break;case"triangle":g.reset();var r=i/2;p.x=p.x+i/2;p.y=p.y+i/2;g.addVertices(p.x,p.y-r);g.addVertices(p.x+r*Math.sqrt(3)/2,p.y+r/2);g.addVertices(p.x-r*Math.sqrt(3)/2,p.y+r/2);g.close();g.fillingColor(h);break;case"rect":default:g.topLeft([p.x,p.y]).width(i).height(i).color(h);break}},doContentResize:function(o,n){this.callParent('doContentResize',o,n);this._chartHeight=n.height;this._chartWidth=n.width;this._update()},applyTheme:function(g){var s=b.getThemeSettings(g);var l=s.legend;var h=s.global;var j=O.extend(true,{},h,l.title);this._titleLabelFont=j['font-weight']+" "+j['font-size']+" "+j['font-family'];this._titleLabelFontColor=j['color'];var k=O.extend(true,{},h,l.label);this._labelFont=k['font-weight']+" "+k['font-size']+" "+k['font-family'];this._labelFontColor=k['color'];this._title.font(this._titleLabelFont).textColor(this._titleLabelFontColor).width(a.measureWidth(this._titleLabelFont,this._titletxt));for(var i=0;i<this._content.length;i++){this._content[i].label.font(this._labelFont).textColor(this._labelFontColor).width(a.measureWidth(this._labelFont,this._labels[i].category))}this._refresh()},updateOptions:function(l){this._parseOptions(l.properties);this._resetShapes();this._title=null;this._content=null;this._initialize();this._update()},updateProperties:function(p){var o=this._markerList;this._options=p.legend;this._parseOptions(p);for(var i=0,l=o.length;i<l;i++){if(o[i]!==this._markerList[i]){var g=this._content[i];this._layer.removeShape(g.markup);this._layer.removeShape(g.checkedShape);this._createMarkupShape(g,this._markerList[i])}}this._maxLabelHeight=a.measureText(this._labelFont,t).height;var h=this._labels;var j;for(var i=0;i<h.length;i++){j=sap.common.globalization.NumericFormatManager.getFormat(this._formatString[i]);h[i].category=T.isExist(j)?j.display(h[i].category):h[i].category}this._update()},doPrint:function(g){g.drawImage(this._canvasElement,0,0)},calMaxLegendSize:function(o){var l=o.legend.labelFont;var m=0,g=0;var h=0,j=0,k;var n=o._additional.legendLabels;var p=n.length;var q;for(var i=0;i<p;i++){q=sap.common.globalization.NumericFormatManager.getFormat(o._additional.legendNumberFormat[i]);n[i].category=T.isExist(q)?q.display(n[i].category):n[i].category;k=a.measureText(l,n[i].category);j=k.height;h=k.width;if(j>m){m=j}if(h>g){g=h}}return{width:g+m+10,height:m}},addEventObserver:function(o){this._eventObservers.push(o)},getStateChangeable:function(){return this._stateChangeable},setStateChangeable:function(g){this._stateChangeable=g},_hookEvents:function(){this._layer.on([{eventName:'mouseup',listener:this._dispatchEvent,scope:this},{eventName:'touchstart',listener:this._dispatchEvent,scope:this}])},_dispatchEvent:function(g){var h=g.type();switch(h){case'mouseup':this._handleClick(g.targetLocalXY());break;case'touchstart':this._handleClick(g.targetTouches().item(0).localXY());break;default:break}},_handleClick:function(p){if(!this._stateChangeable)return;var g=new Object();g.commandText="ChangeSeriesVisibility";for(var i=0;i<this._content.length;i++){if(this._content[i].label.doPointInTest(p)||this._content[i].markup.doPointInTest(p)||(this._content[i].markup.rect&&this._content[i].markup.rect.doPointInTest(p))){g.seriesIndex=this._content[i].colorListIndex;if(this._content[i].active){this._content[i].active=false;g.setVisible=false;this._deactivateItem(g.seriesIndex)}else{this._content[i].active=true;g.setVisible=true;this._activateItem(g.seriesIndex)}}}this._refresh();if(!T.isDefined(g.seriesIndex)){return}for(i=0;i<this._eventObservers.length;i++){this._eventObservers[i].notify(g)}},_activateItem:function(s){var g=this._content[s];g.checkedShape.visible(true)},_deactivateItem:function(s){var g=this._content[s];g.checkedShape.visible(false)}});L.getDefaultOption=function(){return f};return L});sap.riv.module({qname:'sap.riv.viz.pie.PiePlotComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'},{qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.viz.pie.MultiPieModule',version:'1.0.0'},{qname:'sap.riv.viz.pie.PieModule',version:'1.0.0'}],function Setup(O,L,U,C,a,M,P){var b=O.derive(C,{constructor:function(o){this._canvasSurface=this.getCanvasSurface();this._rootLayer=this._canvasSurface.getRootLayer();this._chart_options=o.chart;this._metaData=this._chart_options.metaData;this._dataTree=this._chart_options.dataTree;this._seriesLayer=null;this._seriesMaskLayer=null;this._chartModule=null;this._init(false)},_init:function(r){if(!r){this._initModule()}this._chartModule.init();if(!r){this._seriesMaskLayer=new a({anchor:{x:0,y:0}});this._seriesMaskLayer.clipToBounds(true);this._rootLayer.addSubLayer(this._seriesMaskLayer);this._seriesLayer=new a({anchor:{x:0,y:0}});this._seriesMaskLayer.addSubLayer(this._seriesLayer)}this._chartModule.bindRenderer(this._seriesLayer);if(!r){this._registerEvents()}},_initModule:function(){switch(this._chart_options.properties.type){case'multipie':this._chartModule=new M(this._chart_options);break;case'pie':default:this._chartModule=new P(this._chart_options);break}},_chart_layout:function(n){this._chartModule.doChartLayout(n,this._seriesMaskLayer,this._seriesLayer)},_doDraw:function(s){this._chart_layout(s);this._chartModule.drawSeries();this._rootLayer.setNeedsDisplay()},_resetEventStatusVariables:function(){this._mouseAlreadyDown=false;this._mouseAlreadyMoved=false;this._mouseMoveThreshold=0.3;this._previousMousePosition=undefined},_registerEvents:function(){this._resetEventStatusVariables();this._seriesMaskLayer.on([{eventName:'mousemove',listener:this._mouseEventHandler,scope:this},{eventName:'mouseup',listener:this._mouseEventHandler,scope:this},{eventName:'mousedown',listener:this._mouseEventHandler,scope:this},{eventName:'mouseleave',listener:this._mouseEventHandler,scope:this},{eventName:'touchstart',listener:this._touchEventHandler,scope:this},{eventName:'touchend',listener:this._touchEventHandler,scope:this},{eventName:'touchmove',listener:this._touchEventHandler,scope:this},{eventName:'touchcancel',listener:this._touchEventHandler,scope:this}])},_convertXYForMouseEvent:function(m){if(this._seriesLayer==null){O.error('Series Layer should be initialized before any event handler!')}var x=m.targetLocalXY();var t=m.targetLayer();var c=this._seriesLayer.convertPointFromLayer(x,t);return c},_convertXYForTouch:function(t){if(this._seriesLayer==null){O.error('Series Layer should be initialized before any event handler!')}var x=t.localXY();var c=t.targetLayer();var d=this._seriesLayer.convertPointFromLayer(x,c);return d},_mouseEventHandler:function(m){var e=m.type();switch(e){case'mousedown':this._mouseAlreadyDown=true;this._mouseAlreadyMoved=false;break;case'mouseup':this._mouseAlreadyDown=false;if(!this._mouseAlreadyMoved){this._chartModule.clickOnPoint(this._convertXYForMouseEvent(m))}this._mouseAlreadyMoved=false;break;case'mousemove':if(this._previousMousePosition){var c=m.targetLocalXY();if(Math.abs(c.x-this._previousMousePosition.x)>this._mouseMoveThreshold||Math.abs(c.x-this._previousMousePosition.x)>this._mouseMoveThreshold){if(this._mouseAlreadyDown){this._chartModule.marqueeOverPoint(this._convertXYForMouseEvent(m))}else{this._chartModule.hoverOnPoint(this._convertXYForMouseEvent(m))}this._previousMousePosition=undefined;this._mouseAlreadyMoved=true}}else{this._previousMousePosition=m.targetLocalXY()}break;case'mouseleave':this._resetEventStatusVariables();break;default:break}},_touchEventHandler:function(t){var e=t.type();switch(e){case'touchstart':var c=t.targetTouches().item(0);this._chartModule.hoverOnPoint(this._convertXYForTouch(c));break;case'touchmove':if(t.targetTouches().length()!=1){return}var c=t.targetTouches().item(0);this._chartModule.hoverOnPoint(this._convertXYForTouch(c));break;case'touchend':if(t.changedTouches().length()!=1){return}var c=t.changedTouches().item(0);this._chartModule.clickOnPoint(this._convertXYForTouch(c));break;case'touchcancel':break;default:break}},doContentResize:function(o,n){this.callParent('doContentResize',o,n);this._doDraw(n)},applyTheme:function(t){this._chartModule.applyTheme(t)},updateProperties:function(p){this._chart_options.properties=p;this._chartModule.updateProperties(p);this._doDraw(this.size())},updateOptions:function(o){this._chart_options=o;this._metaData=o.metaData;this._dataTree=o.dataTree;this._chartModule.updateOptions(this._chart_options);this._init(true);this._doDraw(this.size())},getSupportedAppEvents:function(){return this._chartModule.getSupportedAppEvents()},doPrint:function(d){}});return b});sap.riv.module({qname:'sap.riv.viz.shared.background.BackgroundComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'}],function Setup(O,C,P,L,T){var d={color:null,visible:true};var B=O.derive(C,{constructor:function(o){this._options=o.backgroundOptions;this._canvasSurface=this.getCanvasSurface();this._layer=this._canvasSurface.getRootLayer();var s=this.size();this._mainLayer=new L({anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height}});this._layer.addSubLayer(this._mainLayer);this._bgc_initialize()},_bgc_initialize:function(){this._bgc_setBgColor()},_bgc_setBgColor:function(){if(this._options.visible&&this._options.color){this._mainLayer.backgroundColor(this._options.color)}else{this._mainLayer.backgroundColor(false)}},_bgc_refresh:function(){this._mainLayer.setNeedsDisplay()},updateProperties:function(p){delete this._options;this._options=p.background;this._bgc_setBgColor();this._bgc_refresh()},doContentResize:function(o,n){this.callParent('doContentResize',o,n);this._mainLayer.size(n)},applyTheme:function(t){var s=T.getThemeSettings(t);this.updateProperties({background:{color:s['background']}})},doPrint:function(a){a.drawImage(this._canvasElement,0,0)}});B.getDefaultOption=function(){return d};return B});sap.riv.module({qname:'sap.riv.viz.pie.PieComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.title.TitleCanvasComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.background.BackgroundComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.legend.LegendCanvasComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.viz.shared.descriptor.Descriptor',version:'1.0.0'},{qname:'sap.riv.viz.shared.layout.BasicLayout',version:'1.0.0'},{qname:'sap.riv.viz.pie.PiePlotComponent',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'}],function Setup(O,T,L,U,a,B,b,P,D,c,d,e){var f=O.derive(U,{constructor:function(o){this._dataTree=o.dataset.dataTree;this._metaData=o.dataset.metaData;this._pie_options={selectionMode:'single',allSelectable:true,allDeSelectable:true,selectedDataIndexes:[],pieType:'pie',type:'pie',measures:[],measureDefault:{sectorColors:["#113975","#e06f00","#5a92e2","#624628","#e03c2f","#ffbe7f","#96a8c3","#a9a9a9","#830b00","#344b6d","#e2ce44","#ff6657"],},tooltip:{text:{font:undefined,color:'#000000',formatString:['']},mainValue:{font:undefined,color:'#000000',formatString:['']},subValue:{font:undefined,color:'#000000',formatString:['0.00%']}},layout:{padding:[0,0,0,0],legendFirst:true},theme:'',isShowPieInnerShadow:false,isShowPieOuterShadow:false};this._pie_options.title=O.extend(true,{},a.getDefaultOption());this._pie_options.background=O.extend(true,{},B.getDefaultOption());this._pie_options.legend=O.extend(true,{},b.getDefaultOption());var g;if(o.pieOptions.type==='pie'){g=D.getPieDescriptor()}else if(o.pieOptions.type==='multipie'){g=D.getMultiPieDescriptor()}this._propsMgr=new P(g);var v=this._propsMgr.properties(o.pieOptions);this._pie_options=O.extend(true,this._pie_options,v);if(T.isExist(o.pieOptions.theme)&&o.pieOptions.theme!==''){this._resolveThemeAndProperties(o.pieOptions)}this._pie_options=O.extend(true,this._pie_options,o.pieOptions);this._propsMgr.properties(this._pie_options);this._attach_additional_properties();this._legendComponent=null;this._pieComponent=null;this._titleComponent=null;this._pie_layout=null;this._mode=null;this._colorList=null;this._initSubComponents(false)},_resolveThemeAndProperties:function(o){var t=o.theme;var s=e.getThemeSettings(t);var g=s.global;o.background=o.background||{};o.background.color=o.background.color||s.background;var l=s.legend;var h=O.extend(true,{},g,l.title);var i=O.extend(true,{},g,l.label);o.legend=o.legend||{};o.legend.titleFont=o.legend.titleFont||(h['font-weight']+" "+h['font-size']+" "+h['font-family']);o.legend.titleColor=o.legend.titleColor||(h['color']);o.legend.labelFont=o.legend.labelFont||(i['font-weight']+" "+i['font-size']+" "+i['font-family']);o.legend.labelColor=o.legend.labelColor||(i['color']);var m=O.extend(true,{},g,s.title.mainTitle);var j=O.extend(true,{},g,s.title.subTitle);o.title=o.title||{};o.title.main=o.title.main||{};o.title.main.font=o.title.main.font||(m["font-weight"]+' '+m["font-size"]+' '+m["font-family"]);o.title.main.color=o.title.main.color||(m["color"]);o.title.sub=o.title.sub||{};o.title.sub.font=o.title.sub.font||(j["font-weight"]+' '+j["font-size"]+' '+j["font-family"]);o.title.sub.color=o.title.sub.color||(j["color"]);var p=s.pie;o.isShowPieInnerShadow=o.isShowPieInnerShadow||p.isShowInnerShadow;o.isShowPieOuterShadow=o.isShowPieOuterShadow||p.isShowOuterShadow;var k=p.donut;var n=O.extend(true,{},g,k.measureLabel);var q=p.tooltip;o.tooltip=o.tooltip||{};var r=O.extend(true,{},g,q.dimensionLabel);o.tooltip.text=o.tooltip.text||{};o.tooltip.text.font=o.tooltip.text.font||r['font-weight']+" "+r['font-size']+" "+r['font-family'];o.tooltip.text.color=o.tooltip.text.color||r['color'];var v=O.extend(true,{},g,q.valueLabel);o.tooltip.mainValue=o.tooltip.mainValue||{};o.tooltip.mainValue.font=o.tooltip.mainValue.font||v['font-weight']+" "+v['font-size']+" "+v['font-family'];o.tooltip.mainValue.color=o.tooltip.mainValue.color||v['color'];var u=O.extend(true,{},g,q.percentLabel);o.tooltip.subValue=o.tooltip.subValue||{};o.tooltip.subValue.font=o.tooltip.subValue.font||u['font-weight']+" "+u['font-size']+" "+u['font-family'];o.tooltip.subValue.color=o.tooltip.subValue.color||u['color']},_initSubComponents:function(r){this.autoresizeSubComponents(false);var s=this.size();if(!r){this._pie_layout=new c(s,this._pie_options)}if(!r){this._backgroundComponent=new B({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},backgroundOptions:this._pie_options.background,id:'backgroundComponent'});this.addSubComponent(this._backgroundComponent);this._titleComponent=new a({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},titleOptions:this._pie_options.title,id:'pieTitleComponent'});this._legendComponent=new b({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},legendOptions:{properties:this._pie_options},id:'pieLegendComponent'});this._pieComponent=new d({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},chart:{metaData:this._metaData,dataTree:this._dataTree,properties:this._pie_options},id:'piePlotComponent'})}},doContentResize:function(o,n){this.callParent('doContentResize',o,n);this._pie_layout.updateSize(n);this._pie_relayout()},_attach_additional_properties:function(){if(this._pie_options){var o=this._pie_options;delete o._additional;var _={};var g=[];var l=[],t=[],h=[],k=[];var m=this._getEffectiveLables();if(o.measures){var s=o.measures[0];if(s&&s.sectorColors&&s.sectorColors.length>0){var n=s.sectorColors;for(var i=0,j=0,p=n.length,q=m.length;i<q;i++){j=i%p;g.push(n[j])}}else{var n=o.measureDefault.sectorColors;if(n){for(var i=0,j=0,p=n.length,q=m.length;i<q;i++){j=i%p;g.push(n[j])}}}}var r=o.legend.formatString;for(var i=0,u=r.length,q=m.length;i<q;i++){if(i<u){l.push(r[i])}else{l.push(r[u-1])}}var r=o.tooltip.text.formatString;for(var i=0,u=r.length,q=m.length;i<q;i++){if(i<u){t.push(r[i])}else{t.push(r[u-1])}}var r=o.tooltip.mainValue.formatString;for(var i=0,u=r.length,q=m.length;i<q;i++){if(i<u){h.push(r[i])}else{h.push(r[u-1])}}var r=o.tooltip.subValue.formatString;for(var i=0,u=r.length,q=m.length;i<q;i++){if(i<u){k.push(r[i])}else{k.push(r[u-1])}}_.colorList=g;_.legendNumberFormat=l;_.tooltipeTextNumberFormat=t;_.tooltipeMainValueNumberFormat=h;_.tooltipeSubValueNumberFormat=k;_.legendLabels=m;_.legendTitle=this._metaData.dimension[this._metaData.dimension.length-1].name;this._pie_options._additional=_}},_getEffectiveLables:function(){var t=this._dataTree;var g=this._metaData.dimension;var h=this._metaData.axisNum;var w=0;if(h==2){w=1}var p=[];for(var i=0,l=g.length;i<l;i++){var j=g[i];if(j.analysisAxisIndex===w){break}else{p.push(0)}}var k=t.getSubMemberLabels(p);var m=[],n,v;var o=k.length;for(var i=0;i<o;i++){n=k[i];m.push({category:n})}return m},_pie_processLayoutOfComponent:function(g,l){if(!l){g.detachFromSuperComponent()}else{L.debug("chartComponent["+this.id()+"]"+"subComponent["+g.getCanvasSurface().getRootLayer().id()+"]initialized.","perf");if(!g.superComponent()){this.addSubComponent(g)}g.position({x:l[0],y:l[1],});g.size({width:l[2],height:l[3],})}},_pie_relayout:function(g){if(this._pie_layout.layoutChanged()||g){if(this._pie_options.layout.legendFirst){var l=this._legendComponent.calMaxLegendSize(this._pie_options);this._pie_layout.setMaxLegendWidth(l.width);this._pie_layout.setMaxLegendHeight(l.height)}var t=this._titleComponent.getPreferredSize(this._pie_layout._size,this._pie_options.title);this._pie_layout.setPreferredTitleWidth(t.width);this._pie_layout.setPreferredTitleHeight(t.height);var h=this._pie_layout.getLayoutInfo();if(h.main[2]<=0||h.main[3]<=0){return}if(h.title){this._titleComponent.setPreferredSize({width:h.title[2],height:h.title[3]})}this._pie_processLayoutOfComponent(this._pieComponent,h.main);this._pie_processLayoutOfComponent(this._titleComponent,h.title);this._pie_processLayoutOfComponent(this._legendComponent,h.legend);this._pie_processLayoutOfComponent(this._backgroundComponent,h.background)}},applyTheme:function(t){var o=this._pie_options;this._setThemes(o,t);this.updateProperties(o)},_setThemes:function(o,t){var s=e.getThemeSettings(t);var g=s.global;o.background.color=s.background;var l=s.legend;var h=O.extend(true,{},g,l.title);var i=O.extend(true,{},g,l.label);o.legend.titleFont=(h['font-weight']+" "+h['font-size']+" "+h['font-family']);o.legend.titleColor=(h['color']);o.legend.labelFont=(i['font-weight']+" "+i['font-size']+" "+i['font-family']);o.legend.labelColor=(i['color']);var m=O.extend(true,{},g,s.title.mainTitle);var j=O.extend(true,{},g,s.title.subTitle);o.title.main.font=(m["font-weight"]+' '+m["font-size"]+' '+m["font-family"]);o.title.main.color=(m["color"]);o.title.sub.font=(j["font-weight"]+' '+j["font-size"]+' '+j["font-family"]);o.title.sub.color=(j["color"]);var p=s.pie;o.isShowPieInnerShadow=p.isShowInnerShadow;o.isShowPieOuterShadow=p.isShowOuterShadow;var k=p.donut;var n=O.extend(true,{},g,k.measureLabel);var q=p.tooltip;var r=O.extend(true,{},g,q.dimensionLabel);o.tooltip.text.font=r['font-weight']+" "+r['font-size']+" "+r['font-family'];o.tooltip.text.color=r['color'];var v=O.extend(true,{},g,q.valueLabel);o.tooltip.mainValue.font=v['font-weight']+" "+v['font-size']+" "+v['font-family'];o.tooltip.mainValue.color=v['color'];var u=O.extend(true,{},g,q.percentLabel);o.tooltip.subValue.font=u['font-weight']+" "+u['font-size']+" "+u['font-family'];o.tooltip.subValue.color=u['color']},updateProperties:function(p){var v=this._propsMgr.properties(p);this._pie_options=O.extend(true,this._pie_options,v);this._attach_additional_properties();this._pie_layout.updateSettings(this._pie_options);this._pie_relayout(false);this._backgroundComponent.updateProperties(this._pie_options);this._pieComponent.updateProperties(this._pie_options);this._titleComponent.updateProperties(this._pie_options);this._legendComponent.updateProperties(this._pie_options)},getProperties:function(){return this._propsMgr.properties()},setDataset:function(g){this._dataTree=g.dataTree;this._metaData=g.metaData;this._initSubComponents(true);this._attach_additional_properties();this._pie_relayout(false);this._pieComponent.updateOptions({mode:this._mode,metaData:this._metaData,dataTree:this._dataTree,properties:this._pie_options});this._legendComponent.updateOptions({title:this._metaData.dimension[0],labels:this._dataTree.getSubMembersAt(),properties:this._pie_options});if(this._pie_options.layout.legendFirst==true){this._pie_relayout()}},getSupportedAppEvents:function(){return this._pieComponent.getSupportedAppEvents()},doPrint:function(g){}});return f});sap.riv.module({qname:'sap.riv.vizkit.UIController',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'}],function Setup(F,U){var c=function(o){this._defaultWidth=300;this._defaultHeight=150;this._app;this._uiComp};var a=c.prototype;a.rootUIComponent=function(){if(!this._uiComp){this._uiComp=this.initUIComponent(this._defaultWidth,this._defaultHeight);this._uiComp.on({eventName:'beforeShow',listener:this._handleBeforeShow,scope:this});this._uiComp.on({eventName:'beforeHide',listener:this._handleBeforeHide,scope:this});this._uiComp.on({eventName:'afterShow',listener:this._handleAfterShow,scope:this});this._uiComp.on({eventName:'afterHide',listener:this._handleAfterHide,scope:this});this.afterUIComponentLoaded()}return this._uiComp};a._handleBeforeHide=function(h){this.beforeUIComponentDisappear()};a._handleBeforeShow=function(h){this.beforeUIComponentAppear()};a._handleAfterHide=function(h){this.afterUIComponentDisappear()};a._handleAfterShow=function(h){this.afterUIComponentAppear()};a._setApplication_=function(b){this._app=b};a.getApplication=function(){return this._app};a.fireAppEvent=function(e,b){this._app._fireEvent(e,b)};a.initUIComponent=function(i,b){return new U({size:{w:i,h:b}})};a.afterUIComponentLoaded=F.noop;a.beforeUIComponentAppear=F.noop;a.afterUIComponentAppear=F.noop;a.beforeUIComponentDisappear=F.noop;a.afterUIComponentDisappear=F.noop;a.doThemeApplied=F.noop;a.doThemeUpdated=F.noop;return c});sap.riv.module({qname:'sap.riv.viz.shared.gridLine.GridLine',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Line',version:'1.0.0'}],function Setup(T,P,a,M,L){var d={showMajor:false,majorColor:'#c9c9c9',majorThickness:'1',showMinor:false,minorColor:'#c9c9c9',minorThickness:'1',showSub:false,subColor:'#c9c9c9',};var g=function(){this._xAxis=null;this._yAxis=null;this._xAxisLayer=null;this._yAxisLayer=null;this._seriesMaskLayer=null;this._majorGridLineShape=[];this._minorGridLineShape=[];this._subGridLineShape=[]};g.prototype.setXAxis=function(x){this._xAxis=x};g.prototype.setXAxisLayer=function(x){this._xAxisLayer=x};g.prototype.setYAxis=function(y){this._yAxis=y};g.prototype.setYAxisLayer=function(y){this._yAxisLayer=y};g.prototype.setYAxisOptions=function(y){this._yAxis_options=y};g.prototype.setXAxisOptions=function(x){this._xAxis_options=x};g.prototype.setSeriesMaskLayer=function(s){this._seriesMaskLayer=s};g.prototype.setSeriesLayer=function(s){this._seriesLayer=s};g.prototype.getXAxis=function(){if(T.isExist(this._xAxis)){return this._xAxis}return null};g.prototype.getYAxis=function(){if(T.isExist(this._yAxis)){return this._yAxis}return null};g.prototype.drawGridLine=function(){if(!T.isExist(this._majorGridLineShape[0])){this._majorGridLineShape[0]=this._seriesLayer.addShape(new L())};this._drawMajorGridLine();if(!T.isExist(this._minorGridLineShape[0])){this._minorGridLineShape[0]=this._seriesLayer.addShape(new L())};this._drawMinorGridLine();if(!T.isExist(this._subGridLineShape[0])){this._subGridLineShape[0]=this._seriesLayer.addShape(new L())}this._drawSubGridLine()};g.prototype._drawMajorGridLine=function(){this.resetMajorGridLineShape();if(this._xAxis_options.showMajor){var x=this._xAxis;var b=x.getMajorTicks();var l=this._seriesLayer;var c=M.abs(this._seriesMaskLayer.position().x-this._xAxisLayer[0].position().x);for(var i=1,e=b.length;i<e;i++){this._majorGridLineShape[i]=l.insertShapeAfter(new L(),this._majorGridLineShape[0]);this._majorGridLineShape[i].visible(true).color(this._xAxis_options.majorColor).width(this._xAxis_options.majorThickness).from({x:b[i]-c,y:this._yAxis.getPreferredHeight()}).to({x:b[i]-c,y:0})}}if(this._yAxis_options.showMajor){var y=this._yAxis;var f=y.getMajorTicks();var l=this._seriesLayer;var c=M.abs(this._seriesMaskLayer.position().y-this._yAxisLayer[0].position().y);for(var i=0,e=f.length;i<e;i++){this._majorGridLineShape[i+1]=l.insertShapeAfter(new L(),this._majorGridLineShape[0]);this._majorGridLineShape[i+1].visible(true).color(this._yAxis_options.majorColor).width(this._yAxis_options.majorThickness).from({x:0,y:f[i]+c}).to({x:this._xAxis.getPreferredWidth(),y:f[i]+c})}}};g.prototype._drawMinorGridLine=function(){this.resetMinorGridLineShape();if(this._xAxis_options.showMajor&&this._xAxis_options.showMinor){var x=this._xAxis;var b=x.getMinorTicks();var l=this._seriesLayer;var c=M.abs(this._seriesMaskLayer.position().x-this._xAxisLayer[0].position().x);for(var i=0,e=b.length;i<e;i++){this._minorGridLineShape[i+1]=l.insertShapeAfter(new L(),this._minorGridLineShape[0]);this._minorGridLineShape[i+1].visible(true).color(this._xAxis_options.minorColor).width(this._xAxis_options.minorThickness).from({x:b[i]-c,y:this._yAxis.getPreferredHeight()}).to({x:b[i]-c,y:0})}}if(this._yAxis_options.showMajor&&this._yAxis_options.showMinor){var y=this._yAxis;var f=y.getMinorTicks();var l=this._seriesLayer;var c=M.abs(this._seriesMaskLayer.position().y-this._yAxisLayer[0].position().y);for(var i=0,e=f.length;i<e;i++){this._minorGridLineShape[i+1]=l.insertShapeAfter(new L(),this._minorGridLineShape[0]);this._minorGridLineShape[i+1].visible(true).color(this._yAxis_options.minorColor).width(this._yAxis_options.majorThickness).from({x:0,y:f[i]+c}).to({x:this._xAxis.getPreferredWidth(),y:f[i]+c})}}};g.prototype._drawSubGridLine=function(){this.resetSubGridLineShape();if(!this._xAxis_options.showMajor&&this._xAxis_options.showSub){var x=this._xAxis.getMajorTicks();var h=this._xAxis.getTickInterval()/2;for(var i=1;i<x.length;i++){this._subGridLineShape[i]=this._seriesLayer.insertShapeAfter(new L(),this._subGridLineShape[0]);this._subGridLineShape[i].width('1').color(this._xAxis_options.subColor).from({x:x[i]-h,y:this._yAxis.getPreferredHeight()}).to({x:x[i]-h,y:this._yAxis.getLastTickOffset()})}}if(!this._yAxis_options.showMajor&&this._yAxis_options.showSub){var y=this._yAxis.getMajorTicks();var h=this._yAxis.getTickInterval()/2;for(var i=0;i<y.length;i++){this._subGridLineShape[i+1]=this._seriesLayer.insertShapeAfter(new L(),this._subGridLineShape[0]);this._subGridLineShape[i+1].width('1').color(this._yAxis_options.subColor).from({x:0,y:M.abs(y[i]-h)}).to({x:this._xAxis.getPreferredWidth(),y:M.abs(y[i]-h)})}}};g.prototype.parseProperties=function(p){this._propsMgr=new P(d);this._xAxis_options=this._propsMgr.properties(p.properties.xAxis[0].gridLine);this._yAxis_options=this._propsMgr.properties(p.properties.yAxis[0].gridLine)};g.prototype.applyTheme=function(t){var s=a.getThemeSettings(t);this._xAxis_options.majorColor=s.axis.xAxisMajorGridLine.color;this._xAxis_options.majorThickness=s.axis.xAxisMajorGridLine.thickness;this._xAxis_options.minorColor=s.axis.xAxisMinorGridLine.color;this._xAxis_options.minorThickness=s.axis.xAxisMinorGridLine.thickness;this._xAxis_options.subColor=s.axis.xAxisSubGridLine.color;this._yAxis_options.majorColor=s.axis.yAxisMajorGridLine.color;this._yAxis_options.majorThickness=s.axis.yAxisMajorGridLine.thickness;this._yAxis_options.minorColor=s.axis.yAxisMinorGridLine.color;this._yAxis_options.minorThickness=s.axis.yAxisMinorGridLine.thickness;this._yAxis_options.subColor=s.axis.yAxisSubGridLine.color;if(this._xAxis_options.showMajor){for(var i=1,l=this._majorGridLineShape.length;i<l;i++){this._majorGridLineShape[i].color(this._xAxis_options.majorColor).width(this._xAxis_options.majorThickness)}}if(this._yAxis_options.showMajor){for(var i=1,l=this._majorGridLineShape.length;i<l;i++){this._majorGridLineShape[i].color(this._yAxis_options.majorColor).width(this._yAxis_options.majorThickness)}}if(this._xAxis_options.showMinor){for(var i=1,l=this._minorGridLineShape.length;i<l;i++){this._minorGridLineShape[i].color(this._xAxis_options.minorColor).width(this._xAxis_options.minorThickness)}}if(this._yAxis_options.showMinor){for(var i=1,l=this._minorGridLineShape.length;i<l;i++){this._minorGridLineShape[i].color(this._yAxis_options.minorColor).width(this._yAxis_options.minorThickness)}}if(this._xAxis_options.showSub){for(var i=1,l=this._subGridLineShape.length;i<l;i++){this._subGridLineShape[i].color(this._xAxis_options.subColor).width("1")}}if(this._yAxis_options.showSub){for(var i=1,l=this._subGridLineShape.length;i<l;i++){this._subGridLineShape[i].color(this._yAxis_options.subColor).width("1")}}};g.prototype.resetSubGridLineShape=function(){for(var i=1,l=this._subGridLineShape.length;i<l;i++){this._seriesLayer.removeShape(this._subGridLineShape[i])}};g.prototype.resetMajorGridLineShape=function(){for(var i=1;i<this._majorGridLineShape.length;i++){this._seriesLayer.removeShape(this._majorGridLineShape[i])}};g.prototype.resetMinorGridLineShape=function(){for(var i=1;i<this._minorGridLineShape.length;i++){this._seriesLayer.removeShape(this._minorGridLineShape[i])}};g.prototype.gestureUpdate=function(){if(this._xAxis_options.showMajor){var x=this._xAxis;var b=x.getMajorTicks();var l=M.abs(this._seriesMaskLayer.position().x-this._xAxisLayer[0].position().x);for(var i=1,c=b.length;i<c;i++){this._majorGridLineShape[i].from({x:b[i]-l,y:this._yAxis.getPreferredHeight()}).to({x:b[i]-l,y:0})}}if(this._yAxis_options.showMajor){var y=this._yAxis;var e=y.getMajorTicks();var l=M.abs(this._seriesMaskLayer.position().y-this._yAxisLayer[0].position().y);for(var i=1,c=e.length;i<c;i++){this._majorGridLineShape[i].from({x:0,y:e[i]+l}).to({x:this._xAxis.getPreferredWidth(),y:e[i]+l})}}if(this._xAxis_options.showMajor&&this._xAxis_options.showMinor){var x=this._xAxis;var f=x.getMinorTicks();var l=M.abs(this._seriesMaskLayer.position().x-this._xAxisLayer[0].position().x);for(var i=0,c=f.length;i<c;i++){this._minorGridLineShape[i+1].from({x:f[i]-l,y:this._yAxis.getPreferredHeight()}).to({x:f[i]-l,y:0})}}if(this._yAxis_options.showMajor&&this._yAxis_options.showMinor){var y=this._yAxis;var h=y.getMinorTicks();var l=M.abs(this._seriesMaskLayer.position().y-this._yAxisLayer[0].position().y);for(var i=0,c=h.length;i<c;i++){this._minorGridLineShape[i+1].from({x:0,y:h[i]+l}).to({x:this._xAxis.getPreferredWidth(),y:h[i]+l})}}if(!this._xAxis_options.showMajor&&this._xAxis_options.showSub){var b=this._xAxis.getMajorTicks();var j=this._xAxis.getTickInterval()/2;for(var i=1;i<b.length;i++){this._subGridLineShape[i].from({x:b[i]-j,y:this._yAxis.getPreferredHeight()}).to({x:b[i]-j,y:this._yAxis.getLastTickOffset()})}}if(!this._yAxis_options.showMajor&&this._yAxis_options.showSub){var e=this._yAxis.getMajorTicks();var j=this._yAxis.getTickInterval()/2;for(var i=0;i<e.length;i++){this._subGridLineShape[i+1].from({x:0,y:M.abs(e[i]-j)}).to({x:this._xAxis.getPreferredWidth(),y:M.abs(e[i]-j)})}}};return g});sap.riv.module({qname:'sap.riv.vizkit.Event',version:'1.0.0'},function Setup(){var E=function(t,b,c){this._type=t;this._target=this._currentTarget=b;this._canBubbling=c!==undefined?c:true;this._timestamp=+new Date};var a=E.prototype;a._setCurrentTarget_=function(c){this._currentTarget=c};a.type=function(){return this._type};a.timestamp=function(){return this._timestamp};a.target=function(){return this._target};a.currentTarget=function(){return this._currentTarget};a.isInBubbling=function(){return this._target.id()!=this._currentTarget.id()};a.shouldBubble=function(){return this._canBubbling};a.stopPropagation=function(){this._canBubbling=false};return E});sap.riv.module({qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(F){var a={Possible:0,Began:1,Changed:2,Recognized:3,Ended:3,Cancelled:4,Failed:5};var G=function(){this._grOwnerComp;this._grEnabled=true;this._grTouchTotal=0;this._grTouchTracker={};this._grState=a.Possible;this._grActions=[];this._grCancelTouches=true};var g=G.prototype;g._setOwnerComp_=function(o){this._grOwnerComp=o};g.attachedComponent=function(){return this._grOwnerComp};g.addGestureAction=function(b){var c=false;for(var i=0,l=this._grActions.length;i<l;i++){if(this._grActions[i]===b){c=true;break}}if(!c){this._grActions.push(b)}return!c};g.removeGestureAction=function(b){var f=false;for(var i=0,l=this._grActions.length;i<l;i++){if(this._grActions[i]===b){f=true;this._grActions.splice(i,1);break}}return f};g.globalLocOfGesture=function(){var s=this.state();if(this._grEnabled&&(s===a.Began||s===a.Cancelled||s===a.Ended||s===a.Recognized)){var c=0;var t=this._grTouchTracker,b;var x=y=0;for(var d in t){b=t[d].globalXY;x+=b.x;y+=b.y;c++}if(c){return{x:x/c,y:y/c}}}else{return}};g.involvedTouchePoints=function(){var r=[];var s=this.state();if(this._grEnabled&&(s===a.Began||s===a.Cancelled||s===a.Ended||s===a.Recognized)){var t=this._grTouchTracker;for(var b in t){r.push(b)}}return r};g.globalLocOfTouchPoints=function(){var c=0;var t=this._grTouchTracker,b;var x=y=0;for(var d in t){b=t[d].globalXY;x+=b.x;y+=b.y;c++}if(c){return{x:x/c,y:y/c}}};g.totalTouches=function(){return this._grTouchTotal};g.cancelTouches=function(c){if(c!==undefined){this._grCancelTouches=c;return this}else{return this._grCancelTouches}};g.enable=function(e){if(e!==undefined){this._grEnabled=e;if(!e){if(this._grState===a.Began||this._grState===a.Cancelled){this.state(a.Cancelled)}else{this.state(a.Failed)}}}else{return this._grEnabled}};g.touchBegin=function(b){if(this._grEnabled){var n=b.changedTouches;var c=this._grTouchTracker;var o=this._grOwnerComp;var p=o.pagePosition();for(var i=0,t,l=n.length;i<l;i++){t=n.item(i);c[t.identifier]={globalXY:o.convertPointToGlobal({x:t.pageX-p.x,y:t.pageY-p.y}),stopped:false};this._grTouchTotal++}this.doTouchBegin(b)}};g.touchMove=function(b){if(this._grEnabled){var m=b.changedTouches;var o=this._grOwnerComp;var p=o.pagePosition();var c=this._grTouchTracker;for(var i=0,t,l=m.length;i<l;i++){t=m.item(i);if(c[t.identifier]){c[t.identifier].globalXY=o.convertPointToGlobal({x:t.pageX-p.x,y:t.pageY-p.y})}}this.doTouchMove(b)}};g.touchEnd=function(b){if(this._grEnabled){var e=b.changedTouches;var c=this._grTouchTracker;var o=this._grOwnerComp;var p=o.pagePosition();for(var i=0,t,d,f,l=e.length;i<l;i++){t=e.item(i);d=t.identifier;f=c[d];if(f){f.globalXY=o.convertPointToGlobal({x:t.pageX-p.x,y:t.pageY-p.y});f.stopped=true;this._grTouchTotal--}}this.doTouchEnd(b)}};g.touchCancel=function(b){if(this._grEnabled){var c=b.changedTouches;var d=this._grTouchTracker;var o=this._grOwnerComp;var p=o.pagePosition();for(var i=0,t,e,f,l=c.length;i<l;i++){t=c.item(i);e=t.identifier;f=d[e];if(f){f.globalXY=o.convertPointToGlobal({x:t.pageX-p.x,y:t.pageY-p.y});f.stopped=true;this._grTouchTotal--}}this.doTouchCancel(b)}};g.doTouchBegin=F.noop;g.doTouchMove=F.noop;g.doTouchEnd=F.noop;g.doTouchCancel=F.noop;g.reset=function(){this._grState=a.Possible;this._grTouchTotal=0;this._grTouchTracker={}};g.state=function(t){return this._grState};g._setState_=function(t){switch(t){case a.Possible:break;case a.Began:this._grState=a.Began;for(var i=0,b=this._grActions,l=b.length;i<l;i++){b[i](this)}break;case a.Changed:if(this._grState===a.Began){this._grState=a.Changed}for(var i=0,b=this._grActions,l=b.length;i<l;i++){b[i](this)}break;case a.Cancelled:this._grState=a.Cancelled;for(var i=0,b=this._grActions,l=b.length;i<l;i++){b[i](this)}this.reset();break;case a.Failed:this._grState=a.Failed;this.reset();break;case a.Ended:case a.Recognized:this._grState=t;for(var i=0,b=this._grActions,l=b.length;i<l;i++){b[i](this)}this.reset();break}};G.TransitionState=a;return G});sap.riv.module({qname:'sap.riv.vizkit.TapGestureDetector',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,G,M){var t=G.TransitionState;var _=function(x,f){var g=x.x-f.x;var h=x.y-f.y;return M.sqrt(g*g+h*h)};var a=function(f,g){f._sequenceStarted=true;f._currentNumberOfTaps=0;f._firstStartXY=f.globalLocOfTouchPoints()};var b=50;var c=150;var d=20;var e=150;var T=O.derive(G,{constructor:function(f,g){this._touchesRequired=(typeof f==='number'&&f>0&&f<6)?f:1;this._tapsRequired=(typeof g==='number'&&g>0)?g:1;this._currentNumberOfTaps=0;this._firstStartXY=undefined;this._sequenceStarted=false;this._currentStartWhen=0},doTouchBegin:function(f){if(this.state()===t.Possible){var g=this.totalTouches();if(g===this._touchesRequired){var h=f.timeStamp;if(this._currentNumberOfTaps==0){a(this,f)}else{if(this._currentNumberOfTaps<this._tapsRequired){var i=_(this._firstStartXY,this.globalLocOfTouchPoints());var p=this._currentStartWhen;if(i>b||(h-p)>(c+e)){a(this,f)}}}this._currentStartWhen=h}else{this._setState_(t.Failed)}}},doTouchEnd:function(f){if(this.state()===t.Possible&&this._sequenceStarted){if(_(this._firstStartXY,this.globalLocOfTouchPoints())>b){this._setState_(t.Failed);return}var g=f.timeStamp-this._currentStartWhen;if(g>c||g<d){this._setState_(t.Failed);return}if(++this._currentNumberOfTaps===this._tapsRequired){this._setState_(t.Recognized)}}},doTouchCancel:function(f){if(this.state()===t.Possible){this._setState_(t.Failed)}},reset:function(){this.callParent('reset');this._currentNumberOfTaps=0;this._sequenceStarted=false;this._firstStartXY=undefined;this._firstStartWhen=0;this._currentStartWhen=0}});return T});sap.riv.module({qname:'sap.riv.viz.xychart.ChartModule',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.viz.shared.gridLine.GridLine',version:'1.0.0'},{qname:'sap.riv.core.Observable',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Rectangle',version:'1.0.0'}],function Setup(O,F,T,L,G,a,R){var c=O.derive(a,{constructor:function(o){this._chart_options=O.extend(true,{},o);this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._xaxes=null;this._yaxes=null;this._data=null;this._defaultSelectionArmed=true;this._scrollBar=[];this._seriesLayer=null;this.addEvents(this.getSupportedAppEvents());this._gridLine=new G()},init:function(){this._buildData();this.initSeries();this.initAxes();this.bindSeriesWithAxes();this.initScrollBar();this.initGridLineProperties()},_buildData:function(){this._data=[];var b=this._dataTree.getSubMembersAt();for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var s=[];var m=this._metaData.measureMembers[i];for(var j=0,e=b.length;j<e;j++){var d=[b[j]];var v=this._dataTree.getMeasuresAt(d)[m].sum.result;s.push({value:(T.isNumber(v))?v:'NaN',dimensionItemIndex:this._dataTree.getMeasuresAt(d)[m].sum.tags.dimensionItemIndex,measureIndex:this._dataTree.getMeasuresAt(d)[m].sum.tags.measureIndex})}this._data.push(s)}},updateProperties:function(p){var o={};o.properties=p;this._chart_options=O.extend(true,{},o)},updateOptions:function(o){this._chart_options=O.extend(true,{},o);this._dataTree=this._chart_options.dataTree;this._metaData=this._chart_options.metaData;this._hasDrawn=false},initAxes:F.unsupported,initSeries:F.unsupported,initScrollBar:F.noop,bindSeriesWithAxes:F.unsupported,drawSeries:F.unsupported,doChartLayout:F.unsupported,bindRenderer:F.unsupported,initGridLineProperties:F.unsupported,getSupportedAppEvents:F.unsupported,marqueeOverPoint:F.noop,hoverOnPoint:F.noop,clickOnPoint:F.noop,onblur:F.noop,drawViewPort:F.noop,position:F.noop,scale:F.noop,panMove:F.noop,pinchingResize:F.noop,backUp:F.noop,restore:F.noop,getPlotArea:F.noop,position:function(x,y){this._seriesLayer.position({x:x,y:y})},scrollBar:function(){var s=function(){this.SCROLLBARSIZE=6;this._layer=null;this._scrollBarRenderer=null};s.prototype.init=function(b,d,e){this._seriesMasklayer=b;this._seriesLayer=d;if(this._scrollBarRenderer){this._seriesMasklayer.removeShape(this._scrollBarRenderer)}this._scrollBarRenderer=this._seriesMasklayer.addShape(new R());this._direction=e;var f=this._seriesMasklayer.size();var p=this._seriesMasklayer.position();if(!e||e=='vertical'){this._scrollBarRenderer.width(this.SCROLLBARSIZE).height(f.height).topLeft([f.width-this.SCROLLBARSIZE,0]).cornerRadius(6).visible(true).borderWidth(1)}else{this._scrollBarRenderer.width(f.width).height(this.SCROLLBARSIZE).topLeft([0,0]).cornerRadius(6).visible(true).borderWidth(1)}this.hidden()};s.prototype.highLight=function(){this._scrollBarRenderer.visible(true).color('rgba(51,51,51, 0.6)').borderColor('rgba(255,255,255, 0.15)')};s.prototype.unHighLight=function(){this._scrollBarRenderer.visible(true).color('rgba(51,51,51, 0.3)').borderColor('rgba(255,255,255, 0.07)')};s.prototype.hidden=function(){this._scrollBarRenderer.visible(false)};s.prototype.update=function(){var b=this._seriesMasklayer.size();var d=this._seriesLayer.size();var e=this._seriesLayer.position();if(!this._direction||this._direction==='vertical'){var y;var f;if(e.y<=0){f=b.height*b.height/d.height;y=Math.abs(e.y)*b.height/d.height}else{f=(b.height-e.y)*b.height/d.height;y=-e.y*b.height/d.height}this._scrollBarRenderer.height(f);this._scrollBarRenderer.topLeft([b.width-this.SCROLLBARSIZE,y])}else{var x;var f;if(e.x<=0){f=b.width*b.width/d.width;x=Math.abs(e.x)*b.width/d.width}else{}this._scrollBarRenderer.width(f);this._scrollBarRenderer.topLeft([x,0])}},s.prototype.remove=function(){if(this._scrollBarRenderer){this._seriesMasklayer.removeShape(this._scrollBarRenderer)}};return new s()}});return c});sap.riv.module({qname:'sap.riv.viz.pie.PieController',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.UIController',version:'1.0.0'},{qname:'sap.riv.viz.pie.PieComponent',version:'1.0.0'}],function Setup(O,F,U,P){var C=O.derive(U,{constructor:function(o){this._dataset=o.dataset;this._pieComponent=undefined;this._option=o.option},initUIComponent:function(w,h){this._pieComponent=new P({id:'rootComponent',dataset:this._dataset,pieOptions:this._option,size:{w:w,h:h}});return this._pieComponent},doThemeApplied:function(t){this._pieComponent.applyTheme(t)},updateProperties:function(p){this._pieComponent.updateProperties(p)},getProperties:function(){return this._pieComponent.getProperties()},afterUIComponentLoaded:F.noop,beforeUIComponentAppear:F.noop,afterUIComponentAppear:function(){var a=this._pieComponent.getSupportedAppEvents();for(var i=a.length;i--;){this._pieComponent._pieComponent._chartModule.on({eventName:a[i],listener:this._fireInternalAppEvent,scope:this})}},beforeUIComponentDisappear:F.noop,afterUIComponentDisappear:F.noop,setDataset:function(d){this._dataset=d;this._pieComponent.setDataset(d)},_fireInternalAppEvent:function(e){this.fireAppEvent(e.name,e)}});return C});sap.riv.module({qname:'sap.riv.viz.AbstractVisualization',version:'1.0.0'},function Setup(){var i=0;var n=function(){return(i++).toString()};var A=function(h,p,d){this._viz=null;this._id=n()};A.prototype={id:function(){return this._id},'size':function(s){if(s){if(this._viz){this._viz.size(s);return this}}else{if(this._viz){return this._viz.size()}}},'setDataset':function(d){if(this._viz){this._viz.setDataset(d);return this}},'applyTheme':function(t){if(this._viz){this._viz.applyTheme(t);return this}},'properties':function(p){if(p){if(this._viz){this._viz.properties(p);return this}}else{if(this._viz){return this._viz.properties(p)}}},'updateProperties':function(p){if(this._viz){this._viz.properties(p);return this}},'addListener':function(e,l){if(this._viz){this._viz.addListener(e,l);return this}},'removeListener':function(e,l){if(this._viz){this._viz.removeListener(e,l);return this}},'getSupportedEvents':function(){if(this._viz){return this._viz.getSupportedEvent()}}};return A});sap.riv.module({qname:'sap.riv.viz.shared.dataConverter.BaseDataset',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(F){var B=function(){};B.prototype.exportTree=F.noop;return B});sap.riv.module({qname:'sap.riv.vizkit.ImageManager',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(O,L,F){var a=function(h){this._imgEl=h};a.prototype.getBitmap=function(){return this._imgEl};a.prototype.width=function(w){if(w!==undefined){this._imgEl.width=w;return this}return this._imgEl.width};a.prototype.height=function(h){if(h!==undefined){this._imgEl.height=h;return this}return this._imgEl.height};a.prototype.intrinsicHeight=function(){return this._imgEl.naturalHeight};a.prototype.intrinsicWidth=function(){return this._imgEl.naturalWidth};a.prototype.url=function(){return this._imgEl.src};var _=new L();var b=new L();var c={};var I={loadImage:function(i,u,o){if(i&&u){o=o||F.noop;if(b.has(i)){if(_.get(b.get(u))){o(true)}}var d=new Image();d.onabort=d.onerror=function(){o(false,{id:i,url:u})};d.onload=O.proxy(function(){var s=d.src;if(!_.has(s)){var e=new a(d);b.add(i,s);c[s]={ids:{id:i},length:1};_.add(s,e)}else{b.add(i,d.src);c[s].ids[i]=i;c[s].length++}o(true,{id:i,url:u})},this);d.src=u}},loadImages:function(u,o,d){o=o||F.noop;d=d||F.noop;var t=u.length;if(t==0){d(true)}else{var e=0;var f=function(g,h){e++;if(e<t){o(e/t,g,h)}else{d(true,h)}};for(var i=0,l=u.length;i<l;i++){I.loadImage(u[i].id,u[i].url,f)}}},hasImage:function(i){return b.has(i)},getImage:function(i){if(b.has(i)){return _.get(b.get(i))}},disposeImage:function(i){if(b.has(i)){var s=b.remove(i);delete c[s].ids[i];c[s].length--;if(c[s].length===0){delete c[s];_.remove(s)}}}};return I});sap.riv.module({qname:'sap.riv.vizkit.TouchEvent',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.Event',version:'1.0.0'}],function Setup(F,O,E){var $=jQuery;if(!$){F.error('Cannot find jQuery')}var T=function(i,g,l,p){this._id=i;this._target=g;this._localXY=l;this._pageXY=p};var t=T.prototype;t.identifier=function(){return this._id};t.target=function(){return this._target};t.localXY=function(){return{x:this._localXY.x,y:this._localXY.y}};t.pageXY=function(){return{x:this._pageXY.x,y:this._pageXY.y}};var a=function(g,h){this.tA=g,this.tM=h};var b=a.prototype;b.length=function(){return this.tA.length};b.item=function(i){if(i>=0&&(i<this.tA.length)){return this.tA[i]}};b.identifiedTouch=function(i){if(i){return this.tM[i]}};var c=O.derive(E,{constructor:function(g,h,i,j,k,l){this._relatedTarget=undefined;this._touches=j;this._targetTouches=k;this._changedTouches=l},touches:function(){return this._touches},targetTouches:function(){return this._targetTouches},changedTouches:function(){return this._changedTouches}});var _=function(g){var h=[],j={};for(var i=0,k,l,m=g.length;i<m;i++){k=e(g.item(i));if(k){l=f(g.item(i),k);h.push(l);j[l.identifier()]=l}}return new a(h,j)};var d=function(g){var h=[],j={};for(var i=0,k,l,m=g.length;i<m;i++){k=e(g[i]);if(k){l=f(g[i],k);h.push(l);j[l.identifier()]=l}}return new a(h,j)};var e=function(g){var h=$(g.target);while(h.length&&!h.data('selfComp')){h=h.parent()}return h.data('selfComp')};var f=function(g,h){var i=h.pagePosition();var l={x:g.pageX-i.x,y:g.pageY-i.y};return new T(g.identifier,h,l,{x:g.pageX,y:g.pageY})};c.buildFrom3TouchArray=function(g,h,i,j,k,l){var m=d(i);var n=d(k);var o=d(j);return new c(g,h,l,m,n,o)};c.buildFromDomTouchEvent=function(g,h,i,j){var k=_(i.touches);var l=_(i.targetTouches);var m=_(i.changedTouches);return new c(g,h,j,k,l,m)};return c});sap.riv.module({qname:'sap.riv.viz.shared.series.BarRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ColorUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.BaseRenderer',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Rectangle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Paths',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Animator',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'}],function Setup(T,C,M,B,R,P,O,A,a){var b=O.derive(B,{constructor:function(l,o){this._fillToZero=true;this._barStyle={isShowGradient:false,isShowInnerBorder:false,isShowOutBorder:false,isShowShadow:false};this._seriesPoints=[];this._seriesBackUpPoints=[];this._seriesColor=[];this._parseOptions(o);this._tpDecorativeRenderer=l.addShape(new R())},_parseOptions:function(o){this._barStyle.isShowGradient=o.isShowGradient;this._barStyle.isShowInnerBorder=o.isShowInnerBorder;this._barStyle.isShowOutBorder=o.isShowOutBorder;this._barStyle.isShowShadow=o.isShowShadow},draw:function(){this._resetShapes();var s=this.getSeriesGroups();if(s.length==0)return;var c=s[0].getSeriesList();if(c.length==0){return}this._seriesShapes=[];this._seriesColor=[];for(var i=0,l=c.length;i<l;i++){this._seriesColor.push(c[i]._seriesColor);this._seriesShapes[i]=this._initSeries(c[i]._data.length)}this._update()},redraw:function(){var s=this.getSeriesGroups();if(s.length==0)return;var c=s[0].getSeriesList();if(c.length==0){return}this._seriesColor=[];for(var i=0,l=c.length;i<l;i++){this._seriesColor.push(c[i]._seriesColor)}this._update();this.refresh()},_update:function(){var s=this.getSeriesGroups();if(s.length==0)return;var c=s[0].getSeriesList();if(c.length==0){return}var y=c[0].getYAxis();var d=y.getMajorTicks();var t=y.getTickInterval();var m=c[0]._barMarkerSize;m=this._calculateMarkSzie(c.length,t,m);this._seriesPoints=[];for(var i=0,l=c.length;i<l;i++){this._seriesPoints.push(this._calculateSeriesPoints(i,l,c[i],d,m));this._drawSeries(this._seriesShapes[i],this._seriesPoints[i],c[i])}this._doAnimation()},_calculateMarkSzie:function(c,t,d){var m;if(c==1){m=2*t/3}else{m=M.round(t/(1+c+(c-1)/8))}if(T.isDefined(d)&&(m>d))m=d;return m},_calculateSeriesPoints:function(I,c,s,y,m){var d=s.getData();var x=s.getXAxis();var e=0;var z=x.u2p(0);var p=[];var o=M.round(m/8);for(var i=0,l=d.length;i<l;i++){var f={};f.y1=y[i]-((c-2*I)*(m+o)-o)/2;if(this._fillToZero){f.x1=z}else{f.x1=e}f.y2=f.y1+m;f.x2=x.u2p(d[i].value);p.push(f)}return p},_initSeries:function(p){var r=[];for(var i=p;i--;){r[i]=this._addBarShape()}return r},_drawSeries:function(s,p,c,d){var e=c.getData();var f=c._seriesColor;var g;for(var i=p.length;i--;){g=p[i];if(T.isExist(d)){if(d[i]===1){s[i].dimensionItemIndex=e[i].dimensionItemIndex;s[i].measureIndex=e[i].measureIndex;this._drawBarShape(s[i],g,f)}}else{s[i].dimensionItemIndex=e[i].dimensionItemIndex;s[i].measureIndex=e[i].measureIndex;this._drawBarShape(s[i],g,f)}}},_doAnimation:function(p){var c=A;var s=this;if(!p){c.animate({values:[{type:'FLOAT',from:0.0,to:1}],duration:800,onStep:function(v){var d=s._seriesPoints;var e=s._seriesShapes;for(var i=0,l=e.length;i<l;i++){var f=e[i];for(var j=0,g=f.length;j<g;j++){var h=d[i][j];s._updateBarShapeDuringAnimation(e[i][j],h,s._seriesColor[i],v[0])}}for(var k=0,m=s._highlights,n=m.length;k<n;k++){s.highlight(m[k])}s.getLayer().setNeedsDisplay()},onComplete:function(){var d=s._seriesPoints;var e=s._seriesShapes;for(var i=0,l=e.length;i<l;i++){var f=e[i];for(var j=0,g=f.length;j<g;j++){if(e[i][j]){var h=d[i][j];s._updateBarShape(e[i][j],h,s._seriesColor[i],1)}}}for(var k=0,m=s._highlights,n=m.length;k<n;k++){s.highlight(m[k])}s.getLayer().setNeedsDisplay()}})}else{var d=s._seriesPoints;var e=s._seriesShapes;for(var i=0,l=e.length;i<l;i++){var f=e[i];for(var j=0,g=f.length;j<g;j++){if(e[i][j]){var h=d[i][j];s._updateBarShape(e[i][j],h,s._seriesColor[i],1)}}}for(var k=0,m=s._highlights,n=m.length;k<n;k++){s.highlight(m[k])}s.getLayer().setNeedsDisplay()}},_resetShapes:function(){for(var i=0,l=this._seriesShapes.length;i<l;i++){for(var j=0,s=this._seriesShapes[i],c=s.length;j<c;j++){this._removeBarShape(s[j])}}this._seriesShapes=[]},highlightOnPoint:function(p){var d=null;for(var i=0,l=this._seriesShapes.length;i<l;i++){var s=this.getSeriesGroups()[0].getSeriesList()[i];for(var j=0,c=this._seriesShapes[i],e=c.length;j<e;j++){var f=c[j];f.rect.color(s._seriesColor);if(f.rect.pointIn(p)){f.rect.color(C.adjust_brightness(s._seriesColor,50));d={"measureIndex":f.measureIndex,"dimensionItemIndex":f.dimensionItemIndex,"series":s}}}}this.refresh();return d},highlight:function(l){if(!l)return;var s,d;var c=this.getSeriesGroups()[0];if(T.isDefined(l.measureIndex)){s=c.getSeriesList()[l.measureIndex];this._doHighlight(l.measureIndex,l.dimensionItemIndex);d={"measureIndex":l.measureIndex,"dimensionItemIndex":l.dimensionItemIndex,"series":s}}if(T.isDefined(l.x)){var e=this.getShape(l);if(e&&e.measureIndex!=null){s=c.getSeriesList()[e.measureIndex];this._doHighlight(e.measureIndex,e.dimensionItemIndex);d={"measureIndex":e.measureIndex,"dimensionItemIndex":e.dimensionItemIndex,"series":s}}}this.refresh();return d},restore:function(l){if(!l)return;if(T.isDefined(l.measureIndex)){this._doRestoreHighlight();this.refresh()}},getShape:function(l){if(!l)return;var r={"measureIndex":null,"dimensionItemIndex":null,"shape":null};if(T.isDefined(l.measureIndex)){return this._seriesShapes[l.measureIndex][l.dimensionItemIndex]}if(T.isDefined(l.x)){for(var i=0,c=this._seriesShapes.length;i<c;i++){for(var j=0,s=this._seriesShapes[i].length;j<s;j++){if(this._seriesShapes[i][j].rect.pointIn(l)){r.measureIndex=i;r.dimensionItemIndex=j;r.shape=this._seriesShapes[i][j];return r}}}}},shapeExists:function(s,c){return this._seriesShapes[s]?this._seriesShapes[s][c]:undefined},_doHighlight:function(s,c){var d=this._seriesShapes;var i,j,e,f;for(i=0;i<d.length;i++){e=d[i];for(j=0;j<e.length;j++){f=e[j];if(f){f.rect.compositionMode({alpha:0.5});f.outerBorder.compositionMode({alpha:0.5});f.innerBorder.compositionMode({alpha:0.5})}}}var g=d[s]?d[s][c]:null;if(g){g.rect.compositionMode({alpha:1});g.outerBorder.compositionMode({alpha:1});g.innerBorder.compositionMode({alpha:1})}},_doRestoreHighlight:function(){var s=this._seriesShapes;var i,j,c,d;for(i=0;i<s.length;i++){c=s[i];for(j=0;j<c.length;j++){d=c[j];d.rect.compositionMode({alpha:1});d.outerBorder.compositionMode({alpha:1});d.innerBorder.compositionMode({alpha:1})}}},drawViewPort:function(s,v){var o=this.getLayer().position();this._seriesBackUpPoints=O.extend(true,[],this._seriesPoints);var c=this.getSeriesGroups();if(c.length==0)return;var d=c[0].getSeriesList();if(d.length==0){return}var y=d[0].getYAxis();var e=y.getMajorTicks();var t=y.getTickInterval();var m;d[0]._zommBarMarkerSize=m=this._calculateMarkSzie(d.length,t);var l=this.getLayer();this._seriesPoints=[];if(v){var p=[];for(var i=0,f=d.length;i<f;i++){var g=this._seriesShapes[i];var h=this._seriesPoints[i]=this._calculateSeriesPoints(i,f,d[i],e,m);for(var j=0;j<h.length;j++){if(h[j].y2+o.y<0||h[j].y1+o.y>=v.height){if(g[j]){this._removeBarShape(g[j])}g[j]=null}else{p[j]=1;if(!g[j]){g[j]=this._addBarShape()}}}this._drawSeries(g,h,d[i],p);p=[]}this._doAnimation(true)}else{for(var i=0,f=d.length;i<f;i++){var g=this._seriesShapes[i];var h=this._seriesPoints[i]=this._calculateSeriesPoints(i,f,d[i],e,m);for(var j=0;j<h.length;j++){if(!g[j]){g[j]=this._addBarShape()}}this._drawSeries(g,h,d[i])}this._doAnimation(true)}this.refresh()},_addBarShape:function(){var l=this.getLayer();return{'rect':l.addShape(new R()),'outerBorder':l.addShape(new P()),'innerBorder':l.addShape(new P())}},_removeBarShape:function(s){var l=this.getLayer();l.removeShape(s.rect);l.removeShape(s.outerBorder);l.removeShape(s.innerBorder)},_drawBarShape:function(s,p,c){var d=M.abs(p.y2-p.y1);var i=this._barStyle.isShowOutBorder,e=this._barStyle.isShowInnerBorder;if(d<8){i=false}if(d<5){e=false}var f=C.getColorSeriesForBar(c);s.rect.color(c);if(p.x1>p.x2){s.rect.topRight([p.x1,p.y1])}else{s.rect.topLeft([p.x1,p.y1])}s.innerBorder.reset();s.outerBorder.reset();s.innerBorder.borderWidth(1).borderColor(f[0]).visible(e);s.outerBorder.borderWidth(1).borderColor(f[3]).visible(i)},_updateBarShapeDuringAnimation:function(s,p,c,f){var w=M.abs(p.x1-p.x2)*f;var h=M.abs(p.y2-p.y1);if((w.toString()==='NaN')||(h.toString()==='NaN')){return}s.rect.width(w).height(h).shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'});var d=C.getColorSeriesForBar(c);if(this._barStyle.isShowGradient){if(p.x1>p.x2){s.rect.color({t:'lg',e:{x:0,y:p.y1},s:{x:w,y:p.y1},st:[{o:1,v:d[1]},{o:0,v:d[2]}]})}else{s.rect.color({t:'lg',s:{x:0,y:p.y1},e:{x:w,y:p.y1},st:[{o:1,v:d[1]},{o:0,v:d[2]}]})}}else{s.rect.color(c)}},_updateBarShape:function(s,p,c,f){var w=M.abs(p.x1-p.x2)*f;var h=M.abs(p.y2-p.y1);if((w.toString()==='NaN')||(h.toString()==='NaN')){return}s.rect.width(w).height(h);if(this._barStyle.isShowShadow){s.rect.shadow({offsetX:1,offsetY:2,blur:2,color:'rgba(0,0,0,0.5)'})}else{s.rect.shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'})}var d=C.getColorSeriesForBar(c);if(this._barStyle.isShowGradient){if(p.x1>p.x2){s.rect.color({t:'lg',e:{x:0,y:p.y1},s:{x:w,y:p.y1},st:[{o:1,v:d[1]},{o:0,v:d[2]}]})}else{s.rect.color({t:'lg',s:{x:0,y:p.y1},e:{x:w,y:p.y1},st:[{o:1,v:d[1]},{o:0,v:d[2]}]})}}else{s.rect.color(c)}var o=0;s.outerBorder.reset();if(s.outerBorder.visible()){this._drawBorderPath(s.outerBorder,p,w,o);o=o+1}s.innerBorder.reset();if(s.innerBorder.visible()){this._drawBorderPath(s.innerBorder,p,w,o)}},_drawBorderPath:function(s,p,d,o){var c=M.abs(p.x1-p.x2);if(c<2)return;if(p.x1>p.x2){s.moveTo(p.x1,p.y1+o).lineTo(p.x1-d+o,p.y1+o);if(c<3){s.moveTo(p.x1-d+o,p.y2-o)}else{s.lineTo(p.x1-d+o,p.y2-o)}s.lineTo(p.x1,p.y2-o)}else{s.moveTo(p.x1,p.y1+o).lineTo(p.x1+d-o,p.y1+o);if(c<3){s.moveTo(p.x1+d-o,p.y2-o)}else{s.lineTo(p.x1+d-o,p.y2-o)}s.lineTo(p.x1,p.y2-o)}},applyTheme:function(t){var s=a.getThemeSettings(t);var c=s.bar;this._barStyle.isShowGradient=c.isShowGradient;this._barStyle.isShowInnerBorder=c.isShowInnerBorder;this._barStyle.isShowOutBorder=c.isShowOutBorder;this._barStyle.isShowShadow=c.isShowShadow;this.redraw()},updateProperties:function(p){this._parseOptions(p)},hoverOnPoint:function(p){var d={};var s=this.getSeriesGroups();if(s.length==0)return;var c=s[0].getSeriesList();if(c.length==0){return}var y=c[0].getYAxis();var e=y.getMajorTicks();var h=y.getTickInterval()/2;var f=0,g=e.length-1;var i=false;var j;while(!i&&f<g){j=M.round((f+g)/2);var x=e[j]-p.y;if(M.abs(x)<=h)i=true;else if(x>=0){f=j+1}else{g=j-1}}if(!i)j=f;if(this._dataCtxOnPoint&&this._dataCtxOnPoint.dimensionItemIndex===j){return this._dataCtxOnPoint}d['dimensionItemIndex']=j;this._tpDecorativeRenderer.visible(true).width(this.getLayer().size().width).height(h*2).color('rgba(133,133,133, 0.4)').topLeft([0,M.round(e[j]-h)]);this.refresh();this._dataCtxOnPoint=null;this._dataCtxOnPoint=d;return d},onblur:function(p){this._dataCtxOnPoint=null;this._tpDecorativeRenderer.visible(false);this.refresh()}});return b});sap.riv.module({qname:'sap.riv.viz.shared.series.LineRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.BaseRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Animator',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Line',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Polygon',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Circle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Paths',version:'1.0.0'}],function Setup(T,M,B,S,O,A,a,L,P,C,b){var l=O.derive(B,{constructor:function(c,o){this._seriesPoints=[];this._isShowMarkerShadow=false;this._isShowLineShadow=false;this._tpDecorativeRenderer=c.addShape(new L());this._tpDecorativePathRenderers=[];this._parseOptions(o)},_parseOptions:function(o){this._isShowLineShadow=o.isShowLineShadow;this._isShowMarkerShadow=o.isShowMarkerShadow},draw:function(){this._resetShape();var s=this.getSeriesGroups();if(s.length==0)return;var c=s[0].getSeriesList();if(c.length==0){return}for(var i=0,d=c.length;i<d;i++){this._seriesShapes[i]=this._initSeries(c[i]._data.length,c[i])}this._update();this._regEvent()},_update:function(){var s=this.getSeriesGroups();var c=s[0].getSeriesList();var x=c[0].getXAxis();var d=x.getMajorTicks();this._seriesPoints=[];for(var i=0,e=c.length;i<e;i++){this._seriesPoints.push(this._calculateSeriesPoints(c[i],d))}for(var i=0,e=c.length;i<e;i++){this._drawSeries(this._seriesShapes[i],this._seriesPoints[i],c[i])}this._doAnimation()},redraw:function(){var s=this.getSeriesGroups();if(s.length==0)return;var c=s[0].getSeriesList();if(c.length==0){return}var i,d=c.length,e=false;for(i=0;i<d;i++){if(!(this._seriesShapes[i].marker[0]instanceof this._getMarkerObject(c[i]._markerSymbol))){e=true;break}}if(e){this._resetShape();this._seriesPoints=[];this.draw()}else{this._update();this.refresh()}},_getMarkerObject:function(m){var s;switch(m){case S.TRIANGLEMARKER:case S.DIAMONDMARKER:s=P;break;case S.CIRCLEMARKER:default:s=C;break}return s},_calculateSeriesPoints:function(s,x){var d=s.getData();var y=s.getYAxis();var p=[];for(var i=0,c=d.length;i<c;i++){var e={};e.x=x[i];e.y=y.u2p(d[i].value);p.push(e)}return p},_initSeries:function(p,s){var c=this.getLayer();var d={line:[],marker:[]};var m=s._markerSymbol;for(var i=0;i<p;i++){d.line[i]=c.addShape(new L())}for(var i=0;i<p;i++){switch(m){case S.TRIANGLEMARKER:case S.DIAMONDMARKER:d.marker[i]=c.addShape(new P());break;case S.CIRCLEMARKER:default:d.marker[i]=c.addShape(new C());break}}return d},_drawSeries:function(s,p,c,d){var m=c._markerSymbol;for(var i=0,e=p.length;i<e;i++){if((T.isExist(d))&&(d[i]!==1))break;if(!c.isVisible()){if(s.marker[i].rect){s.marker[i].rect.visible(false)}else{s.marker[i].visible(false)}s.line[i].visible(false)}if(this._isShowMarkerShadow){s.marker[i].shadow({offsetX:1,offsetY:2,blur:2,color:'rgba(0,0,0,0.5)'})}else{s.marker[i].shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'})}if(this._isShowLineShadow){s.line[i].shadow({offsetX:0,offsetY:2,blur:3,color:'rgba(0,0,0,0.5)'})}else{s.line[i].shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'})}}switch(m){case S.CIRCLEMARKER:{this._drawCircleMarkAndLine(s,p,c,d);break}case S.TRIANGLEMARKER:{this._drawTriangleMarkAndLine(s,p,c,d);break}case S.DIAMONDMARKER:{this._drawDiamondMarkAndLine(s,p,c,d);break}case S.PENTAGONMARKER:{this._drawPentagonMarkAndLine(s,p,c,d);break}default:{this._drawCircleMarkAndLine(s,p,c,d);break}}},_doAnimation:function(v){var s=this;if(!v){var h=s._highlights;var c=s.getSeriesGroups()[0].getSeriesList();for(var d=0,e=h.length;d<e;d++){this._doUnHighlight(h[d])}for(var d=0,e=h.length;d<e;d++){this._doHighlight(h[d],c[h[d].measureIndex])}A.animate({values:[{type:'FLOAT',from:0.0,to:1}],duration:800,onStep:function(o){var p=s._seriesPoints;var f=s._seriesShapes;var q=0;var r=s.getLayer().size().width*o[0];for(var i=0,g=p[0].length;i<g;i++){if(p[0][i].x>=r){q=i;break}}q++;for(var i=0;i<f.length;i++){var t=f[i].line;var m=f[i].marker;for(var j=0;j<q;j++){if(m[j]){m[j].visible(true)}if(j>0&&t[j]){t[j].visible(true)}}}var h=s._highlights;for(var d=0,e=h.length;d<e;d++){h[d].crossShape.visible(true);h[d].borderShape.visible(true)}s.getLayer().setNeedsDisplay()},onComplete:function(){var f=s._seriesShapes;for(var i=0,g=f.length;i<g;i++){var m=f[i].marker;var k=f[i].line;for(var j=0,n=m.length;j<n;j++){if(m[j]){m[j].visible(true)}if(j>0&&k[j]){k[j].visible(true)}}}}})}else{var f=s._seriesShapes;var c=s.getSeriesGroups()[0].getSeriesList();var h=s._highlights;for(var d=0,e=h.length;d<e;d++){this._doUnHighlight(h[d])}for(var d=0,e=h.length;d<e;d++){this._doHighlight(h[d],c[h[d].measureIndex])}for(var i=0,g=f.length;i<g;i++){var m=f[i].marker;var k=f[i].line;for(var j=0,n=m.length;j<n;j++){if(m[j]){m[j].visible(true)}if(j>0&&k[j]){k[j].visible(true)}}}var h=s._highlights;for(var d=0,e=h.length;d<e;d++){h[d].crossShape.visible(true);h[d].borderShape.visible(true)}s.refresh()}},_drawCircleMarkAndLine:function(c,p,s,d){if(!s.isVisible())return;var e=s._lineMarkerSize;var f=s._lineSize;var g=s._seriesColor;var h=s._lineColor;for(var i=0,j=p.length;i<j;i++){if(T.isExist(d)){if(d[i]===1){c.marker[i].fillingColor(g).center({x:p[i].x,y:p[i].y}).radius(e/2).visible(false);if(i!=0){c.line[i].visible(false).color(h).width(f).from({x:p[i-1].x,y:p[i-1].y}).to({x:p[i].x,y:p[i].y})}}}else{c.marker[i].fillingColor(g).center({x:p[i].x,y:p[i].y}).radius(e/2).visible(false);if(i!=0){c.line[i].visible(false).color(h).width(f).from({x:p[i-1].x,y:p[i-1].y}).to({x:p[i].x,y:p[i].y})}}}},_drawTriangleMarkAndLine:function(c,p,s,d){if(!s.isVisible())return;var e=s._lineMarkerSize;var f=s._lineSize;var g=s._seriesColor;var h=s._lineColor;for(var i=0,j=p.length;i<j;i++){if(T.isExist(d)){if(d[i]===1){var k=c.marker[i].visible(false);k.reset();k.fillingColor(g);this._drawTriangleVertices(k,p[i],e);k.close();if(i!=0){c.line[i].visible(false).color(h).width(f).from({x:p[i-1].x,y:p[i-1].y}).to({x:p[i].x,y:p[i].y})}}}else{var k=c.marker[i].visible(false);k.reset();k.fillingColor(g);this._drawTriangleVertices(k,p[i],e);k.close();if(i!=0){c.line[i].visible(false).color(h).width(f).from({x:p[i-1].x,y:p[i-1].y}).to({x:p[i].x,y:p[i].y})}}}},_drawDiamondMarkAndLine:function(c,p,s,d){if(!s.isVisible())return;var e=s._lineMarkerSize;var f=s._lineSize;var g=s._seriesColor;var h=s._lineColor;for(var i=0,j=p.length;i<j;i++){if(T.isExist(d)){if(d[i]===1){var k=c.marker[i].visible(false);k.reset();k.fillingColor(g);this._drawDiamondVertices(k,p[i],e);k.close();if(i!=0){c.line[i].visible(false).color(h).width(f).from({x:p[i-1].x,y:p[i-1].y}).to({x:p[i].x,y:p[i].y})}}}else{var k=c.marker[i].visible(false);k.reset();k.fillingColor(g);this._drawDiamondVertices(k,p[i],e);k.close();if(i!=0){c.line[i].visible(false).color(h).width(f).from({x:p[i-1].x,y:p[i-1].y}).to({x:p[i].x,y:p[i].y})}}}},_drawPentagonMarkAndLine:function(p,s){if(!s.isVisible())return},_resetShape:function(){var c=this.getLayer();for(var i=0,d=this._seriesShapes.length;i<d;i++){for(var m=this._seriesShapes[i].marker,j=m.length;j--;){c.removeShape(m[j])}for(var e=this._seriesShapes[i].line,j=e.length;j--;){c.removeShape(e[j])}}this._seriesShapes=[]},_regEvent:function(){},highlight:function(){if(this._seriesShapes.length===0)return;var c=this.getSeriesGroups()[0].getSeriesList();if(this._layerPrioritization){var h=this._highlights;if(h.length>0){var f=h[0]['measureIndex'];if(T.isExist(f)&&f<=(c.length-1)){if(this._seriesShapes.length>0){var d=this._seriesShapes[f];var e=this.getLayer();for(var i=0;i<d.marker.length;i++){e.removeShape(d.marker[i]);e.removeShape(d.line[i])}this._seriesShapes[f]=this._initSeries(c[f]._data.length,c[f]);var p=[];var x=c[0].getXAxis();var g=x.getMajorTicks();p=this._calculateSeriesPoints(c[f],g);this._drawSeries(this._seriesShapes[f],p,c[f]);var m=this._seriesShapes[f].marker;var j=this._seriesShapes[f].line;for(var i=0,k=m.length;i<k;i++){m[i].visible(true);j[i].visible(true)}if(this._dataCtxOnPoint){for(var i=0,n=this._tpDecorativePathRenderers,k=n.length;i<k;i++){e.removeShape(n[i])}this._tpDecorativePathRenderers=[];var o=this._dataCtxOnPoint.dimensionItemIndex;var s,q;for(var i=0,k=this._seriesShapes.length;i<k;i++){s=c[i];q=this._drawBorderShape(s._markerSymbol,i,o,1.5*s._lineMarkerSize,s._seriesColor);q.visible(true);this._tpDecorativePathRenderers[i]=q}}}}}}for(var i=0;i<this._highlights.length;i++){this._doHighlight(this._highlights[i],c[this._highlights[i].measureIndex]);this._highlights[i].crossShape.visible(true);this._highlights[i].borderShape.visible(true)}this.refresh()},_doHighlight:function(h,s){var m=h.measureIndex;var d=h.dimensionItemIndex;var c=1.7*s._lineMarkerSize;var e=s._seriesColor;if(!T.isExist(this._seriesShapes[m].marker[d]))return;var f=this._drawBorderShape(s._markerSymbol,m,d,c,e);h.borderShape=f;var g=this._drawCrossShape(m,d,c,f,e);h.crossShape=g},_doUnHighlight:function(h){var c=this.getLayer();c.removeShape(h.borderShape);c.removeShape(h.crossShape)},removeHighlights:function(){for(var i=0,c=this._highlights.length;i<c;i++){this._doUnHighlight(this._highlights[i])}this._highlights.splice(0,this._highlights.length);this.refresh()},drawViewPort:function(s,v){var o=this.getLayer().position();var c=this.getSeriesGroups();if(c.length==0)return;var d=c[0].getSeriesList();if(d.length==0){return}var x=d[0].getXAxis();var e=x.getMajorTicks();var t=x.getTickInterval();var f=this.getLayer();this._seriesPoints=[];if(v){var p=[];for(var i=0,g=d.length;i<g;i++){var h=this._seriesShapes[i].marker;var k=this._seriesShapes[i].line;var m=this._calculateSeriesPoints(d[i],e);this._seriesPoints.push(m);for(var j=0;j<m.length;j++){if(m[j].x+o.x<0||m[j].x+o.x>v.width+t){if(h[j]&&k[j]){f.removeShape(h[j]);f.removeShape(k[j])}h[j]=null;k[j]=null}else{p[j]=1;if(!h[j]&&!k[j]){k[j]=f.addShape(new L());switch(d[i]._markerSymbol){case S.CIRCLEMARKER:{h[j]=f.addShape(new C());break}default:{h[j]=f.addShape(new P());break}}}}}this._drawSeries(this._seriesShapes[i],m,d[i],p)}this._doAnimation(true)}else{for(var i=0,g=d.length;i<g;i++){var h=this._seriesShapes[i].marker;var k=this._seriesShapes[i].line;var m=this._calculateSeriesPoints(d[i],e);this._seriesPoints.push(m);for(var j=0,n=m.length;j<n;j++){if(h[j]){f.removeShape(h[j])}if(k[j]){f.removeShape(k[j])}k[j]=null;h[j]=null}for(var j=0;j<m.length;j++){if(!k[j])k[j]=f.addShape(new L())}for(var j=0;j<m.length;j++){if(!h[j]){switch(d[i]._markerSymbol){case S.CIRCLEMARKER:{h[j]=f.addShape(new C());break}default:{h[j]=f.addShape(new P());break}}}}this._drawSeries(this._seriesShapes[i],m,d[i])}this._doAnimation(true)}this.refresh()},applyTheme:function(t){var s=a.getThemeSettings(t);var c=s.line;var d=this.getSeriesGroups();if(d.length==0)return;var e=d[0].getSeriesList();if(e.length==0){return}for(var i=0,f=e.length;i<f;i++){e[i]._lineMarkerSize=c.marker.size;e[i]._lineSize=c.line.size}this._isShowLineShadow=c.line.isShowShadow;this._isShowMarkerShadow=c.marker.isShowShadow;this._update();this.refresh()},updateProperties:function(p){this._parseOptions(p)},hoverOnPoint:function(p,c){var d=this.getSeriesGroups();if(d.length==0)return;var e=d[0].getSeriesList();if(e.length==0){alert('rew');return}var x=e[0].getXAxis();var f=x.getMajorTicks();var h=x.getTickInterval()/2;var g=0,k=f.length-1;var m=false;var n;while(!m&&g<k){n=M.round((g+k)/2);var o=f[n]-p.x;if(M.abs(o)<=h)m=true;else if(o<=0){g=n+1}else{k=n-1}}if(!m)n=g;if(c){this._tpDecorativeRenderer.width(2).visible(true).color('rgb(0,0,0)').from({x:p.x,y:e[0].getYAxis().getLastTickOffset()}).to({x:p.x,y:this.getLayer().size().height}).shadow({offsetX:0,offsetY:0,blur:5,color:'rgba(80,80,80,1)'});this.refresh()}if(this._dataCtxOnPoint&&this._dataCtxOnPoint.dimensionItemIndex===n){return this._dataCtxOnPoint}var q=this.getLayer();var r=this._tpDecorativePathRenderers;for(var i=0,t=r.length;i<t;i++){q.removeShape(r[i])}this._tpDecorativePathRenderers=[];var u=this._highlights;for(var j=0,v=u.length;j<v;j++){var w=u[j];w.borderShape.visible(true);w.crossShape.visible(true)}var s,y;for(var i=0,t=this._seriesShapes.length;i<t;i++){if(this._seriesShapes[i].line.length>0||this._seriesShapes[i].marker.length>0){s=e[i];y=this._drawBorderShape(s._markerSymbol,i,n,1.5*s._lineMarkerSize,s._seriesColor);y.visible(true);this._tpDecorativePathRenderers[i]=y;var u=this._highlights;for(var j=0,v=u.length;j<v;j++){var w=u[j];if(w.measureIndex==i&&w.dimensionItemIndex==n){w.borderShape.visible(false);w.crossShape.visible(false)}}}}var z={};z['dimensionItemIndex']=n;this._dataCtxOnPoint=null;this._dataCtxOnPoint=z;return z},onblur:function(p){if(this._dataCtxOnPoint){var d=this._dataCtxOnPoint.dimensionItemIndex;if(this._isShowMarkerShadow){for(var i=0,c=this._seriesShapes.length;i<c;i++){this._seriesShapes[i].marker[d].shadow({offsetX:1,offsetY:2,blur:2,color:'rgba(0,0,0,0.5)'})}}}var h=this._highlights,e;for(var i=0,f=h.length;i<f;i++){e=h[i];e.borderShape.visible(true);e.crossShape.visible(true);this._seriesShapes[e.measureIndex].marker[e.dimensionItemIndex].shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'})}this._dataCtxOnPoint=null;this._tpDecorativeRenderer.visible(false);var g=this.getLayer();for(var i=0,j=this._tpDecorativePathRenderers,c=j.length;i<c;i++){g.removeShape(j[i])}this._tpDecorativePathRenderers=[];this.refresh()},_drawBorderShape:function(m,c,d,w,f){var e=null;var g=this._seriesShapes[c].marker[d];var h=this.getLayer();switch(m){case S.CIRCLEMARKER:{e=h.insertShapeBefore(new C(),g);break}default:{e=h.insertShapeBefore(new P(),g);break}}e.fillingColor('white').borderWidth(1).borderColor(f).visible(false);var p={x:this._seriesPoints[c][d].x,y:this._seriesPoints[c][d].y};switch(m){case S.CIRCLEMARKER:{this._drawHighlightedCircleMark(e,p,w);break}case S.TRIANGLEMARKER:{this._drawHighlightedTriangleMark(e,p,w);break}case S.DIAMONDMARKER:{this._drawHighlightedDiamondMarkAndLine(e,p,w);break}default:{this._drawHighlightedCircleMark(e,p,w);break}}g.shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'});return e},_drawCrossShape:function(m,d,c,e,f){var p={x:this._seriesPoints[m][d].x,y:this._seriesPoints[m][d].y};var g=c/2+2;var h=this.getLayer().insertShapeAfter(new b(),e);h.reset();h.moveTo(p.x,p.y-g);h.lineTo(p.x,p.y+g);h.moveTo(p.x-g,p.y);h.lineTo(p.x+g,p.y);h.borderWidth(1).borderColor(f).visible(false);return h},_drawHighlightedCircleMark:function(s,p,w){s.center({x:p.x,y:p.y}).radius(w/2)},_drawHighlightedTriangleMark:function(s,p,w){s.reset();this._drawTriangleVertices(s,p,w);s.close()},_drawHighlightedDiamondMarkAndLine:function(s,p,w){s.reset();this._drawDiamondVertices(s,p,w);s.close()},_drawTriangleVertices:function(s,p,c){var r=c/2;s.addVertices(p.x,p.y-r);s.addVertices(p.x+r*M.sqrt(3)/2,p.y+r/2);s.addVertices(p.x-r*M.sqrt(3)/2,p.y+r/2)},_drawDiamondVertices:function(s,p,c){s.addVertices(p.x,p.y-c/2);s.addVertices(p.x+c/2,p.y);s.addVertices(p.x,p.y+c/2);s.addVertices(p.x-c/2,p.y)}});return l});sap.riv.module({qname:'sap.riv.viz.shared.tooltip.TooltipRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Paths',version:'1.0.0'},{qname:'sap.riv.graphics.shape.TextLine',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Line',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Circle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Rectangle',version:'1.0.0'},{qname:'sap.riv.graphics.shape.Polygon',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'}],function Setup(O,T,P,a,L,C,R,b,c){var d=function(o,l){this._layer=l;this._display={singleMeasure:{text:{font:'bold 10px Arial',color:"#c2c2c2"},value:{font:'bold 14px Arial',color:"#ffffff"},padding:{vertical:9,horizontal:10}},multipleMeasure:{text:{font:'bold 10px Arial',color:"#c2c2c2"},value:{font:'bold 12px Arial',color:"#ffffff"},padding:{vertical:8,horizontal:10,inline:6,markerGap:7,defaultSpace:8}},valueFormat:[],textFormat:null,maxDimensionLabelWidth:150,maxMeasureLabelWidth:80};this._finalWidth={dimension:undefined,measure:undefined,value:undefined};this._shapeLayout={padding:3,radius:4,markerWidth:12,markerHeight:8,borderWidth:2};this._shapes={tooltip:null,dimensionLabel:null,separateLine:null,measureLabels:[],measureMarks:[],valueLabels:[]};this._currentValue={dimensionIndex:undefined,offset:undefined};this._parseOptions(o)};d.prototype._parseOptions=function(o){this._dataTree=o.dataTree;this._metaData=o.metaData;this._options=o.properties;this._borderColor="#cdcdcd";this._fill="rgba(0,0,0,0.8)";var t=this._options.tooltip;if(t.text.color!=null){this._display.singleMeasure.text.color=t.text.color;this._display.multipleMeasure.text.color=t.text.color}if(t.text.font!=null){this._display.singleMeasure.text.font=t.text.font;this._display.multipleMeasure.text.font=t.text.font}if(t.mainValue.color!=null){this._display.singleMeasure.value.color=t.mainValue.color;this._display.multipleMeasure.value.color=t.mainValue.color}if(t.mainValue.font!=null){this._display.singleMeasure.value.font=t.mainValue.font;this._display.multipleMeasure.value.font=t.mainValue.font}this._display.textFormat=t.text.formatString;var l=null;for(var i=0,e=this._metaData.measureMembers.length;i<e;i++){if(c.isExist(t.mainValue.formatString[i])){l=this._display.valueFormat[i]=t.mainValue.formatString[i]}else{this._display.valueFormat[i]=l}}this._size=this.getShapeSize();this._markerPos=this._getMarkerPos()};d.prototype.drawShape=function(o){if(o===this._currentValue.offset){return}else{this._currentValue.offset=o}var x=this._shapeLayout.padding,y=this._shapeLayout.padding,r=this._shapeLayout.radius,m=this._shapeLayout.markerWidth,e=this._shapeLayout.markerHeight;var w=this._size.width,h=this._size.height;if(this._markerPos=='left'){x+=e}if(this._markerPos=='top'){y+=e}if(this._shapes.tooltip===null){this._shapes.tooltip=this._layer.addShape(new P())}else{this._shapes.tooltip=this._layer.replaceShape(this._shapes.tooltip,new P())}var t=this._shapes.tooltip;t.moveTo(x,y+r);if(this._markerPos=='left'){t.lineTo(x,y+h/2-o-m/2);t.lineTo(x-e,y+h/2-o);t.lineTo(x,y+h/2-o+m/2)}t.lineTo(x,y+h-r);t.arc({x:x+r,y:y+h-r},r,Math.PI,Math.PI/2,false);if(this._markerPos=='bottom'){t.lineTo(x+w/2+o-m/2,y+h);t.lineTo(x+w/2+o,y+h+e);t.lineTo(x+w/2+o+m/2,y+h)}t.lineTo(x+w-r,y+h);t.arc({x:x+w-r,y:y+h-r},r,Math.PI/2,0,false);if(this._markerPos=='right'){t.lineTo(x+w,y+h/2-o+m/2);t.lineTo(x+w+e,y+h/2-o);t.lineTo(x+w,y+h/2-o-m/2)}t.lineTo(x+w,y+r);t.arc({x:x+w-r,y:y+r},r,0,3*Math.PI/2,false);if(this._markerPos=='top'){t.lineTo(x+w/2+o+m/2,y);t.lineTo(x+w/2+o,y-e);t.lineTo(x+w/2+o-m/2,y)}t.lineTo(x+r,y);t.arc({x:x+r,y:y+r},r,3*Math.PI/2,Math.PI,false);t.fillingColor({t:'css',v:'rgba(0,0,0,0.8)'}).borderWidth(this._shapeLayout.borderWidth).borderColor(this._borderColor).shadow({offsetX:1,offsetY:1,blur:5,color:'rgba(0,0,0,0.75)'})};d.prototype.drawContent=function(e){if(e===this._currentValue.dimensionIndex){return}else{this._currentValue.dimensionIndex=e}var f=this._dataTree.getSubMemberLabels();var m=this._metaData.measureMembers;var x=this._shapeLayout.padding;var y=this._shapeLayout.padding;if(this._markerPos==='left'){x+=this._shapeLayout.markerHeight}if(this._markerPos==='top'){y+=this._shapeLayout.markerHeight}var g;var t=sap.common.globalization.NumericFormatManager.getFormat(this._display.textFormat);var _=this;if(m.length==1){g=this._display.singleMeasure;if(this._shapes.dimensionLabel===null){this._shapes.dimensionLabel=this._layer.addShape(new a())}else{this._shapes.dimensionLabel=this._layer.replaceShape(this._shapes.dimensionLabel,new a())}if(this._shapes.valueLabels.length===0){this._shapes.valueLabels[0]=this._layer.addShape(new a())}else{this._shapes.valueLabels[0]=this._layer.replaceShape(this._shapes.valueLabels[0],new a())}var h=c.isExist(t)?t.display(f[e]):f[e];var j=T.measureText(g.text.font,h).width;this._shapes.dimensionLabel.text(h).font(g.text.font).textColor(g.text.color).width(this._finalWidth.dimension>j?j:this._finalWidth.dimension).visible(true);var v=this._dataTree.getMeasuresAt([e])[m[0]].sum.result;var k=sap.common.globalization.NumericFormatManager.getFormat(this._display.valueFormat[0]);v=c.isExist(k)?k.display(v):v;var l=T.measureText(g.value.font,v).width;this._shapes.valueLabels[0].text(v).font(g.value.font).textColor(g.value.color).width(this._finalWidth.value>l?l:this._finalWidth.value).visible(true);var n;if(this._markerPos==='left'){this._shapes.dimensionLabel.topLeft([x+g.padding.horizontal,y+g.padding.vertical]);n=this._shapes.dimensionLabel.bottomLeft().y;this._shapes.valueLabels[0].topLeft([x+g.padding.horizontal,n+g.padding.vertical])}else if(this._markerPos==='top'||this._markerPos==='bottom'){var o=x+this._size.width/2;this._shapes.dimensionLabel.topCenter([o,y+g.padding.vertical]);n=this._shapes.dimensionLabel.bottomLeft().y;this._shapes.valueLabels[0].topCenter([o,n+g.padding.vertical])}}else{g=this._display.multipleMeasure;var o=x+this._size.width/2;if(this._shapes.dimensionLabel!=null){this._layer.removeShape(this._shapes.dimensionLabel)}var h=c.isExist(t)?t.display(f[e]):f[e];var j=T.measureText(g.text.font,h).width;this._shapes.dimensionLabel=this._layer.addShape(new a()).text(h).font(g.text.font).textColor(g.text.color).width(this._finalWidth.dimension>j?j:this._finalWidth.dimension).visible(true).topCenter([o,y+g.padding.vertical]);var p=this._shapes.dimensionLabel.bottomLeft().y+g.padding.vertical;var q=x+this._size.width-g.padding.horizontal;var r=x+g.padding.horizontal;this._shapes.separateLine=this._layer.addShape(new L()).from({x:r,y:p}).to({x:q,y:p}).width(1).color({t:'lg',s:{x:r,y:p},e:{x:q,y:p},st:[{o:0,v:"#202020"},{o:0.5,v:"#ffffff"},{o:1,v:"#202020"}]}).visible(true);p+=g.padding.vertical;var s=this._options._additional;for(var i=0,u=m.length;i<u;i++){if(this._shapes.valueLabels[i]!=undefined){this._layer.removeShape(this._shapes.valueLabels[i])}var v=this._dataTree.getMeasuresAt([e])[m[i]].sum.result;var k=sap.common.globalization.NumericFormatManager.getFormat(this._display.valueFormat[i]);v=c.isExist(k)?k.display(v):v;var w=T.measureText(g.value.font,v);this._shapes.valueLabels[i]=this._layer.addShape(new a()).text(v).font(g.value.font).textColor(g.value.color).width(w.width).visible(true).rightCenter([q,p+w.height/2]);var z=T.measureText(g.text.font,m[i]);if(this._shapes.measureMarks[i]==undefined){this._shapes.measureMarks[i]=D(s.legendMarkers[i],{x:r,y:p+w.height/2-z.height/2},s.colorList[i],z.height)}var A=r+z.height+g.padding.markerGap;var B=z.width>this._finalWidth.measure?this._finalWidth.measure:z.width;if(this._shapes.measureLabels[i]==undefined){this._shapes.measureLabels[i]=this._layer.addShape(new a()).text(m[i]).font(g.text.font).textColor(g.text.color).width(B).visible(true).leftCenter([A,p+w.height/2]);}p+=w.height+g.padding.inline}}function D(E,F,G,H){var I=null;var J=H;switch(E){case"circle":I=_._layer.addShape(new C()).fillingColor(G).center({x:F.x+J/2,y:F.y+J/2}).radius(J/2);break;case"diamond":I=_._layer.addShape(new b());I.fillingColor(G);I.addVertices(F.x+J/2,F.y);I.addVertices(F.x,F.y+J/2);I.addVertices(F.x+J/2,F.y+J);I.addVertices(F.x+J,F.y+J/2);I.close();break;case"triangle":I=_._layer.addShape(new b());I.fillingColor(G);I.addVertices(F.x+J/2,F.y);I.addVertices(F.x,F.y+J);I.addVertices(F.x+J,F.y+J);I.close();break;case"rect":default:I=_._layer.addShape(new R());I.topLeft([F.x,F.y]).width(J).height(J).color(G);break}return I}};d.prototype.getSize=function(){var w=this._size.width+this._shapeLayout.padding*2;var h=this._size.height+this._shapeLayout.padding*2;if(this._markerPos==='bottom'||this._markerPos==='top'){h+=this._shapeLayout.markerHeight}else if(this._markerPos==='left'||this._markerPos==='right'){w+=this._shapeLayout.markerHeight}return{width:w,height:h}};d.prototype.getShapeSize=function(){var w=0,h=0;var e=this._dataTree.getSubMemberLabels();var m=this._metaData.measureMembers;var f=0,g=0,k=0,l=0,n=0,o=0;var p=m.length>1?this._display.multipleMeasure:this._display.singleMeasure;var t=sap.common.globalization.NumericFormatManager.getFormat(this._display.textFormat);var _=this;var q=function(){var D=k>_._display.maxMeasureLabelWidth?_._display.maxMeasureLabelWidth:k;_._finalWidth.measure=D;return l+p.padding.markerGap+p.padding.defaultSpace+D+n};for(var i=0,r=m.length;i<r;i++){var s=T.measureText(p.text.font,m[i]);k=s.width>k?s.width:k;l=s.height>l?s.height:l;for(var j=0,u=e.length;j<u;j++){if(i==0){var v=c.isExist(t)?t.display(e[j]):e[j];var s=T.measureText(p.text.font,v);f=s.width>f?s.width:f;g=s.height>g?s.height:g}if(this._dataTree.getMeasuresAt([j])){var x=this._dataTree.getMeasuresAt([j])[m[i]].sum.result;var y=sap.common.globalization.NumericFormatManager.getFormat(this._display.valueFormat[i]);x=c.isExist(y)?y.display(x):x;var z=T.measureText(p.value.font,x);n=z.width>n?z.width:n;o=z.height>o?z.height:o}}}if(m.length==1){if(n<f&&this._display.maxDimensionLabelWidth>f){w=f+p.padding.horizontal*2;this._finalWidth.dimension=f}else{w=n+p.padding.horizontal*2;this._finalWidth.dimension=n}h=o+g+p.padding.vertical*3;this._finalWidth.value=n}else{var A=q();var B=f>this._display.maxDimensionLabelWidth?this._display.maxDimensionLabelWidth:f;w=(A>B?A:B)+2*p.padding.horizontal;h=g+p.padding.vertical*4+m.length*o+(m.length-1)*p.padding.inline;this._finalWidth.dimension=(A>B?A:B);this._finalWidth.value=n}return{width:w,height:h}};d.prototype.reset=function(o){if(this._shapes.tooltip!=null){this._layer.removeShape(this._shapes.tooltip)}if(this._shapes.dimensionLabel!=null){this._layer.removeShape(this._shapes.dimensionLabel)}if(this._shapes.separateLine!=null){this._layer.removeShape(this._shapes.separateLine)}for(var i=0,l=this._shapes.measureLabels.length;i<l;i++){this._layer.removeShape(this._shapes.measureLabels[i])}for(var i=0,l=this._shapes.measureMarks.length;i<l;i++){this._layer.removeShape(this._shapes.measureMarks[i])}for(var i=0,l=this._shapes.valueLabels.length;i<l;i++){this._layer.removeShape(this._shapes.valueLabels[i])}this._dataTree=o.dataTree;this._metaData=o.metaData;this._finalWidth={dimension:undefined,measure:undefined,value:undefined};this._shapes={tooltip:null,dimensionLabel:null,separateLine:null,measureLabels:[],measureMarks:[],valueLabels:[]};this._currentValue={dimensionIndex:undefined,offset:undefined};this._parseOptions(o)};d.prototype._getMarkerPos=function(){switch(this._options.type){case'bar':return'left';case'combination':return'bottom';default:return}};d.prototype.getMarkerHeight=function(){return this._shapeLayout.markerHeight+this._shapeLayout.borderWidth};return d});sap.riv.module({qname:'sap.riv.viz.shared.tooltip.TooltipComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.viz.shared.tooltip.TooltipRenderer',version:'1.0.0'}],function Setup(O,C,P,L,T,a){var b=O.derive(C,{constructor:function(o){this._options=o.tooltip;this._canvasSurface=this.getCanvasSurface();this._layer=this._canvasSurface.getRootLayer();this._initialize()},_initialize:function(){this._renderer=new a(this._options,this._layer)},getSize:function(){return this._renderer.getSize()},doContentResize:function(o,n){this.callParent('doContentResize',o,n)},draw:function(i,o){this._renderer.drawShape(o);this._renderer.drawContent(i);this._layer.setNeedsDisplay()},reset:function(o){this._renderer.reset(o)},getMarkerHeight:function(){return this._renderer.getMarkerHeight()}});return b});sap.riv.module({qname:'sap.riv.viz.shared.axis.LinearAxisRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.core.utils.TextRuler',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.BasicAxisRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.FoucsCalculator',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.PositionCalculator',version:'1.0.0'}],function Setup(O,M,T,a,B,F,P){var l=O.derive(B,{constructor:function(o){this._laxr_initialize();return this},_laxr_initialize:function(){var o=this._baxr_options;this._labels.itemsValue=[];var c=F;var f=c.createFocus('full');var b=c.validateBounds(o.minValue,o.maxValue);this._minValue=b.min;this._maxValue=b.max;this.VALUE_LABEL_PRECISION=10000000;var d=f.calculateFocus({lineScaling:this._lineScaling,minValue:this._minValue,maxValue:this._maxValue});this._minValue=parseFloat(d.min.toFixed(8));this._maxValue=parseFloat(d.max.toFixed(8));this._majorInterval=d.major;this._minorInterval=parseFloat(d.minor.toFixed(8));this._hideOverlappingLabels=true;this._valueAxisFT=sap.common.globalization.NumericFormatManager.getFormat(this._labels.formatString[0]);this._FTminValue=a.isExist(this._valueAxisFT)?this._valueAxisFT.display(this._minValue):this._minValue;this._FTmaxValue=a.isExist(this._valueAxisFT)?this._valueAxisFT.display(this._maxValue):this._maxValue},distance:function(d){if(a.isExist(d)){this._distance=d;this._createLabelsAndPosition();if(!this._isLabelHorizontal()){this._direction='vertical'}if(this._hideOverlappingLabels){this._removeOverlappingLabels(this._labels.itemsPosition.length)}var t=T;if(this._position=='hb'||this._position=='ht'){if(this._direction=='horizontal'){this._axisMatrics.left=t.measureWidth(this._labels.font,this._labels.itemsValue[0].value())/2;this._axisMatrics.right=t.measureWidth(this._labels.font,this._labels.itemsValue[this._labels.itemsValue.length-1].value())/2}else{this._axisMatrics.left=this._axisMatrics.right=t.measureHeight(this._labels.font,this._FTmaxValue)/2}}else{this._axisMatrics.bottom=this._axisMatrics.top=t.measureHeight(this._labels.font,this._FTmaxValue)/2}return this}return this._distance},_createLabelsAndPosition:function(){if(!this._labels.show){return}var m=this._majorInterval;var b=this._minorInterval;var p=this._calculatePositionMultiplier(false);var c=0.0;if(this._hideOverlappingLabels){c=0.5}var n=0;var d=this._labels.itemsPosition=[];this._labels.itemsValue=[];var v=this._minValue;var e=this._calculatePositionFromValue(v,p);var i=0;while((M.round(v*this.VALUE_LABEL_PRECISION)/this.VALUE_LABEL_PRECISION)<(M.round(this._maxValue*this.VALUE_LABEL_PRECISION)/this.VALUE_LABEL_PRECISION)){var f=new this.Label();var g=a.isExist(this._valueAxisFT)?this._valueAxisFT.display(v):v;f.visible(true);f.value(g);d.push((e)||0);this._labels.itemsValue.push(f);var h=this._calculateNextValidInterval(e,p,v,m,c);e=h.position;if(v>=h.value)break;v=h.value;i++}e=this._calculatePositionFromValue(this._maxValue,p);f=new this.Label();f.visible(true);f.value(a.isExist(this._valueAxisFT)?this._valueAxisFT.display(v):v);d.push((e)||0);this._labels.itemsValue.push(f)},_calculateNextValidInterval:function(b,p,c,i,d){if(!a.isExist(d)){d=0.5}var n=this._add(c,i);var e=this._calculatePositionFromValue(n,p);if(M.abs(e-b)<d){var m;m=this._calculateValueFromPosition(e+d,p);var f=M.ceil((m-n)/i);n+=f*i;e=this._calculatePositionFromValue(n,p)}return{position:e,value:n}},_add:function(b,c){var r,d,m;try{r=b.toString().split(".")[1].length}catch(e){r=0}try{d=c.toString().split(".")[1].length}catch(e){d=0}m=M.pow(10,M.max(r,d));return(b*m+c*m)/m},_calculatePositionFromValue:function(v,p){var b=0;if(this._lineScaling=="linear")b=P.calculateLinearPosition(v,p,this._minValue);else b=P.calculateLogarithmicPosition(v,p,this._minValue);return b},_calculateValueFromPosition:function(p,b){var v=0;if(this._lineScaling=="linear")v=P.calculateLinearValue(p,b,this._minValue);else v=P.calculateLogarithmicValue(p,b,this._minValue);return v},_getLongestWidth:function(){if(!a.isExist(this._longestWidth)||this._longestWidth==0){var t=T;if(this._FTminValue.toString().length>this._FTmaxValue.toString().length){this._longestWidth=t.measureWidth(this._labels.font,this._FTminValue)}else{this._longestWidth=t.measureWidth(this._labels.font,this._FTmaxValue)}}return this._longestWidth},_removeOverlappingLabels:function(n){var t=T;if(n<3)return;var r=(this._position=='hb'||this._position=='ht')&&this._direction=='vertical';r=r|(this._position=='vl'||this._position=='vr');if(r&&this._lineScaling=='linear'){var b=t.measureHeight(this._labels.font);var c=this._distance;var m=M.floor(c/b);this._hideOverlappingLabelsByBestInterval(n,m);this._removeLastTwoOverlappedLabel(n)}else{var d=n-1;for(var i=n-2;i>=1;i--){var e=this._labels.itemsValue[i];if(0==e.value()){continue}}}},_removeLastTwoOverlappedLabel:function(n){},_hideOverlappingLabelsByBestInterval:function(n,m){if(m>=n){return}var b=0;for(;b<=n-2;b++){if((0==(n-1)%(b+1))&&((n-1)/(b+1)<=m)){break}}for(var i=n-2;i>=1;i--){var c=this._labels.itemsValue[i];if(i%(b+1)!=0){c.visible(false)}}}});return l});sap.riv.module({qname:'sap.riv.viz.shared.tooltip.BaseTooltip',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.tooltip.TooltipComponent',version:'1.0.0'}],function Setup(T,a){var d={enable:false,customization:null,mainValue:{color:undefined,font:undefined,formatString:['']},subValue:{color:undefined,font:undefined,formatString:['']},text:{color:undefined,font:undefined,formatString:''}};var B=function(o){this._init(o)};var b=B.prototype;b._init=function(o){this._parent=o.parent;this._options=o;this._component=new a({enable:true,hidden:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:0,h:0},tooltip:{metaData:o.metaData,dataTree:o.dataTree,properties:o.properties},id:'tooltipComponent'});this._parent.addSubComponent(this._component);this._size=this._getSize();this._component.size(this._size)};b.getZone=function(){return{top:0,left:0,bottom:this._parent.size().height,right:this._parent.size().width}};b.getPlotArea=function(){return this._parent._chartComponent.getPlotArea()};b.show=function(e){if(!this._options.properties.tooltip.enable){return}var c=false;var f=e.data[0].dimensionItemIndex;var m=this._options.metaData.measureMembers;for(var i=0,l=m.length;i<l;i++){var v=this._options.dataTree.getMeasuresAt([f]);if(T.isDefined(v)&&T.isDefined(v[m[i]].sum.result)&&v[m[i]].sum.result!='NaN'){c=true;break}}var g=this._options.dataTree.getSubMemberLabels();if(T.isUndefined(g[f])){c=false}if(!c){this.hide();return}var z=this.getZone();var h=this.getPlotArea();var j=this._component.getMarkerHeight();var s=this._size;var p=e.data[0].point;var x,y,o=0;switch(this._options.properties.type){case'bar':x=z.right>(h.right+s.width-j)?h.right-j:(z.right-s.width);if(z.top>p.y-s.height/2){y=z.top;o=z.top-(p.y-s.height/2)}else if(z.bottom<p.y+s.height/2){y=z.bottom-s.height;o=z.bottom-(p.y+s.height/2)}else{y=p.y-s.height/2}break;case'combination':y=z.top<(h.top-s.height+j)?(h.top-s.height+j):z.top;if(z.left>p.x-s.width/2){x=z.left;o=p.x-s.width/2-z.left}else if(z.right<p.x+s.width/2){x=z.right-s.width;o=p.x+s.width/2-z.right}else{x=p.x-s.width/2}break;default:break}this._component.position({x:x,y:y});this._draw(e.data[0].dimensionItemIndex,o);this._component.markShow()};b.hide=function(e){if(!this._options.properties.tooltip.enable){return}this._component.markHide()};b.reset=function(o){this._options=o;this._component.reset(o);this._size=this._getSize();this._component.size(this._size)};b._getSize=function(){return this._component.getSize()};b._draw=function(c,o){return this._component.draw(c,o)};b.getCustomization=function(){return this._options.properties.tooltip.customization};B.getDefaultOption=function(){return d};return B});sap.riv.module({qname:'sap.riv.vizkit.DataTree',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'}],function Setup(O){var D=function(g,s){this._gr=g;this._stats=s};D.dataTreeFromJSON=function(j){var a=JSON.parse(j);var s=[];var r={member:'root',subNodes:{},subMembers:[],subMemberLabels:[],leafMemberCount:0,result:{}};var p=[{rNode:r,cNode:a,traversed:false,cIdx:0}];while(p.length){var c=p[p.length-1];var b=c.cNode;var e=c.rNode;if(!c.traversed){e.member=b.member;for(var m in b.measureValues){e.result[m]=O.extend({},b.measureValues[m])}c.traversed=true;s[p.length-1]=s[p.length-1]||{longest:b.member,shortest:b.member,allMembers:[]};s[p.length-1].allMembers.push(b.member);if(s[p.length-1].longest.length<b.member.length){s[p.length-1].longest=b.member}if(s[p.length-1].shortest.length>b.member.length){s[p.length-1].shortest=b.member}}if(b.subNodes.length>c.cIdx){e.subMembers.push(b.subNodes[c.cIdx].member);e.subMemberLabels.push(b.subNodes[c.cIdx].label);var f={member:'',subNodes:{},subMembers:[],subMemberLabels:[],leafMemberCount:0,result:{}};e.subNodes[b.subNodes[c.cIdx].member]=f;p.push({rNode:f,cNode:b.subNodes[c.cIdx],traversed:false,cIdx:0});c.cIdx++}else{if(b.subNodes.length==0){p.pop();if(p.length){p[p.length-1].rNode.leafMemberCount++}}else{p.pop();if(p.length){p[p.length-1].rNode.leafMemberCount+=e.leafMemberCount}}}}s.shift();return new D(r,s)};var d=D.prototype;d.dataTreeToJSON=function(){var o={member:'',measureValues:{},subNodes:[]};var p=[{rNode:o,cNode:this._gr,traversed:false,cIdx:0}];while(p.length){var c=p[p.length-1];var a=c.cNode;var r=c.rNode;if(!c.traversed){r.member=a.member;for(var m in a.result){r.measureValues[m]=O.extend({},a.result[m])}c.traversed=true}if(a.subMembers.length>c.cIdx){var b={member:'',measureValues:{},subNodes:[]};r.subNodes.push(b);p.push({rNode:b,cNode:a.subNodes[a.subMembers[c.cIdx]],traversed:false,cIdx:0});c.cIdx++}else{p.pop()}}return JSON.stringify(o)};d.getGroupDepth=function(){return this._stats.length};d.getLevelStatistics=function(g){return this._stats[g]};d.getSubMembersAt=function(m){var s=this._gr;if(m!==undefined){for(var i=0,l=m.length;i<l;i++){s=s.subNodes[m[i]];if(!s){return undefined}}}return s.subMembers};d.getSubMemberLabels=function(p){var n=this._gr;if(p!==undefined){for(var i=0,l=p.length;i<l;i++){n=n.subNodes[p[i]];if(!n){return undefined}}}return n.subMemberLabels};d.getMeasuresAt=function(m){var s=this._gr;if(m!==undefined){for(var i=0,l=m.length;i<l;i++){s=s.subNodes[m[i]];if(!s){return undefined}}}return s.result};d.getLeafMemberCount=function(m){var s=this._gr;if(m!==undefined){for(var i=0,l=m.length;i<l;i++){s=s.subNodes[m[i]]}}return s.leafMemberCount};d.getContriRows=function(m){var s=this._gr;if(m!==undefined){for(var i=0,l=m.length;i<l;i++){s=s.subNodes[m[i]]}}return s.contriRows?s.contriRows.concat():undefined};d.setMeasureTagsAt=function(m,a,b,t){var s=this._gr;if(m!==undefined){for(var i=0,l=m.length;i<l;i++){s=s.subNodes[m[i]]}}for(var c in s.result){if(c===a){if(s.result[c].hasOwnProperty(b)){s.result[c][b].tags=t}}}};return D});sap.riv.module({qname:'sap.riv.viz.shared.series.ColumnBarRenderer',version:'1.0.0'},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ColorUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.BarRenderer',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.Animator',version:'1.0.0'}],function Setup(T,C,B,M,O,A){var c=O.derive(B,{constructor:function(l,o){},draw:function(){this._resetShapes();var s=this.getSeriesGroups();if(s.length===0)return;var a=s[0].getSeriesList();if(a.length===0)return;this._seriesColor=[];for(var i=0,l=a.length;i<l;i++){this._seriesColor.push(a[i]._seriesColor);this._seriesShapes[i]=this._initSeries(a[i]._data.length)}this._update();this._regEvent()},_update:function(){var s=this.getSeriesGroups();if(s.length==0)return;var a=s[0].getSeriesList();if(a.length==0)return;var x=a[0].getXAxis();var b=x.getMajorTicks();var t=x.getTickInterval();var m=a[0]._barMarkerSize;m=this._calculateMarkSzie(a.length,t,m);this._seriesPoints=[];for(var i=0,l=a.length;i<l;i++){this._seriesPoints.push(this._calculateSeriesPoints(i,l,a[i],b,m));this._drawSeries(this._seriesShapes[i],this._seriesPoints[i],a[i])}this._doAnimation()},_drawSeries:function(s,p,a,d){var b=a.getData();var e=a._seriesColor;for(var i=p.length;i--;){if(T.isExist(d)){if(d[i]===1){var f=p[i];s[i].dimensionItemIndex=b[i].dimensionItemIndex;s[i].measureIndex=b[i].measureIndex;if(!a.isVisible()){s[i].rect.visible(false);s[i].outerBorder.visible(false);s[i].innerBorder.visible(false)}this._drawBarShape(s[i],f,e)}}else{var f=p[i];s[i].dimensionItemIndex=b[i].dimensionItemIndex;s[i].measureIndex=b[i].measureIndex;if(!a.isVisible()){s[i].rect.visible(false);s[i].outerBorder.visible(false);s[i].innerBorder.visible(false)}this._drawBarShape(s[i],f,e)}}},_doAnimation:function(v){var a=A;var s=this;if(!v){a.animate({values:[{type:'FLOAT',from:0.0,to:1}],duration:800,onStep:function(e){var b=s._seriesPoints;var d=s._seriesShapes;for(var i=0,l=d.length;i<l;i++){for(var j=0;j<d[i].length;j++){var p=b[i][j];s._updateBarShapeDuringAnimation(d[i][j],p,s._seriesColor[i],e[0])}}if(s._highlights&&s._highlights.length>0){s.highlight()}s.refresh()},onComplete:function(){var b=s._seriesPoints;var d=s._seriesShapes;for(var i=0,l=d.length;i<l;i++){for(var j=0;j<d[i].length;j++){if(d[i][j]){var p=b[i][j];s._updateBarShape(d[i][j],p,s._seriesColor[i],1)}}}if(s._highlights&&s._highlights.length>0){s.highlight()}s.refresh()}})}else{var b=s._seriesPoints;var d=s._seriesShapes;for(var i=0,l=d.length;i<l;i++){for(var j=0;j<d[i].length;j++){if(d[i][j]){var p=b[i][j];s._updateBarShape(d[i][j],p,s._seriesColor[i],1)}}}if(s._highlights&&s._highlights.length>0){s.highlight()}s.refresh()}},_calculateSeriesPoints:function(I,s,a,x,m){var d=a.getData();var y=a.getYAxis();var b=y.getMajorTicks()[0];var z=y.u2p(0);var p=[];var o=M.round(m/8);for(var i=0,l=d.length;i<l;i++){var e={};e.x1=x[i]-((s-2*I)*(m+o)-o)/2;if(this._fillToZero){e.y2=z;if(b<z){e.y2=b}}else{e.y2=b}e.y1=y.u2p(d[i].value);e.x2=e.x1+m;p.push(e)}return p},_regEvent:function(){},_drawBarShape:function(s,p,b){if(!s.rect.visible())return;var a=M.abs(p.x1-p.x2);var i=this._barStyle.isShowOutBorder,d=this._barStyle.isShowInnerBorder;if(a<8){i=false}if(a<5){d=false}var e=C.getColorSeriesForBar(b);s.rect.color(b);if(p.y1>p.y2){s.rect.topRight([p.x2,p.y2])}else{s.rect.bottomRight([p.x2,p.y2])}s.innerBorder.reset();s.outerBorder.reset();s.innerBorder.borderWidth(1).borderColor(e[0]).visible(d);s.outerBorder.borderWidth(1).borderColor(e[3]).visible(i)},_updateBarShapeDuringAnimation:function(s,p,b,f){var w=M.abs(p.x1-p.x2);var h=M.abs(p.y2-p.y1)*f;if((w.toString()==='NaN')||(h.toString()==='NaN')){return}s.rect.width(w).height(h).shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'});var a=C.getColorSeriesForBar(b);if(this._barStyle.isShowGradient){if(p.y1>p.y2){s.rect.color({t:'lg',e:{x:p.x1,y:0},s:{x:p.x1,y:h},st:[{o:0,v:a[1]},{o:1,v:a[2]}]})}else{s.rect.color({t:'lg',s:{x:p.x1,y:0},e:{x:p.x1,y:h},st:[{o:0,v:a[1]},{o:1,v:a[2]}]})}}else{s.rect.color(b)}},_updateBarShape:function(s,p,b,f){var w=M.abs(p.x1-p.x2);var h=M.abs(p.y2-p.y1)*f;if((w.toString()==='NaN')||(h.toString()==='NaN')){return}s.rect.width(w).height(h);if(this._barStyle.isShowShadow){s.rect.shadow({offsetX:2,offsetY:1,blur:2,color:'rgba(0,0,0,0.5)'})}else{s.rect.shadow({offsetX:0,offsetY:0,blur:0,color:'rgba(0,0,0,0.5)'})}var a=C.getColorSeriesForBar(b);if(this._barStyle.isShowGradient){if(p.y1>p.y2){s.rect.color({t:'lg',e:{x:p.x1,y:0},s:{x:p.x1,y:h},st:[{o:0,v:a[1]},{o:1,v:a[2]}]})}else{s.rect.color({t:'lg',s:{x:p.x1,y:0},e:{x:p.x1,y:h},st:[{o:0,v:a[1]},{o:1,v:a[2]}]})}}else{s.rect.color(b)}var o=0;s.outerBorder.reset();if(this._barStyle.isShowOutBorder){this._drawBorderPath(s.outerBorder,p,h,o);o=o+1}s.innerBorder.reset();if(this._barStyle.isShowInnerBorder){this._drawBorderPath(s.innerBorder,p,h,o)}},_drawBorderPath:function(s,p,d,o){var b=M.abs(p.y2-p.y1);if(b<2)return;if(p.y1>p.y2){s.moveTo(p.x2-o,p.y2).lineTo(p.x2-o,p.y2+d-o);if(b<3){s.moveTo(p.x1+o,p.y2+d-o)}else{s.lineTo(p.x1+o,p.y2+d-o)}s.lineTo(p.x1+o,p.y2)}else{s.moveTo(p.x2-o,p.y2).lineTo(p.x2-o,p.y2-d+o);if(b<3){s.moveTo(p.x1+o,p.y2-d+o)}else{s.lineTo(p.x1+o,p.y2-d+o)}s.lineTo(p.x1+o,p.y2)}},highlight:function(){var s=this._seriesShapes;if(s.length===0)return;var i,j,a,b;for(i=0;i<s.length;i++){a=s[i];for(j=0;j<a.length;j++){b=a[j];if(b){b.rect.compositionMode({alpha:0.5});b.outerBorder.compositionMode({alpha:0.5});b.innerBorder.compositionMode({alpha:0.5})}}}var h=this._highlights,d;for(var i=0,l=h.length;i<l;i++){d=s[h[i].measureIndex]?s[h[i].measureIndex][h[i].dimensionItemIndex]:null;if(d){d.rect.compositionMode({alpha:1});d.outerBorder.compositionMode({alpha:1});d.innerBorder.compositionMode({alpha:1})}}this.refresh()},removeHighlights:function(){this._highlights.splice(0,this._highlights.length);var s=this._seriesShapes;var i,j,a,b;for(i=0;i<s.length;i++){a=s[i];for(j=0;j<a.length;j++){b=a[j];b.rect.compositionMode({alpha:1});b.outerBorder.compositionMode({alpha:1});b.innerBorder.compositionMode({alpha:1})}}this.refresh()},drawViewPort:function(s,v){var o=this.getLayer().position();var a=this.getSeriesGroups();if(a.length===0){return}var b=a[0].getSeriesList();if(b.length===0){return}var x=b[0].getXAxis();var d=x.getMajorTicks();var t=x.getTickInterval();var m;b[0]._zoomBarMarkerSize=m=this._calculateMarkSzie(b.length,t);this._seriesPoints=[];if(v){var p=[];for(var i=0,l=b.length;i<l;i++){var e=this._seriesShapes[i];var f=this._seriesPoints[i]=this._calculateSeriesPoints(i,l,b[i],d,m);for(var j=0;j<f.length;j++){if(f[j].x2+o.x<0||f[j].x1+o.x>v.width){if(e[j]){this._removeBarShape(e[j])}e[j]=null}else{p[j]=1;if(!e[j]){e[j]=this._addBarShape()}}}this._drawSeries(e,f,b[i],p);p=[]}this._doAnimation(true)}else{for(var i=0,l=b.length;i<l;i++){var e=this._seriesShapes[i];var g=this._seriesPoints[i]=this._calculateSeriesPoints(i,l,b[i],d,m);for(var j=0;j<g.length;j++){if(!e[j]){e[j]=this._addBarShape()}}this._drawSeries(e,g,b[i])}this._doAnimation(true)}this.refresh()},hoverOnPoint:function(p){var s=this.getSeriesGroups();if(s.length==0)return;var a=s[0].getSeriesList();if(a.length==0){return}var x=a[0].getXAxis();var b=x.getMajorTicks();var h=x.getTickInterval()/2;var d=0,e=b.length-1;var f=false;var g;while(!f&&d<e){g=M.round((d+e)/2);var i=b[g]-p.x;if(M.abs(i)<=h)f=true;else if(i<=0){d=g+1}else{e=g-1}}if(!f)g=d;if(this._dataCtxOnPoint&&this._dataCtxOnPoint.dimensionItemIndex===g){return this._dataCtxOnPoint}var j={};j['dimensionItemIndex']=g;this._tpDecorativeRenderer.visible(true).width(h*2).height(this.getLayer().size().height-a[0].getYAxis().getLastTickOffset()).color('rgba(133,133,133, 0.4)').topLeft([M.round(b[g]-h),a[0].getYAxis().getLastTickOffset()]);this.refresh();this._dataCtxOnPoint=null;this._dataCtxOnPoint=j;return j},});return c});sap.riv.module({qname:'sap.riv.viz.shared.series.SeriesHighlighter',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(f){var e=function(o,a){var p=null;for(p in o){if(typeof a[p]==='undefined')return false}for(p in o){if(o[p]){switch(typeof o[p]){case'object':if(!o[p].equals(a[p]))return false;break;case'function':if(typeof a[p]==='undefined'||(p!=='equals'&&o[p].toString()!==a[p].toString())){return false}break;default:if(o[p]!==a[p])return false}}else{if(a[p])return false}}for(p in o){if(typeof o[p]==='undefined')return false}return true};var r=function(a,b,t){var c=a.slice((t||b)+1||a.length);a.length=b<0?a.length+b:b;return a.push.apply(a,c)};var A=function(){var a;if(arguments.length===0){a=[]}else if(arguments.length>0&&typeof arguments[0]!=='number'){a=arguments[0].toArray()}else{a=[];a.length=arguments[0]}function I(b){var i=0;this.hasNext=function(){return i<b.length};this.next=function(){return b[i++]};this.remove=function(){b.splice(i,1)};this.getIndex=function(){return i}}this.add=function(b){a.push(b)};this.addAll=function(b,c){if(typeof b!=='number')return;if(b<0||b>a.length)return;var i=new I(c);while(i.hasNext()){a.push(i.next())}};this.insert=function(i,b){a.splice(i,0,b)};this.indexOf=function(b){for(var i=0;i<a.length;i++){if(e(a[i],b)){return i}}return-1};this.get=function(i){return a[i]};this.size=function(){return a.length};this.exchange=function(b,l){var t=a[b];a[b]=a[l];a[l]=t};this.contains=function(b){for(var i=0;i<a.length;i++){if(e(a[i],b)){return true}}return false};this.deleteItem=function(i){var b=this.indexOf(i);if(b!==-1){r(a,b)}};this.remove=function(b,t){r(a,b,t)};this.removeAll=function(){a.splice(0,a.length)};this.toArray=function(){return a.slice(0)};this.iterator=function(){return new I(a)}};var D=function(c){var a=new A();var m=Number.MAX_VALUE;var b=16;this.setCapacity=function(q){b=q};this.offerFirst=function(i){if(this.remainingCapacity()<1){this.removeLast()}a.insert(0,i)};this.offerLast=function(i){if(this.remainingCapacity()<1){this.removeFirst()}a.add(i)};this.removeFirst=function(){a.remove(0)};this.removeLast=function(){a.remove(a.size()-1)};this.pollFirst=function(){var d=this.peekFirst();a.remove(0);return d};this.pollLast=function(){var l=this.peekLast();a.remove(a.size()-1);return l};this.peekFirst=function(){if(a.size()>0){return a.get(0)}else{return null}};this.peekLast=function(){if(a.size()>0){return a.get(a.size()-1)}else{return null}};this.size=function(){return a.size()};this.iterator=function(){return a.iterator()};this.toArrayList=function(){return a};this.toArray=function(){return a.toArray()};this.remainingCapacity=function(){if(c){return(b-a.size())}else{return(m-a.size())}}};var S=function(g,t,l){var a=new A(),c=new D(true),b=[],s=new A(),d=new A(),p=[],h;c.setCapacity(t);a.addAll(0,g);this.reload=function(){s.removeAll();d.removeAll();var j=a.iterator(),m;while(j.hasNext()){m=j.next();for(var i=0,n=m.getSeriesGroups()[0].getSeriesList().length;i<n;i++){s.add(m.getSeriesGroups()[0].getSeriesList()[i])}for(i=0,n=m.getSeriesShapes().length;i<n;i++){if(m.getSeriesShapes()[i].constructor==Array){d.add(m.getSeriesShapes()[i])}if(m.getSeriesShapes()[i].constructor==Object){d.add(m.getSeriesShapes()[i].marker)}}}};this.reload();this.setTargets=function(){if(!arguments[0]||arguments[0].constructor!==Array)return;for(var i=0,j=arguments[0].length;i<j;i++){c.offerLast(arguments[0][i]);p.push(arguments[0][i])}b=k(c.toArray())};this.hits=function(j){var m=d.iterator(),n,o,q={};while(m.hasNext()){n=m.next();o=m.getIndex()-1;for(var i=0,u=n.length;i<u;i++){if((n[i].rect&&n[i].rect.doPointInTest(j))||(n[i].doPointInTest&&n[i].doPointInTest(j))){q.measureIndex=o;q.dimensionItemIndex=i}}}return q};function k(){if(arguments[0].constructor!=Array)f.error("Unsupported argument type.");var j=new A(),o=[];j.addAll(0,arguments[0]);var m=a.iterator(),n=[],q=0,u,v;while(m.hasNext()){u=m.next();v=m.getIndex()-1;for(var i=0,w=u.getSeriesGroups()[0].getSeriesList().length;i<w;i++,q++){n.push({rendererNo:v,chartSeriesNo:q,rendererSeriesNo:i})}}m=j.iterator();var x,y;while(m.hasNext()){x=m.next();y=new Object();y.measureIndex=x.measureIndex;y.dimensionItemIndex=x.dimensionItemIndex;for(i=0,w=n.length;i<w;i++){if(n[i].chartSeriesNo===y.measureIndex){y.rendererNo=n[i].rendererNo;y.rendererSeriesNo=n[i].rendererSeriesNo;o.push(y)}}}return o}this.remove=function(i){c.toArrayList().deleteItem(i)};this.erase=function(){c.toArrayList().removeAll();b.splice(0,b.length)};this.reset=function(){s.removeAll();d.removeAll();h=null};this.ready=function(){return d.size()};this.isEnrolled=function(i){return c.toArrayList().contains(i)};this.run=function(m){b=k(c.toArray());for(var n=a.iterator();n.hasNext();){n.next().removeHighlights()}var o=[];for(var i=0,q=b.length;i<q;i++){o.push(b[i].rendererNo)}for(i=0,q=o.length;i<q;i++){if((i<o.length-1)&&o[i]===o[i+1]){r(o,i,i+1)}}var u=[],v;for(i=0;i<o.length;i++){v=new Object();v.rendererNo=o[i];v.highlights=[];for(var j=0,q=b.length;j<q;j++){if(b[j].rendererNo===o[i]){v.highlights.push({measureIndex:b[j].rendererSeriesNo,dimensionItemIndex:b[j].dimensionItemIndex})}}u.push(v)}for(i=0;i<b.length;i++){if(!s.get(b[i].measureIndex).isVisible()){u.splice(i,1)}}for(i=0;i<u.length;i++){a.get(u[i].rendererNo).setHighlights(u[i].highlights,l);if(m){a.get(u[i].rendererNo).highlight()}}return p}};return S});sap.riv.module({qname:'sap.riv.viz.shared.axis.Axis',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.DimensionAxisRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.LinearAxisRenderer',version:'1.0.0'}],function Setup(O,T,D,L){var a=function(o){this._sax_options=O.extend(true,{},o);this._sax_initialize(this._sax_options);return this};a.LINEAR='numeric';a.DIMENSION='dimension';a.prototype._sax_initialize=function(o){this._sax_mode=o.mode;switch(this._sax_mode){case a.DIMENSION:this._sax_renderer=new D(o);break;case a.LINEAR:default:this._sax_renderer=new L(o);break}};a.prototype.setLayer=function(l){this._sax_renderer.setLayer(l)};a.prototype.draw=function(){this._sax_renderer.draw()};a.prototype.getPreferredSize=function(){return this._sax_renderer.getPreferredSize()};a.prototype.getPreferredWidth=function(){return this._sax_renderer.getPreferredWidth()};a.prototype.getPreferredHeight=function(){return this._sax_renderer.getPreferredHeight()};a.prototype.updateProperties=function(p){var n=false;if(p&&p.distance&&p.distance!==this._sax_renderer.distance()){n=true}if(n){this._sax_renderer.reset()}if(p&&p.distance){this._sax_renderer.distance(p.distance)}return this};a.prototype.u2p=function(u){return this._sax_renderer.u2p(u)};a.prototype.p2u=function(p){return this._sax_renderer.p2u(p)};a.prototype.position=function(x,y){this._sax_renderer.position(x,y)};a.prototype.zoom=function(x,y,d){this._sax_renderer.zoom(x,y,d)};a.prototype.setVisibleRange=function(x,y,d){this._sax_renderer.setVisibleRange(x,y,d)};a.prototype.getMajorTicks=function(){return this._sax_renderer.getMajorTicks()};a.prototype.getMinorTicks=function(){return this._sax_renderer.getMinorTicks()};a.prototype.getAxisWidth=function(){return this._sax_renderer.getAxisWidth()};a.prototype.getTickInterval=function(){return this._sax_renderer.getTickInterval()};a.prototype.getFirstTickOffset=function(){return this._sax_renderer.getFirstTickOffset()};a.prototype.getLastTickOffset=function(){return this._sax_renderer.getLastTickOffset()};a.prototype.getLineThickness=function(){return this._sax_renderer.getLineThickness()};a.prototype.getMajorTickWidth=function(){return this._sax_renderer.getMajorTickWidth()};a.prototype.applyTheme=function(t){return this._sax_renderer.applyTheme(t)};return a});sap.riv.module({qname:'sap.riv.viz.xychart.BarModule',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.core.UADetector',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.Animator',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.Axis',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.SeriesGroup',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.BarRenderer',version:'1.0.0'},{qname:'sap.riv.viz.xychart.ChartModule',version:'1.0.0'}],function Setup(O,T,F,L,U,G,A,a,S,b,B,C){var d={xAxis:{showMajor:true,majorColor:'#c9c9c9',majorThickness:'1',showMinor:false,minorColor:'#c9c9c9',minorThickness:'1',showSub:false,subColor:'#c9c9c9'},yAxis:{showMajor:false,majorColor:'#c9c9c9',majorThickness:'1',showMinor:false,minorColor:'#c9c9c9',minorThickness:'1',showSub:false,subColor:'#c9c9c9'}};var c=O.derive(C,{events:['selectData','showTooltip','hideTooltip'],constructor:function(o){this._seriesGroup=null;this._barRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._valueAxisRange=null;this._selections=[]},initAxes:function(){this._xaxes=[];var e=this._chart_options.properties.xAxis;for(var i=0,l=e.length;i<l;i++){if(T.isExist(e[i].showTitle)&&e[i].showTitle&&!T.isExist(e[i].title)){e[i].title="X"+(i+1)}var o={mode:a.LINEAR,position:i==0?'hb':'ht',maxValue:T.isExist(this._valueAxisRange[i])?this._valueAxisRange[i].max:0,minValue:T.isExist(this._valueAxisRange[i])?this._valueAxisRange[i].min:0};var x=new a(O.extend(true,o,e[i]));this._xaxes.push(x)}this._yaxes=[];var f=this._chart_options.properties.yAxis;var g=this._dataTree.getSubMemberLabels();if(g.length<1){g=[];g.push('1')}for(var i=0,l=f.length;i<l;i++){if(T.isExist(f[i].showTitle)&&f[i].showTitle&&!T.isExist(f[i].title)){f[i].title="Y"+(i+1)}var o={mode:a.DIMENSION,position:'vl',labels:g};var y=new a(O.extend(true,o,f[i]));this._yaxes.push(y)}},initGridLineProperties:function(){this._xAxis_gridLine_option=O.extend(true,d.xAxis,this._chart_options.properties.xAxis[0].gridLine);this._yAxis_gridLine_option=O.extend(true,d.yAxis,this._chart_options.properties.yAxis[0].gridLine);this._gridLine.setXAxisOptions(this._xAxis_gridLine_option);this._gridLine.setYAxisOptions(this._yAxis_gridLine_option)},gridLinePropertiesCheck:function(){if((!this._xAxis_gridLine_option.showMajor&&this._xAxis_gridLine_option.showSub)||this._yAxis_gridLine_option.showMajor||this._yAxis_gridLine_option.showMinor){F.error("Wrong settings for grid line of bar chart")}},initSeries:function(){this._valueAxisRange=[];var e=this._chart_options.properties.bar;var f=this._chart_options.properties.measures;var m=this._metaData.measureMembers;var g=this._chart_options.properties.measureDefault.colors;this._seriesGroup=new S();for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var o=O.extend(true,{},e,f[i]);o.fillColor=T.isExist(o.fillColor)?o.fillColor:g[i%g.length];o.visible=T.isExist(o.visible)?o.visible:true;if(o.visible){var s=new b(o);s.setName(m[i]);s.setData(this._data[i]);s.setVisible(o.visible);this._seriesGroup.addSeries(s);var v=o.valueAxis||0;this._updateValueAxisRange(s.getDataRange(),v)}}},initScrollBar:function(){if(this._scrollBar.length>0){for(var i=0;i<this._scrollBar.length;i++){this._scrollBar[i].remove()}}this._scrollBar=[];this._scrollBar[0]=this.scrollBar()},updateValueAxisRange:function(){this._valueAxisRange=[];var s=this._chart_options.properties.measures;var e=this._seriesGroup.getSeriesList();var f;var v=0;for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var o=s[i]||{};o.visible=T.isExist(o.visible)?o.visible:true;if(o.visible){var g=o.valueAxis||0;f=e[v];this._updateValueAxisRange(f.getDataRange(),g);v++}}},_updateValueAxisRange:function(r,v){if(this._valueAxisRange[v]==undefined){this._valueAxisRange[v]={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY}}if(r.max>this._valueAxisRange[v].max){this._valueAxisRange[v].max=r.max}if(r.min<this._valueAxisRange[v].min){this._valueAxisRange[v].min=r.min}},bindSeriesWithAxes:function(){var s=this._chart_options.properties.measures;var e=this._seriesGroup.getSeriesList();var v=0;for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var o=s[i]||{};o.visible=T.isExist(o.visible)?o.visible:true;if(o.visible){var f=o.valueAxis||0;e[v].setXAxis(this._xaxes[f]);e[v].setYAxis(this._yaxes[0]);v++}}},bindRenderer:function(l){if(this._barRenderer==null){this._barRenderer=new B(l,this._chart_options.properties.bar)}else{this._barRenderer.resetSeriesGroup()}this._barRenderer.addSeriesGroup(this._seriesGroup)},drawSeries:function(){if(!this._hasDrawn){this._barRenderer.draw();this._hasDrawn=true}else{this._barRenderer.redraw()}if(this._defaultSelectionArmed){var e=this._chart_options.properties.selectability.defaultSelectedItems;if(e&&e.length>0){this.doSelect(e)}this._defaultSelectionArmed=false}else{this.doSelect(this._selections)}},doChartLayout:function(n,y,x,s,e){this._seriesLayer=e;var f={width:0,height:0};var g={width:0,height:0};var h={width:0,height:0};var i={width:0,height:0};h.width+=this._yaxes[0].getPreferredWidth();var t=(n.width-h.width)*0.95;this._xaxes[0].updateProperties({distance:t});g.width+=this._xaxes[0].getPreferredWidth();g.height+=this._xaxes[0].getPreferredHeight();if(this._xaxes.length==2){this._xaxes[1].updateProperties({distance:t});f.width+=this._xaxes[1].getPreferredWidth();f.height+=this._xaxes[1].getPreferredHeight()}var j=f.height>0?f.height:n.height*0.1;var k=(n.height-g.height-j)*0.95;this._yaxes[0].updateProperties({distance:k});h.height+=this._yaxes[0].getPreferredHeight();y[0].size({width:h.width,height:h.height});y[0].position({x:0,y:Math.ceil(j)});x[0].size({width:g.width,height:g.height});x[0].position({x:Math.floor(h.width-this._xaxes[0].getFirstTickOffset()-this._yaxes[0].getLineThickness()/2),y:Math.round(j+h.height-this._xaxes[0].getMajorTickWidth()/2)});if(f.height>0){x[1].size({width:f.width,height:f.height});x[1].position({x:Math.floor(h.width-this._xaxes[1].getFirstTickOffset()-this._yaxes[0].getLineThickness()/2),y:Math.ceil(this._xaxes[1].getMajorTickWidth()/2)})}s.size({width:t,height:k});s.position({x:Math.floor(this._yaxes[0].getAxisWidth()),y:Math.ceil(j)});e.size(s.size());e.position({x:0,y:0});this._scrollBar[0].init(s,e,'vertical');if(!this._hasBacked){this._updateVisibleRange()}else{this.restore()}this._rightBound=x[0].position().x+this._xaxes[0].getLastTickOffset()},_updateVisibleRange:function(){var v=this._chart_options.properties.visibleRange;var e=v.start;var f=v.end;if(e<0||f<0||e>this._dataTree.getSubMemberLabels().length-1||f>this._dataTree.getSubMemberLabels().length-1||e>f){e=0;f=this._dataTree.getSubMemberLabels().length-1}if(e===0&&f===this._dataTree.getSubMemberLabels().length-1)return;var r=f-e+1;var s=this._dataTree.getSubMemberLabels().length/r;this._yaxes[0].setVisibleRange(1,s,s);var i=this._yaxes[0].getTickInterval();this._yaxes[0].position(0,-i*e);var g=this._seriesLayer.size();this._seriesLayer.size({width:g.width,height:g.height*s});this.position(0,-i*e);if(U.os()==='iPad'){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}},updateProperties:function(p){this.callParent('updateProperties',p);var s=this._chart_options.properties.measures;var e=this._chart_options.properties.measureDefault.colors;var f=this._chart_options.properties.bar;var g=[];if(T.isExist(f)){this._barRenderer.updateProperties(f)}for(var i=0,l=this._metaData.measureMembers.length;i<l;i++){var o=O.extend(true,{},f,s[i]);o.fillColor=T.isExist(o.fillColor)?o.fillColor:e[i%e.length];g.push(o)}this._seriesGroup.updateProperties(g);if(!this._hasDrawn){this.initSeries();this._barRenderer.resetSeriesGroup();this._barRenderer.addSeriesGroup(this._seriesGroup)}},getSupportedAppEvents:function(){return['selectData','showTooltip','hideTooltip']},clickOnPoint:function(p){if(this._barRenderer==null){F.error('No renderer to handle event!')}var e=this.doSelect(p);if(e){this.fireEvent('selectData',{name:'selectData',data:[{dimensionAxisIndex:0,dimensionIndex:0,dimensionItemIndex:e.dimensionItemIndex,measureIndex:e.measureIndex,dimensionLabel:null,measureValue:null}]})}},doSelect:function(t){if(!t)return;var s={"measureIndex":null,"dimensionItemIndex":null};var e=this._chart_options.properties.selectability;var f,g;if(e.mode==='single'){if(this._selections.length>1){this._selections.splice(0,this._selections.length)}if(this._selections.length===0){if(t[0]&&T.isDefined(t[0].measureIndex)){if(!this._barRenderer.shapeExists(t[0].measureIndex,t[0].dimensionItemIndex)){return}this._barRenderer.highlight(t[0]);s.measureIndex=t[0].measureIndex;s.dimensionItemIndex=t[0].dimensionItemIndex;this._selections.push(s);var r=this._barRenderer.getHighlights();if(r&&r.length!==0){r.splice(0,r.length)}r.push(s);return g}if(T.isDefined(t.x)){g=this._barRenderer.highlight(t);if(g!=null){s.measureIndex=g.measureIndex;s.dimensionItemIndex=g.dimensionItemIndex;var r=this._barRenderer.getHighlights();if(r&&r.length!==0){r.splice(0,r.length)}r.push(s);this._selections.push(s)}return g}}if(this._selections.length===1){var l=this._selections[0];var h=this._barRenderer.getShape(t);if(e.deSelectable){if(h&&h.measureIndex!=null){this._barRenderer.restore(l);this._selections.splice(0,1);if(h.measureIndex!==l.measureIndex||h.dimensionItemIndex!==l.dimensionItemIndex){s.measureIndex=h.measureIndex;s.dimensionItemIndex=h.dimensionItemIndex;g=this._barRenderer.highlight(s);this._barRenderer.highlight(s);this._selections.push(s);var r=this._barRenderer.getHighlights();if(r&&r.length!==0){r.splice(0,r.length)}r.push(s)}}else{if(T.isDefined(t.x)){this._barRenderer.restore(l);this._selections.splice(0,1)}else{if(this._barRenderer.shapeExists(this._selections[0].measureIndex,this._selections[0].dimensionItemIndex)){this._barRenderer.highlight(this._selections[0])}}}}else{h=this._barRenderer.getShape(t);if(h&&h.measureIndex!=null){if(h.measureIndex===l.measureIndex&&h.dimensionItemIndex===l.dimensionItemIndex){return}else{this._barRenderer.restore(l);this._selections.splice(0,1);s.measureIndex=h.measureIndex;s.dimensionItemIndex=h.dimensionItemIndex;g=this._barRenderer.highlight(s);this._selections.push(s);var r=this._barRenderer.getHighlights();if(r&&r.length!==0){r.splice(0,r.length)}r.push(s)}}else{if(this._barRenderer.shapeExists(this._selections[0].measureIndex,this._selections[0].dimensionItemIndex)){this._barRenderer.highlight(this._selections[0])}}}}return g}else if(e.mode==='multiple'){return}else{return}},panMove:(function(){var y;var p;var e;var f;var g;var o;var h;return function(j){var k=j.attachedComponent();var r=j.rangeInXY();if(j.state()===G.TransitionState.Began){o=k._seriesLayer.position();f=k._yaxes[0]._sax_renderer._subLayer.size();g=k._yaxes[0]._sax_renderer._subLayer.position();e=k._yaxes[0]._sax_renderer._layer.size();p=new Date().getTime();if(f.height>e.height){k._chartModule._scrollBar[0].highLight()}h=false}else if(j.state()===G.TransitionState.Changed){if(j.attachedComponent().islongPressGesture===true){return}h=true;var l=0;if((o.y+r.y)>0){l=-o.y}else if(o.y+r.y+k._seriesLayer.size().height<=k._seriesMaskLayer.size().height){l=k._seriesMaskLayer.size().height-o.y-k._seriesLayer.size().height}else{l=r.y}k._chartModule.position(o.x,o.y+l);k._chartModule._scrollBar[0].update();var m=k._yaxes;for(var i=m.length;i--;){m[i].position(0,o.y+l)}y=j.velocityInXY().y;p=new Date().getTime()}else if(j.state()===G.TransitionState.Ended){if((o.y+r.y)>=0||(o.y+r.y+k._yaxes[0]._sax_renderer._subLayer.size().height<=k._yaxes[0]._sax_renderer._layer.size().height)){if(f.height>e.height){k._chartModule._scrollBar[0].unHighLight();k._rootLayer.setNeedsDisplay()}h=false;return}if(h){if(y==0){h=false;k._chartModule._scrollBar[0].unHighLight();k._rootLayer.setNeedsDisplay();return}var n=(y-0)/(new Date().getTime()-p);var q=k;var t=q._seriesLayer.position();var s=y*y/(2*n)*10;A.animate({values:[{type:'FLOAT',from:0.0,to:s}],duration:600,easing:'EaseOut',onStep:function(v){if((t.y+v[0])>0||t.y+v[0]+q._yaxes[0]._sax_renderer._subLayer.size().height<=q._yaxes[0]._sax_renderer._layer.size().height)return;q._seriesLayer.position({x:t.x,y:t.y+v[0]});q._yaxes[0].position(0,t.y+v[0]);q._chartModule._scrollBar[0].update();q._rootLayer.setNeedsDisplay()},onComplete:function(){var u=k._yaxes[0]._sax_renderer._subLayer.position().y;var v=k._yaxes[0]._sax_renderer._subLayer.size().height+u;if(u>0){A.animate({values:[{type:'FLOAT',from:u,to:0}],duration:500,easing:'EaseOut',onStep:function(w){q._seriesLayer.position({x:0,y:w[0]});q._yaxes[0].position(0,w[0]);q._chartModule._scrollBar[0].update();q._rootLayer.setNeedsDisplay()},onComplete:function(){q._chartModule._scrollBar[0].unHighLight()}})}else if(v<e.height){A.animate({values:[{type:'FLOAT',from:u,to:(e.height-v+u)}],duration:500,easing:'EaseOut',onStep:function(w){q._seriesLayer.position({x:0,y:w[0]});q._yaxes[0].position(0,w[0]);q._chartModule._scrollBar[0].update();q._rootLayer.setNeedsDisplay()},onComplete:function(){q._chartModule._scrollBar[0].unHighLight()}})}else{q._chartModule._scrollBar[0].unHighLight()}}});h=false}else{k._chartModule._scrollBar[0].unHighLight();k._rootLayer.setNeedsDisplay()}}else if(j.state()===G.TransitionState.Cancelled){}}})(),scale:function(x,y,v){var e=this._seriesLayer.size();this._seriesLayer.size({width:e.width*x,height:e.height*y});this._barRenderer.drawViewPort(y,v)},pinchingResize:(function(){var s;var e;var f;var p;var g;var m;var h;var j;var k;var l;var o;return function(r){var n=r.attachedComponent();var t=r.scale();t=Math.round(t*100)/100;if(r.state()===G.TransitionState.Began){s=n._seriesLayer.size();e=n._seriesLayer.position();f=n._seriesMaskLayer.size();p=r.globalLocOfGesture();p.y=p.y-n._seriesMaskLayer.position().y;g=new Date().getTime();m=n._yaxes[0].getMajorTicks();l=n._yaxes[0].getTickInterval();var q=l/2;h=-1;for(var i=0,u=m.length;i<u;i++){if(Math.abs(m[i]-p.y+e.y)<=q){h=i;break}}if(h===-1){h=Math.floor(m.length/2)}j=n._metaData.measureMembers.length>20?20:n._metaData.measureMembers.length;k=n._dataTree.getSubMemberLabels().length;n._chartModule._scrollBar[0].highLight();n._rootLayer.setNeedsDisplay();o=t;if(n.islongPressGesture===true){n.islongPressGesture=false;n._chartModule.onblur()}}else if(r.state()==G.TransitionState.Changed){var v=0;v=Math.round((t/o)*100)/100;if(t===o){return}o=t;var w=new Date().getTime();if((w-g)>5){g=w;if(v>=1&&l*v>=f.height){return}if(v<1&&l*v<=f.height/(2*k)){return}l*=v;var y=n._yaxes;for(var i=y.length;i--;){y[i].zoom(1,v,v)}var x={x:0,y:0};var z=n._yaxes[0].getMajorTicks();if(v>=1){x.y=m[h]-z[h]+e.y}else{x.y=e.y-(z[h]-m[h])}s.height=s.height*v;n._chartModule.position(x.x,x.y);n._chartModule.scale(1,v,f);n._chartModule._scrollBar[0].update();n._chartModule._gridLine.gestureUpdate();y[0].position(0,x.y);n._rootLayer.setNeedsDisplay()}}else if(r.state()==G.TransitionState.Ended||r.state()==G.TransitionState.Cancelled){n._chartModule.scale(1,1);n._chartModule._scrollBar[0].update();n._chartModule._scrollBar[0].unHighLight();n._rootLayer.setNeedsDisplay();var D=n._seriesLayer.size();if(D.height<=f.height){var E=f.height/D.height;var y=n._yaxes;for(var i=y.length;i--;){y[i].zoom(1,E,E);y[i].position(0,0)}n._chartModule.scale(1,E);n._seriesLayer.position({x:0,y:0});n._chartModule._scrollBar[0].update();n._chartModule._scrollBar[0].hidden();n._chartModule._gridLine.gestureUpdate();n._rootLayer.setNeedsDisplay()}}}})(),longPressHandler:(function(){return function(r){var e=r.attachedComponent();if(r.state()===G.TransitionState.Began){e.islongPressGesture=true;var g=r.globalLocOfGesture();var p=e.convertPointFromGlobal(g);var t=e._rootLayer;var f=e._seriesLayer.convertPointFromLayer(p,t);e._chartModule.hoverOnPoint(f)}}})(),tapHandler:function(r){var e=r.attachedComponent();if(r.state()===G.TransitionState.Ended){var g=r.globalLocOfGesture();var p=e.convertPointFromGlobal(g);var t=e._rootLayer;var f=e._seriesLayer.convertPointFromLayer(p,t);e._chartModule.clickOnPoint(f)}},backUp:function(){this._hasBacked=true;this._backedYScale=this._yaxes[0]._sax_renderer._subLayer.size().height/this._yaxes[0]._sax_renderer._layer.size().height;this._backedYPoint=this._yaxes[0]._sax_renderer._subLayer.position().y},restore:function(){if(this._hasBacked&&T.isExist(this._backedYScale)&&T.isExist(this._backedYPoint)){if(this._backedYScale<=1.00000000001){return}this._yaxes[0].setVisibleRange(1,this._backedYScale,this._backedYScale);this._yaxes[0].position(0,this._backedYPoint);var e=this._seriesLayer.size();this._seriesLayer.size({width:e.width,height:e.height*this._backedYScale});this.position(0,this._backedYPoint);if(U.os()==='iPad'){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}this._backedYScale=null;this._backedYPoint=null;this._hasBacked=false}},applyTheme:function(t){this._barRenderer.applyTheme(t)},hoverOnPoint:function(p){if(!this._barRenderer){return}var e=this._barRenderer.hoverOnPoint(p);if(e){this.fireEvent('showTooltip',{name:'showTooltip',data:[{dimensionItemIndex:e.dimensionItemIndex,point:p}]})}},onblur:function(p){this._barRenderer.onblur(p);this.fireEvent('hideTooltip',{name:'hideTooltip',data:[{}]})},getPlotArea:function(){return{top:0,left:0,bottom:0,right:this._rightBound}}});return c});sap.riv.module({qname:'sap.riv.vizkit.PinchGestureDetector',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,G,M){var t=G.TransitionState;var P=O.derive(G,{constructor:function(){this._origDistance=1;this._currDistance=1;this._startWhen=0;this._stopWhen=0},_distance:function(){var p=[];for(var a in this._grTouchTracker){p.push(this._grTouchTracker[a].globalXY)}var d=p[1].x-p[0].x;var b=p[1].y-p[0].y;return M.sqrt(d*d+b*b)},doTouchBegin:function(a){var c=this.totalTouches();if(this.state()===t.Possible){if(c===2){var b=this._distance();if(b>35){this._origDistance=this._currDistance=b;this._startWhen=this._stopWhen=a.timeStamp}else{this._setState_(t.Failed);return}}else if(c>2){this._setState_(t.Failed);return}}else if((this.state()===t.Began||this.state()===t.Changed)){this._stopWhen=a.timeStamp;this._currDistance=this._distance();this._setState_(t.Cancelled);return}},doTouchMove:function(a){switch(this.state()){case t.Possible:if(this.totalTouches()===2){this._stopWhen=a.timeStamp;this._currDistance=this._distance();var s=this.scale();if(s>1.1||s<0.9){this._setState_(t.Began)}}break;case t.Began:if(M.abs(this._origDistance-this._distance())>10){this._stopWhen=a.timeStamp;this._currDistance=this._distance();this._setState_(t.Changed)}break;case t.Changed:this._currDistance=this._distance();this._stopWhen=a.timeStamp;this._setState_(t.Changed);break}},doTouchEnd:function(a){if((this.state()===t.Began||this.state()===t.Changed)&&this.totalTouches()===0){this._stopWhen=a.timeStamp;this._currDistance=this._distance();this._setState_(t.Ended)}else if(this.state()===t.Possible){this._setState_(t.Failed)}},doTouchCancel:function(a){if(this.state()===t.Began||this.state()===t.Changed){this._stopWhen=a.timeStamp;this._currDistance=this._distance();this._setState_(t.Cancelled)}else if(this.state()===t.Possible){this._setState_(t.Failed)}},scale:function(){return this._currDistance/this._origDistance},velocity:function(){var d=this._startWhen-this._stopWhen;if(d){return M.abs((this._currDistance-this._origDistance))*1000/d}else{return 0}},reset:function(){this.callParent('reset');this._origDistance=1;this._currDistance=1;this._startWhen=0;this._stopWhen=0}});return P});sap.riv.module({qname:'sap.riv.viz.xychart.CombinationModule',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.core.UADetector',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.Animator',version:'1.0.0'},{qname:'sap.riv.viz.shared.axis.Axis',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.SeriesGroup',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.ColumnBarRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.LineRenderer',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.SeriesHighlighter',version:'1.0.0'},{qname:'sap.riv.viz.xychart.ChartModule',version:'1.0.0'}],function Setup(O,T,F,L,U,G,A,a,S,b,C,c,d,e){var f={xAxis:{showMajor:false,majorColor:'#c9c9c9',majorThickness:'1',showMinor:false,minorColor:'#c9c9c9',minorThickness:'1',showSub:false,subColor:'#c9c9c9'},yAxis:{showMajor:true,majorColor:'#c9c9c9',majorThickness:'1',showMinor:false,minorColor:'#c9c9c9',minorThickness:'1',showSub:false,subColor:'#c9c9c9'}};var g=O.derive(e,{events:['selectData','showTooltip','hideTooltip'],constructor:function(o){this._valueAxisRange=[];this._barSeriesGroup=null;this._lineSeriesGroup=null;this._columnBarRenderer=null;this._hasDrawn=false;this._hasBacked=false;this._tooltipEnabled=o.properties.tooltip.enable},initGridLineProperties:function(){this._xAxis_gridLine_option=O.extend(true,f.xAxis,this._chart_options.properties.xAxis[0].gridLine);this._yAxis_gridLine_option=O.extend(true,f.yAxis,this._chart_options.properties.yAxis[0].gridLine);this._gridLine.setXAxisOptions(this._xAxis_gridLine_option);this._gridLine.setYAxisOptions(this._yAxis_gridLine_option)},gridLinePropertiesCheck:function(){if((!this._yAxis_gridLine_option.showMajor&&this._yAxis_gridLine_option.showSub)||this._xAxis_gridLine_option.showMajor||this._xAxis_gridLine_option.showMinor){F.error("Wrong settings for grid line of combination chart")}},initAxes:function(){this._initXAxes();this._initYAxes()},_initXAxes:function(){this._xaxes=[];var h=this._chart_options.properties.xAxis;var l=this._dataTree.getSubMemberLabels();if(l.length<1){l=[];l.push('1')}for(var i=0,j=h.length;i<j;i++){if(T.isExist(h[i].showTitle)&&h[i].showTitle&&!T.isExist(h[i].title)){h[i].title="X"+(i+1)}var o={mode:a.DIMENSION,position:'hb',labels:l};var x=new a(O.extend(true,o,h[i]));this._xaxes.push(x)}},_initYAxes:function(){this._yaxes=[];var h=this._chart_options.properties.yAxis;for(var i=0,l=h.length;i<l;i++){if(T.isExist(h[i].showTitle)&&h[i].showTitle&&!T.isExist(h[i].title)){h[i].title="Y"+(i+1)}var o={mode:a.LINEAR,position:i===0?'vl':'vr',maxValue:T.isExist(this._valueAxisRange[i])?this._valueAxisRange[i].max:0,minValue:T.isExist(this._valueAxisRange[i])?this._valueAxisRange[i].min:0};var y=new a(O.extend(true,o,h[i]));this._yaxes.push(y)}},initSeries:function(){this._valueAxisRange=[];var h=this._chart_options.properties.measures;var m=this._metaData.measureMembers;var j=this._chart_options.properties.measureDefault.colors;var k=this._chart_options.properties.bar;var l=this._chart_options.properties.line;this._barSeriesGroup=new S();this._lineSeriesGroup=new S();for(var i=0,n=m.length;i<n;i++){var o=O.extend(true,{},k,l,h[i]);o.fillColor=T.isExist(o.fillColor)?o.fillColor:j[i%j.length];o.lineColor=T.isExist(o.lineColor)?o.lineColor:j[i%j.length];var s=new b(o);s.setName(m[i]);s.setData(this._data[i]);if(this._chart_options.properties.measure.type==='bar'||o.type==='bar'){this._barSeriesGroup.addSeries(s)}else{this._lineSeriesGroup.addSeries(s)}var v=o.valueAxis||0;this._updateValueAxisRange(s.getDataRange(),v)}},initScrollBar:function(){if(this._scrollBar.length>0){for(var i=0;i<this._scrollBar.length;i++){this._scrollBar[i].remove()}}this._scrollBar=[];this._scrollBar[0]=this.scrollBar()},updateValueAxisRange:function(){this._valueAxisRange=[];var s=this._chart_options.properties.measures;var m=this._chart_options.properties.measure;var h=0,l=0;var j=this._barSeriesGroup.getSeriesList();var k=this._lineSeriesGroup.getSeriesList();var n;for(var i=0,p=this._metaData.measureMembers.length;i<p;i++){var o=s[i]||{};o.visible=T.isExist(o.visible)?o.visible:true;if(o.visible){var v=o.valueAxis||0;if(o.type==='bar'||m.type=='bar'){n=j[h];h++}else{n=k[l];l++}this._updateValueAxisRange(n.getDataRange(),v)}}},_updateValueAxisRange:function(r,v){if(this._valueAxisRange[v]===undefined){this._valueAxisRange[v]={max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY}}if(r.max>this._valueAxisRange[v].max){this._valueAxisRange[v].max=r.max}if(r.min<this._valueAxisRange[v].min){this._valueAxisRange[v].min=r.min}},bindSeriesWithAxes:function(){var s=this._chart_options.properties.measures;var h=0,l=0;var j=this._barSeriesGroup.getSeriesList();var k=this._lineSeriesGroup.getSeriesList();for(var i=0,m=this._metaData.measureMembers.length;i<m;i++){var o=s[i]||{};var v=o.valueAxis||0;if(this._chart_options.properties.measure.type==='bar'||o.type==='bar'){j[h].setXAxis(this._xaxes[0]);j[h].setYAxis(this._yaxes[v]);h++}else{k[l].setXAxis(this._xaxes[0]);k[l].setYAxis(this._yaxes[v]);l++}}},bindRenderer:function(l){if(this._columnBarRenderer==null&&this._lineRenderer==null){this._columnBarRenderer=new C(l,this._chart_options.properties.bar);this._lineRenderer=new c(l,this._chart_options.properties.line)}else{this._columnBarRenderer.resetSeriesGroup();this._lineRenderer.resetSeriesGroup()}this._columnBarRenderer.addSeriesGroup(this._barSeriesGroup);this._lineRenderer.addSeriesGroup(this._lineSeriesGroup)},drawSeries:function(){var s=this._chart_options.properties.selectability;var m=0;if(s.mode==='single'){m=1}if(s.mode==='multiple'){m=1000}if(!this._highlighter){if(this._defaultSelectionArmed){this._highlighter=new d([this._columnBarRenderer,this._lineRenderer],m,true);if(s.mode!=='none'&&s.defaultSelectedItems.length!==0&&T.isDefined(s.defaultSelectedItems[0].measureIndex)){this._highlighter.setTargets(s.defaultSelectedItems);this._highlighter.run()}this._defaultSelectionArmed=false}}else{this._highlighter.run()}if(!this._hasDrawn){this._columnBarRenderer.draw();this._lineRenderer.draw();this._hasDrawn=true}else{this._columnBarRenderer.redraw();this._lineRenderer.redraw()}this._highlighter.reload()},doChartLayout:function(n,y,x,s,h){this._seriesLayer=h;var i={width:0,height:0};var j={width:0,height:0};var k={width:0,height:0};var l={width:0,height:0};k.width+=this._yaxes[0].getPreferredWidth();if(this._yaxes.length===2){l.width+=this._yaxes[1].getPreferredWidth()}var t=(n.width-k.width-l.width)*0.95;this._xaxes[0].updateProperties({distance:t});j.width+=this._xaxes[0].getPreferredWidth();j.height+=this._xaxes[0].getPreferredHeight();var m=i.height>0?i.height:n.height*0.1;var o=(n.height-j.height-m)*0.95;this._yaxes[0].updateProperties({distance:o});k.height+=this._yaxes[0].getPreferredHeight();if(this._yaxes.length===2){this._yaxes[1].updateProperties({distance:o});l.height+=this._yaxes[1].getPreferredHeight()}y[0].size({width:k.width,height:k.height});y[0].position({x:0,y:Math.ceil(m)});x[0].size({width:j.width,height:j.height});x[0].position({x:Math.floor(this._yaxes[0].getAxisWidth()),y:Math.ceil(m)+Math.round(this._yaxes[0].getFirstTickOffset())});if(l.height>0){y[1].size({width:l.width,height:l.height});y[1].position({x:Math.floor(this._yaxes[0].getAxisWidth()+j.width-this._yaxes[1].getMajorTickWidth()/2),y:Math.ceil(m)})}s.size({width:t,height:o+this._yaxes[0].getLastTickOffset()});s.position({x:Math.floor(this._yaxes[0].getAxisWidth()),y:Math.floor(i.height>0?this._xaxes[1].getAxisWidth():m)});h.size(s.size());h.position({x:0,y:0});this._scrollBar[0].init(s,h,'horizontal');if(!this._hasBacked){this._updateVisibleRange()}else{this.restore()}this._topBound=m+this._yaxes[0].getLastTickOffset()},_updateVisibleRange:function(){var v=this._chart_options.properties.visibleRange;var h=v.start;var i=v.end;if(h<0||i<0||h>this._dataTree.getSubMemberLabels().length-1||i>this._dataTree.getSubMemberLabels().length-1||h>i){h=0;i=this._dataTree.getSubMemberLabels().length-1}if(h===0&&i===this._dataTree.getSubMemberLabels().length-1)return;var r=i-h+1;var s=this._dataTree.getSubMemberLabels().length/r;this._xaxes[0].setVisibleRange(s,1,s);var j=this._xaxes[0].getTickInterval();this._xaxes[0].position(-j*h,0);var k=this._seriesLayer.size();this._seriesLayer.size({width:k.width*s,height:k.height});this.position(-j*h,0);if(U.os()==='iPad'){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}},updateProperties:function(p){this.callParent('updateProperties',p);var s=this._chart_options.properties.measures;var m=this._chart_options.properties.measure;var h=[],l=[];var j=this._chart_options.properties.measureDefault.colors;var k=this._chart_options.properties.bar;var n=this._chart_options.properties.line;this._tooltipEnabled=this._chart_options.properties.tooltip.enable;if(T.isExist(k)){this._columnBarRenderer.updateProperties(k)}if(T.isExist(n)){this._lineRenderer.updateProperties(n)}for(var i=0,o=this._metaData.measureMembers.length;i<o;i++){var q=O.extend(true,{},k,n,s[i]);q.fillColor=T.isExist(q.fillColor)?q.fillColor:j[i%j.length];q.lineColor=T.isExist(q.lineColor)?q.lineColor:j[i%j.length];if(q.type==='bar'||m.type==='bar'){h.push(q)}else{l.push(q)}}this._barSeriesGroup.updateProperties(h);this._lineSeriesGroup.updateProperties(l);if(!this._hasDrawn){this.initSeries();this._columnBarRenderer.resetSeriesGroup();this._lineRenderer.resetSeriesGroup();this._columnBarRenderer.addSeriesGroup(this._barSeriesGroup);this._lineRenderer.addSeriesGroup(this._lineSeriesGroup)}},applyTheme:function(t){if(this._columnBarRenderer){this._columnBarRenderer.applyTheme(t)}if(this._lineRenderer){this._lineRenderer.applyTheme(t)}},getSupportedAppEvents:function(){return['selectData','showTooltip','hideTooltip']},clickOnPoint:function(h){var i=this.select(h);if(T.isDefined(i)&&i.length>0){var j=i[i.length-1];this.fireEvent("selectData",{"name":"selectData","data":[{dimensionAxisIndex:0,dimensionAxisIndex:0,dimensionIndex:0,dimensionItemIndex:j.dimensionItemIndex,measureIndex:j.measureIndex,dimensionLabel:null,measureValue:null}]})}},select:function(t){if(!t)return;var s=this._chart_options.properties.selectability;if(s.mode==='none')return;if(!this._highlighter.ready()){this._highlighter.reload()}if(t instanceof Array){this._highlighter.setTargets(t);this._highlighter.run();return}if(T.isDefined(t.x)){var p=this._highlighter.hits(t);if(T.isDefined(p.measureIndex)){if(this._highlighter.isEnrolled(p)&&s.deSelectable){this._highlighter.remove(p)}else{this._highlighter.setTargets([p])}}else{if(s.deSelectable){this._highlighter.erase()}}return this._highlighter.run(true)}},panMove:(function(){var y;var p;var x;var h;var j;var o;var k;return function(l){var m=l.attachedComponent();var r=l.rangeInXY();if(l.state()===G.TransitionState.Began){o=m._seriesLayer.position();h=m._xaxes[0]._sax_renderer._subLayer.size();j=m._xaxes[0]._sax_renderer._subLayer.position();x=m._xaxes[0]._sax_renderer._layer.size();p=new Date().getTime();if(h.width>x.width){m._chartModule._scrollBar[0].highLight()}k=false}else if(l.state()===G.TransitionState.Changed){if(l.attachedComponent().islongPressGesture===true){return}k=true;var n=0;if((o.x+r.x)>0){n=-o.x}else if(o.x+r.x+m._seriesLayer.size().width<=m._seriesMaskLayer.size().width){n=m._seriesMaskLayer.size().width-o.x-m._seriesLayer.size().width}else{n=r.x}m._chartModule.position(o.x+n,o.y);m._chartModule._scrollBar[0].update();var q=m._xaxes;for(var i=q.length;i--;){q[i].position(o.x+n,0)}y=l.velocityInXY().x;p=new Date().getTime()}else if(l.state()===G.TransitionState.Ended){if((o.x+r.x)>=0||(o.x+r.x+m._seriesLayer.size().width<=m._seriesMaskLayer.size().width)){if(h.width>x.width){m._chartModule._scrollBar[0].unHighLight();m._rootLayer.setNeedsDisplay()}k=false;return}if(k){if(y===0){k=false;m._chartModule._scrollBar[0].unHighLight();m._rootLayer.setNeedsDisplay();return}var t=(y-0)/(new Date().getTime()-p);var u=m;var v=u._seriesLayer.position();var s=y*y/(2*t)*10;A.animate({values:[{type:'FLOAT',from:0.0,to:s}],duration:600,easing:'EaseOut',onStep:function(w){if((v.x+w[0])>0||v.x+w[0]+u._seriesLayer.size().width<=u._seriesMaskLayer.size().width){return}u._seriesLayer.position({x:v.x+w[0],y:0});u._xaxes[0].position(v.x+w[0],0);u._chartModule._scrollBar[0].update();u._rootLayer.setNeedsDisplay()},onComplete:function(){var w=m._seriesLayer.position().x;var z=m._seriesLayer.size().width+w;if(w>0){A.animate({values:[{type:'FLOAT',from:w,to:0}],duration:500,easing:'EaseOut',onStep:function(B){u._seriesLayer.position({x:B[0],y:0});u._xaxes[0].position(B[0],0);u._chartModule._scrollBar[0].update();u._rootLayer.setNeedsDisplay()},onComplete:function(){u._chartModule._scrollBar[0].unHighLight()}})}else if(z<x.width){A.animate({values:[{type:'FLOAT',from:w,to:(x.width-z+w)}],duration:500,easing:'EaseOut',onStep:function(B){u._seriesLayer.position({x:B[0],y:0});u._xaxes[0].position(B[0],0);u._chartModule._scrollBar[0].update();u._rootLayer.setNeedsDisplay()},onComplete:function(){u._chartModule._scrollBar[0].unHighLight()}})}else{u._chartModule._scrollBar[0].unHighLight()}}});k=false}else{m._chartModule._scrollBar[0].unHighLight();m._rootLayer.setNeedsDisplay()}}else if(l.state()===G.TransitionState.Cancelled){}}})(),pinchingResize:(function(){var s;var h;var j;var p;var k;var m;var l;var n;var o;var q;var r;return function(t){var u=t.attachedComponent();var v=t.scale();v=Math.round(v*100)/100;if(t.state()===G.TransitionState.Began){s=u._seriesLayer.size();h=u._seriesLayer.position();j=u._seriesMaskLayer.size();p=t.globalLocOfGesture();p.x=p.x-u._seriesMaskLayer.position().x;k=new Date().getTime();m=u._xaxes[0].getMajorTicks();q=u._xaxes[0].getTickInterval();var w=q/2;l=-1;for(var i=0,x=m.length;i<x;i++){if(Math.abs(m[i]-p.x+h.x)<=w){l=i;break}}if(l===-1){l=Math.floor(m.length/2)}n=u._metaData.measureMembers.length>20?20:u._metaData.measureMembers.length;o=u._dataTree.getSubMemberLabels().length;u._chartModule._scrollBar[0].highLight();u._rootLayer.setNeedsDisplay();r=v;if(u.islongPressGesture===true){u.islongPressGesture=false;u._chartModule.onblur()}}else if(t.state()==G.TransitionState.Changed){var y=0;y=Math.round((v/r)*100)/100;if(v===r){return}r=v;var z=new Date().getTime();if((z-k)>5){k=z;if(y>=1&&q*y>=j.width){return}if(y<1&&q*y<=j.width/(2*o)){return}q*=y;var B=u._xaxes;for(var i=B.length;i--;){B[i].zoom(y,1,y)}var D={x:0,y:0};var E=u._xaxes[0].getMajorTicks();if(y>=1){D.x=m[l]-E[l]+h.x}else{D.x=h.x-(E[l]-m[l])}s.width=s.width*y;u._chartModule.position(D.x,D.y);u._chartModule.scale(y,1,j);u._chartModule._scrollBar[0].update();u._chartModule._gridLine.gestureUpdate();B[0].position(D.x,0);u._rootLayer.setNeedsDisplay()}}else if(t.state()==G.TransitionState.Ended||t.state()==G.TransitionState.Cancelled){u._chartModule.scale(1,1);u._chartModule._scrollBar[0].update();u._chartModule._scrollBar[0].unHighLight();u._rootLayer.setNeedsDisplay();var H=u._seriesLayer.size();if(H.width<=j.width){var I=j.width/H.width;var B=u._xaxes;for(var i=B.length;i--;){B[i].zoom(I,1,I);B[i].position(0,0)}u._chartModule.scale(I,1);u._seriesLayer.position({x:0,y:0});u._chartModule._scrollBar[0].update();u._chartModule._scrollBar[0].hidden();u._chartModule._gridLine.gestureUpdate();u._rootLayer.setNeedsDisplay()}u._chartModule._highlighter.reload()}}})(),longPressHandler:(function(){return function(r){var h=r.attachedComponent();if(r.state()===G.TransitionState.Began){h.islongPressGesture=true;var i=r.globalLocOfGesture();var p=h.convertPointFromGlobal(i);var t=h._rootLayer;var j=h._seriesLayer.convertPointFromLayer(p,t);h._chartModule.hoverOnPoint(j)}}})(),tapHandler:function(r){var h=r.attachedComponent();if(r.state()===G.TransitionState.Ended){var i=r.globalLocOfGesture();var p=h.convertPointFromGlobal(i);var t=h._rootLayer;var j=h._seriesLayer.convertPointFromLayer(p,t);h._chartModule.clickOnPoint(j)}},scale:function(x,y,v){var h=this._seriesLayer.size();this._seriesLayer.size({width:h.width*x,height:h.height*y});this._columnBarRenderer.drawViewPort(x,v);this._lineRenderer.drawViewPort(x,v)},backUp:function(){this._hasBacked=true;this._backedXScale=this._xaxes[0]._sax_renderer._subLayer.size().width/this._xaxes[0]._sax_renderer._layer.size().width;this._backedXPoint=this._xaxes[0]._sax_renderer._subLayer.position().x},restore:function(){if(this._hasBacked&&T.isExist(this._backedXScale)&&T.isExist(this._backedXPoint)){if(this._backedXScale<=1.00000000001){return}this._xaxes[0].setVisibleRange(this._backedXScale,1,this._backedXScale);this._xaxes[0].position(this._backedXPoint,0);var h=this._seriesLayer.size();this._seriesLayer.size({width:h.width*this._backedXScale,height:h.height});this.position(this._backedXPoint,0);if(U.os()==='iPad'){this._scrollBar[0].update();this._scrollBar[0].unHighLight()}this._backedXScale=null;this._backedXPoint=null;this._hasBacked=false}},hoverOnPoint:function(p){if(!this._columnBarRenderer&&!this._lineRenderer){return}if(this._barSeriesGroup.getSeriesList().length>0&&this._lineSeriesGroup.getSeriesList().length>0){var h=this._columnBarRenderer.hoverOnPoint(p);this._lineRenderer.hoverOnPoint(p,false);if(h){this.fireEvent('showTooltip',{name:'showTooltip',data:[{dimensionItemIndex:h.dimensionItemIndex,point:p}]})}}else if(this._lineSeriesGroup.getSeriesList().length>0){var h=this._lineRenderer.hoverOnPoint(p,this._tooltipEnabled);if(h){this.fireEvent('showTooltip',{name:'showTooltip',data:[{dimensionItemIndex:h.dimensionItemIndex,point:p}]})}}else{var h=this._columnBarRenderer.hoverOnPoint(p);if(h){this.fireEvent('showTooltip',{name:'showTooltip',data:[{dimensionItemIndex:h.dimensionItemIndex,point:p}]})}}},onblur:function(p){if(this._barSeriesGroup.getSeriesList().length>0){this._columnBarRenderer.onblur(p);this._lineRenderer.onblur(p)}else{this._lineRenderer.onblur(p)}this.fireEvent('hideTooltip',{name:'hideTooltip',data:[{}]})},getPlotArea:function(){return{top:this._topBound,left:0,bottom:0,right:0}}});return g});sap.riv.module({qname:'sap.riv.vizkit.LongPressGestureDetector',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,G,M){var t=G.TransitionState;var _=function(x,a){var d=x.x-a.x;var b=x.y-a.y;return M.sqrt(d*d+b*b)};var L=O.derive(G,{constructor:function(a){this._touchesRequired=(a>0&&a<6)?a:1;this._minimumPressDuration=500;this._allowableMovement=10;this._distanceFromStart=0;this._startXY=undefined},minimumPressDuration:function(d){if(d!==undefined){this._minimumPressDuration=d}else{return this._minimumPressDuration}},allowableMovement:function(d){if(d!==undefined){this._allowableMovement=d}else{return this._allowableMovement}},doTouchBegin:function(a){var c=this.totalTouches();if(c===this._touchesRequired&&this.state()===t.Possible){this._startXY=this.globalLocOfTouchPoints();clearTimeout(this._timeoutId);this._timeoutId=setTimeout(O.proxy(function(){if(this._startXY&&this.state()===t.Possible&&this.totalTouches()===this._touchesRequired){this._setState_(t.Began)}},this),this._minimumPressDuration)}else if(c>this._touchesRequired){if(this.state()===t.Began||this.state()===t.Changed){this._setState_(t.Cancelled)}else if(this.state()===t.Possible){this._setState_(t.Failed)}}},doTouchMove:function(a){switch(this.state()){case t.Possible:if(this._startXY){this._distanceFromStart=_(this._startXY,this.globalLocOfTouchPoints());if(this._distanceFromStart>this._allowableMovement)this._setState_(t.Failed)}break;case t.Began:case t.Changed:if(_(this._startXY,this.globalLocOfTouchPoints())<=this._allowableMovement){this._setState_(t.Changed)}else this._setState_(t.Cancelled);break}},doTouchEnd:function(a){if(this.state()===t.Began||this.state()===t.Changed){this._setState_(t.Ended)}else if(this.state()===t.Possible){this._setState_(t.Failed)}},doTouchCancel:function(a){if(this.state()===t.Began||this.state()===t.Changed){this._setState_(t.Cancelled)}else if(this.state()===t.Possible){this._setState_(t.Failed)}},reset:function(){this.callParent('reset');this._startXY=undefined;this._distanceFromStart=0}});return L});sap.riv.module({qname:'sap.riv.vizkit.PanGestureDetector',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(O,G,M){var t=G.TransitionState;var _=function(x,a){var d=x.x-a.x;var b=x.y-a.y;return M.sqrt(d*d+b*b)};var P=O.derive(G,{constructor:function(a){this._touchesRequired=(a>0&&a<6)?a:1;this._startXY=undefined;this._lastXY=undefined;this._currentXY=undefined;this._startWhen=0;this._stopWhen=0},doTouchBegin:function(a){var c=this.totalTouches();if(c===this._touchesRequired&&this.state()===t.Possible){this._startWhen=this._stopWhen=a.timeStamp;this._startXY=this._lastXY=this._currentXY=this.globalLocOfTouchPoints();this._setState_(t.Began)}else if(c>this._touchesRequired){if(this.state()===t.Began||this.state()===t.Changed){this._stopWhen=a.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(t.Cancelled)}else{this._setState_(t.Failed)}}},doTouchMove:function(a){switch(this.state()){case t.Began:if(_(this._startXY,this.globalLocOfTouchPoints())>10){this._startWhen=this._stopWhen;this._stopWhen=a.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(t.Changed)}break;case t.Changed:this._startWhen=this._stopWhen;this._stopWhen=a.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(t.Changed);break}},doTouchEnd:function(a){if((this.state()===t.Began||this.state()===t.Changed)&&this.totalTouches()===0){this._startWhen=this._stopWhen;this._stopWhen=a.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(t.Ended)}},doTouchCancel:function(a){if(this.state()===t.Began||this.state()===t.Changed){this._startWhen=this._stopWhen;this._stopWhen=a.timeStamp;this._lastXY=this._currentXY;this._currentXY=this.globalLocOfTouchPoints();this._setState_(t.Cancelled)}},rangeInXY:function(){return{x:this._currentXY.x-this._startXY.x,y:this._currentXY.y-this._startXY.y}},velocityInXY:function(){var d=this._stopWhen-this._startWhen;if(d){return{x:(this._currentXY.x-this._lastXY.x)/d,y:(this._currentXY.y-this._lastXY.y)/d}}else{return 0}},reset:function(){this.callParent('reset');this._startXY=undefined;this._lastXY=undefined;this._currentXY=undefined;this._startWhen=0;this._stopWhen=0}});return P});sap.riv.module({qname:'sap.riv.viz.xychart.XYChartPlotComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.vizkit.Canvas2DSurfaceComponent',version:'1.0.0'},{qname:'sap.riv.graphics.Layer',version:'1.0.0'},{qname:'sap.riv.core.UADetector',version:'1.0.0'},{qname:'sap.riv.vizkit.PinchGestureDetector',version:'1.0.0'},{qname:'sap.riv.vizkit.PanGestureDetector',version:'1.0.0'},{qname:'sap.riv.vizkit.LongPressGestureDetector',version:'1.0.0'},{qname:'sap.riv.viz.shared.gridLine.GridLine',version:'1.0.0'},{qname:'sap.riv.viz.xychart.BarModule',version:'1.0.0'},{qname:'sap.riv.viz.xychart.CombinationModule',version:'1.0.0'},{qname:'sap.riv.vizkit.TapGestureDetector',version:'1.0.0'}],function Setup(O,T,F,L,C,a,U,P,b,c,G,B,d,e){var f=O.derive(C,{constructor:function(o){this._canvasSurface=this.getCanvasSurface();this._rootLayer=this._canvasSurface.getRootLayer();this._chart_options=O.extend(true,{},o.chart);this._metaData=this._chart_options.metaData;this._dataTree=this._chart_options.dataTree;this._xaxes=[];this._yaxes=[];this._gridLine=null;this._xaxisLayers=[];this._yaxisLayers=[];this._gridLineLayer=null;this._seriesLayer=null;this._seriesMaskLayer=null;this._chartModule=null;this._init(false)},_init:function(r){if(!r){this._initModule()}this._chartModule.init();if(!r){this._seriesMaskLayer=new a({anchor:{x:0,y:0}});this._seriesMaskLayer.clipToBounds(true);this._rootLayer.addSubLayer(this._seriesMaskLayer);this._seriesLayer=new a({anchor:{x:0,y:0}});this._seriesMaskLayer.addSubLayer(this._seriesLayer)}this._initAxesLayer();this._chartModule.bindRenderer(this._seriesLayer);this._gridLine=this._chartModule._gridLine;this._initGridLine();if(!r){this._registerEvents()}},_initGridLine:function(){this._gridLine.setXAxisLayer(this._xaxisLayers);this._gridLine.setYAxisLayer(this._yaxisLayers);this._gridLine.setSeriesMaskLayer(this._seriesMaskLayer);this._gridLine.setSeriesLayer(this._seriesLayer);this._gridLine.setXAxis(this._xaxes[0]);this._gridLine.setYAxis(this._yaxes[0])},_initAxesLayer:function(){this._initXAxesLayer();this._initYAxesLayer()},_initXAxesLayer:function(){this._xaxes=[];for(var i=0,l=this._xaxisLayers.length;i<l;i++){this._rootLayer._removeSubLayer(this._xaxisLayers[i])}this._xaxisLayers=[];this._xaxes=this._chartModule._xaxes;for(var i=0,l=this._xaxes.length;i<l;i++){var x=new a({anchor:{x:0,y:0}});this._xaxes[i].setLayer(x);this._xaxisLayers.push(x);this._rootLayer.addSubLayer(x)}},_initYAxesLayer:function(){this._yaxes=[];for(var i=0,l=this._yaxisLayers.length;i<l;i++){this._rootLayer._removeSubLayer(this._yaxisLayers[i])}this._yaxisLayers=[];this._yaxes=this._chartModule._yaxes;for(var i=0,l=this._yaxes.length;i<l;i++){var y=new a({anchor:{x:0,y:0}});this._yaxes[i].setLayer(y);this._yaxisLayers.push(y);this._rootLayer.addSubLayer(y)}},_initModule:function(){switch(this._chart_options.properties.type){case'bar':this._chartModule=new B(this._chart_options);break;case'combination':this._chartModule=new d(this._chart_options);break}},_chart_layout:function(n){this._chartModule.doChartLayout(n,this._yaxisLayers,this._xaxisLayers,this._seriesMaskLayer,this._seriesLayer)},_doDraw:function(s){if(this._xaxes.length===0||this._yaxes.length===0)return;this._chart_layout(s);this._gridLine.drawGridLine();this._chartModule.drawSeries();for(var i=0,l=this._xaxes.length;i<l;i++){this._xaxes[i].draw()}for(var i=0,l=this._yaxes.length;i<l;i++){this._yaxes[i].draw()}this._rootLayer.setNeedsDisplay()},_resetEventStatusVariables:function(){this._mouseAlreadyDown=false;this._mouseAlreadyMoved=false;this._mouseMoveThreshold=1;this._previousMousePosition=undefined},_registerEvents:function(){this._resetEventStatusVariables();this._seriesMaskLayer.on([{eventName:'mousemove',listener:this._mouseEventHandler,scope:this},{eventName:'mouseup',listener:this._mouseEventHandler,scope:this},{eventName:'mousedown',listener:this._mouseEventHandler,scope:this},{eventName:'mouseleave',listener:this._mouseEventHandler,scope:this},{eventName:'touchstart',listener:this._touchEventHandler,scope:this},{eventName:'touchend',listener:this._touchEventHandler,scope:this},{eventName:'touchmove',listener:this._touchEventHandler,scope:this},{eventName:'touchcancel',listener:this._touchEventHandler,scope:this}]);var p=this._oPinchGestureDetector=new P();p.addGestureAction(this._pinchingResize);p.enable(true);this.addGestureDetector(p);var o=this._oPanGestureDetector=new b(1);o.cancelTouches(false).addGestureAction(this._panMove);o.enable(true);this.addGestureDetector(o);var l=this._oLongPressGestureDetector=new c();l.addGestureAction(this._longPressHandler);l.enable(true);l.minimumPressDuration(500);this.addGestureDetector(l);var t=this._oTapGestureDetector=new e();t.addGestureAction(this._tapHandler);t.enable(true);this.addGestureDetector(t)},_convertXYForMouseEvent:function(m){if(this._seriesLayer==null){O.error('Series Layer should be initialized before any event handler!')}var x=m.targetLocalXY();var t=m.targetLayer();var g=this._seriesLayer.convertPointFromLayer(x,t);return g},_convertXYForTouch:function(t){if(this._seriesLayer==null){T.error('Series Layer should be initialized before any event handler!')}var x=t.localXY();var g=t.targetLayer();var h=this._seriesLayer.convertPointFromLayer(x,g);return h},_mouseEventHandler:function(m){var g=m.type();switch(g){case'mousedown':this._mouseAlreadyDown=true;this._mouseAlreadyMoved=false;break;case'mouseup':this._mouseAlreadyDown=false;if(!this._mouseAlreadyMoved){this._chartModule.clickOnPoint(this._convertXYForMouseEvent(m))}this._mouseAlreadyMoved=false;break;case'mousemove':if(this._previousMousePosition){var h=m.targetLocalXY();if(Math.abs(h.x-this._previousMousePosition.x)>this._mouseMoveThreshold||Math.abs(h.y-this._previousMousePosition.y)>this._mouseMoveThreshold){if(this._mouseAlreadyDown){this._chartModule.marqueeOverPoint(m.targetLocalXY())}else{this._chartModule.hoverOnPoint(this._convertXYForMouseEvent(m))}this._previousMousePosition=undefined;this._mouseAlreadyMoved=true}}else{this._previousMousePosition=m.targetLocalXY()}break;case'mouseleave':this._chartModule.onblur(this._convertXYForMouseEvent(m));this._resetEventStatusVariables();break;default:break}},_touchEventHandler:function(t){var g=t.type();switch(g){case'touchstart':break;case'touchmove':break;case'touchend':if(this.islongPressGesture){this.islongPressGesture=false;this._chartModule.onblur()}break;case'touchcancel':if(this.islongPressGesture){this.islongPressGesture=false;this._chartModule.onblur()}break;default:break}},_pinchingResize:function(r){r.attachedComponent()._chartModule.pinchingResize(r)},_panMove:function(p){p.attachedComponent()._chartModule.panMove(p)},_longPressHandler:function(r){r.attachedComponent()._chartModule.longPressHandler(r)},_tapHandler:function(r){r.attachedComponent()._chartModule.tapHandler(r)},doContentResize:function(o,n){this.callParent('doContentResize',o,n);this._doDraw(n)},applyTheme:function(t){this._chartModule.applyTheme(t);for(var i=0,l=this._xaxes.length;i<l;i++){this._xaxes[i].applyTheme(t)}for(var i=0,l=this._yaxes.length;i<l;i++){this._yaxes[i].applyTheme(t)}this._gridLine.applyTheme(t)},updateProperties:function(p){this._chart_options.properties=p;this._chartModule.updateProperties(p);if(U.os()==='iPad'){this._chartModule.backUp()}this._chartModule.updateValueAxisRange();this._chartModule.initAxes();this._initAxesLayer();this._chartModule.bindSeriesWithAxes();this._chartModule.initGridLineProperties();this._initGridLine();this._doDraw(this.size())},updateOptions:function(o){this._chart_options=o;this._metaData=o.metaData;this._dataTree=o.dataTree;this._xaxes=[];this._yaxes=[];for(var i=0,l=this._xaxisLayers.length;i<l;i++){this._rootLayer._removeSubLayer(this._xaxisLayers[i])}for(var i=0,l=this._yaxisLayers.length;i<l;i++){this._rootLayer._removeSubLayer(this._yaxisLayers[i])}this._xaxisLayers=[];this._yaxisLayers=[];this._chartModule.updateOptions(this._chart_options);this._init(true);this._doDraw(this.size())},receiveCommand:function(g){switch(g.commandText){case"ChangeSeriesVisibility":if(T.isDefined(this._chart_options.properties.measure.visibilityChangeable)&&this._chart_options.properties.measure.visibilityChangeable&&T.isDefined(this._chart_options.properties.measures[g.seriesIndex])){this._chart_options.properties.measures[g.seriesIndex].visible=g.setVisible;this._chartModule._hasDrawn=false;this.updateProperties(this._chart_options.properties)}break;default:return}},getSupportedAppEvents:function(){return this._chartModule.getSupportedAppEvents()},doPrint:function(g){},getPlotArea:function(){var p=this.position();var g=this._chartModule.getPlotArea();return{top:g.top+p.y,left:g.left+p.x,bottom:g.bottom+p.y,right:g.right+p.x}}});return f});sap.riv.module({qname:'sap.riv.viz.xychart.XYChartComponent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.title.TitleCanvasComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.background.BackgroundComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.legend.LegendCanvasComponent',version:'1.0.0'},{qname:'sap.riv.viz.shared.tooltip.BaseTooltip',version:'1.0.0'},{qname:'sap.riv.viz.shared.misc.PropsMgr',version:'1.0.0'},{qname:'sap.riv.viz.shared.descriptor.Descriptor',version:'1.0.0'},{qname:'sap.riv.viz.shared.layout.BasicLayout',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.viz.shared.series.Series',version:'1.0.0'},{qname:'sap.riv.viz.xychart.XYChartPlotComponent',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(O,T,L,U,a,B,b,c,P,D,d,e,S,X,L){var f=O.derive(U,{constructor:function(o){this._dataTree=o.dataset.dataTree;this._metaData=o.dataset.metaData;this._xychart_options={layout:{padding:[0,0,0,0],legendFirst:true},type:'bar',measure:{visibilityChangeable:false},measures:[],xAxis:[{}],yAxis:[{}],selectability:{"mode":"single","deSelectable":true,"defaultSelectedItems":[]},bar:{barMarkerSize:S.DEFAULTBARMARKERSIZE,isShowGradient:false,isShowInnerBorder:false,isShowOutBorder:false,isShowShadow:false},line:{lineThickness:S.DEFAULTLINESIZE,lineMarkerSize:S.DEFAULTLINEMARKERSIZE,isShowMarkerShadow:false,isShowLineShadow:false},measureDefault:{colors:["#113975","#e06f00","#5a92e2","#624628","#e03c2f","#ffbe7f","#96a8c3","#a9a9a9","#830b00","#344b6d","#e2ce44","#ff6657"]},visibleRange:{start:0,end:Number.POSITIVE_INFINITY},theme:''};this._xychart_options.title=O.extend(true,{},a.getDefaultOption());this._xychart_options.background=O.extend(true,{},B.getDefaultOption());this._xychart_options.legend=O.extend(true,{},b.getDefaultOption());this._xychart_options.tooltip=O.extend(true,{},c.getDefaultOption());var g;if(o.xyChartOptions.type==='bar'){g=D.getBarDescriptor()}else if(o.xyChartOptions.type==='combination'){if(o.xyChartOptions.measure.type==='line'){g=D.getLineDescriptor()}else if(o.xyChartOptions.measure.type==='bar'){g=D.getColumnDescriptor()}else if(o.xyChartOptions.measure.type==='combination'){g=D.getCombinationDescriptor()}}this._propsMgr=new P(g);var v=this._propsMgr.properties(o.xyChartOptions);this._xychart_options=O.extend(true,this._xychart_options,v);if(T.isExist(o.xyChartOptions.theme)&&o.xyChartOptions.theme!==''){var t=o.xyChartOptions.theme;this._resolveThemeAndProperties(o.xyChartOptions,t)}this._xychart_options=O.extend(true,this._xychart_options,o.xyChartOptions);this._propsMgr.properties(this._xychart_options);this._attach_additional_properties();this._legendComponent=null;this._chartComponent=null;this._titleComponent=null;this._xychart_layout=null;this._colorList=null;this._initSubComponents(false)},_resolveThemeAndProperties:function(o,t){var s=e.getThemeSettings(t);var g=s.global;o.background=o.background||{};o.background.color=o.background.color||s.background;var l=s.legend;var h=O.extend(true,{},g,l.title);var j=O.extend(true,{},g,l.label);o.legend=o.legend||{};o.legend.titleFont=o.legend.titleFont||(h['font-weight']+' '+h['font-size']+' '+h['font-family']);o.legend.titleColor=o.legend.titleColor||(h['color']);o.legend.labelFont=o.legend.labelFont||(j['font-weight']+' '+j['font-size']+' '+j['font-family']);o.legend.labelColor=o.legend.labelColor||(j['color']);var m=O.extend(true,{},g,s.title.mainTitle);var k=O.extend(true,{},g,s.title.subTitle);o.title=o.title||{};o.title.main=o.title.main||{};o.title.main.font=o.title.main.font||(m["font-weight"]+' '+m["font-size"]+' '+m["font-family"]);o.title.main.color=o.title.main.color||(m["color"]);o.title.sub=o.title.sub||{};o.title.sub.font=o.title.sub.font||(k["font-weight"]+' '+k["font-size"]+' '+k["font-family"]);o.title.sub.color=o.title.sub.color||(k["color"]);var n=s.bar;o.bar=o.bar||{};o.bar.isShowGradient=o.bar.isShowGradient||n.isShowGradient;o.bar.isShowInnerBorder=o.bar.isShowInnerBorder||n.isShowInnerBorder;o.bar.isShowOutBorder=o.bar.isShowOutBorder||n.isShowOutBorder;o.bar.isShowShadow=o.bar.isShowShadow||n.isShowShadow;var p=s.line;o.line=o.line||{};o.line.isShowLineShadow=(o.line.isShowLineShadow||p.line.isShowShadow);o.line.isShowMarkerShadow=(o.line.isShowMarkerShadow||p.marker.isShowShadow);o.line.lineThickness=(o.line.lineThickness||p.line.size);o.line.lineMarkerSize=(o.line.lineMarkerSize||p.marker.size);var q=s.axis;var r=O.extend(true,{},g,q.title);var u=O.extend(true,{},g,q.label);if(T.isUndefined(o.xAxis)){o.xAxis=[{}]}for(var i=0,v=o.xAxis.length;i<v;i++){var w=o.xAxis[i];this._resolveAxisThemeAndProperties(w,r,u,q.lineColor);w.gridLine=w.gridLine||{};w.gridLine.majorColor=w.gridLine.majorColor||q.xAxisMajorGridLine.color;w.gridLine.majorThickness=w.gridLine.majorThickness||q.xAxisMajorGridLine.thickness;w.gridLine.minorColor=w.gridLine.minorColor||q.xAxisMinorGridLine.color;w.gridLine.minorThickness=w.gridLine.minorThickness||q.xAxisMinorGridLine.thickness;w.gridLine.subColor=w.gridLine.subColor||q.xAxisSubGridLine.color}if(T.isUndefined(o.yAxis)){o.yAxis=[{}]}for(var i=0,v=o.yAxis.length;i<v;i++){var w=o.yAxis[i];this._resolveAxisThemeAndProperties(w,r,u,q.lineColor);w.gridLine=w.gridLine||{};w.gridLine.majorColor=w.gridLine.majorColor||q.yAxisMajorGridLine.color;w.gridLine.majorThickness=w.gridLine.majorThickness||q.yAxisMajorGridLine.thickness;w.gridLine.minorColor=w.gridLine.minorColor||q.yAxisMinorGridLine.color;w.gridLine.minorThickness=w.gridLine.minorThickness||q.yAxisMinorGridLine.thickness;w.gridLine.subColor=w.gridLine.subColor||q.yAxisSubGridLine.color}},_resolveAxisThemeAndProperties:function(g,h,i,l){g=g||{};g.titleFont=(g.titleFont||h['font-weight']+" "+h['font-size']+" "+h['font-family']);g.titleColor=(g.titleColor||h['color']);g.labelFont=(g.labelFont||i['font-weight']+" "+i['font-size']+" "+i['font-family']);g.labelColor=(g.labelColor||i['color']);g.lineColor=(g.lineColor||l)},_initSubComponents:function(r){this.autoresizeSubComponents(false);var s=this.size();if(!r){this._xychart_layout=new d(s,this._xychart_options)}if(!r){this._backgroundComponent=new B({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},backgroundOptions:this._xychart_options.background,id:'backgroundComponent'});this.addSubComponent(this._backgroundComponent);this._titleComponent=new a({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},titleOptions:this._xychart_options.title,id:'xyChartTitleComponent'});this._legendComponent=new b({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},legendOptions:{properties:this._xychart_options},id:'xyChartLegendComponent'});this._legendComponent.addEventObserver(this);if(T.isDefined(this._xychart_options.measure.visibilityChangeable)&&this._xychart_options.measure.visibilityChangeable){this._legendComponent.setStateChangeable(true)}this._chartComponent=new X({enable:true,anchor:{x:0,y:0},position:{x:0,y:0},size:{w:s.width,h:s.height},chart:{metaData:this._metaData,dataTree:this._dataTree,properties:this._xychart_options},id:'xyChartPlotComponent'})}},notify:function(g){this._chartComponent.receiveCommand(g)},doContentResize:function(o,n){this.callParent('doContentResize',o,n);this._xychart_layout.updateSize(n);this._relayout()},_attach_additional_properties:function(){if(this._xychart_options){var g=this._xychart_options;delete g._additional;var _={};var h=[];var l=[];var m=[];var j=g.measureDefault.colors;var k=g.measureDefault.numberFormats;var n=this._getEffectiveLables();var p=g.bar;var q=g.line;var r=g.measures||{};var s=this._metaData.measureMembers;for(var i=0,t=n.length;i<t;i++){var o=r[i]||{};if(o.type==='bar'){o=O.extend(true,{},p,o)}else{o=O.extend(true,{},q,o)}h.push(T.isExist(o.fillColor)?o.fillColor:j[i%j.length]);if(T.isExist(g.type)&&g.type==="bar"){m.push("rect")}else{if(T.isExist(o.type)&&o.type==="bar"){m.push("rect")}else{if(T.isExist(o.markerSymbol)){m.push(o.markerSymbol)}else{m.push("circle")}}}}var u=g.legend.formatString;for(var i=0,v=u.length,t=n.length;i<t;i++){if(i<v){l.push(u[i])}else{l.push(u[v-1])}}_.colorList=h;_.legendNumberFormat=l;_.legendLabels=n;_.legendMarkers=m;this._xychart_options._additional=_}},_getEffectiveLables:function(){var t=this._dataTree;var m=this._metaData.measureMembers;var l=[],g;var h=m.length;for(var i=0;i<h;i++){l.push({category:m[i]})}return l},_processLayoutOfComponent:function(g,l){if(!l){g.detachFromSuperComponent()}else{L.debug("chartComponent["+this.id()+"]"+"subComponent["+g.getCanvasSurface().getRootLayer().id()+"]initialized.","perf");if(!g.superComponent()){this.addSubComponent(g)}g.position({x:l[0],y:l[1],});g.size({width:l[2],height:l[3],})}},_relayout:function(g){if(this._xychart_layout.layoutChanged()||g){if(this._xychart_options.layout.legendFirst){var l=this._legendComponent.calMaxLegendSize(this._xychart_options);this._xychart_layout.setMaxLegendWidth(l.width);this._xychart_layout.setMaxLegendHeight(l.height)}var t=this._titleComponent.getPreferredSize(this._xychart_layout._size,this._xychart_options.title);this._xychart_layout.setPreferredTitleWidth(t.width);this._xychart_layout.setPreferredTitleHeight(t.height);var h=this._xychart_layout.getLayoutInfo();if(h.main[2]<=0||h.main[3]<=0){return}if(h.title){this._titleComponent.setPreferredSize({width:h.title[2],height:h.title[3]})}this._processLayoutOfComponent(this._chartComponent,h.main);this._processLayoutOfComponent(this._titleComponent,h.title);this._processLayoutOfComponent(this._legendComponent,h.legend);this._processLayoutOfComponent(this._backgroundComponent,h.background)}},applyTheme:function(t){var o=this._xychart_options;this._setThemes(o,t);this.updateProperties(o)},_setThemes:function(o,t){var s=e.getThemeSettings(t);var g=s.global;o.background.color=s.background;var l=s.legend;var h=O.extend(true,{},g,l.title);var j=O.extend(true,{},g,l.label);o.legend.titleFont=(h['font-weight']+' '+h['font-size']+' '+h['font-family']);o.legend.titleColor=(h['color']);o.legend.labelFont=(j['font-weight']+' '+j['font-size']+' '+j['font-family']);o.legend.labelColor=(j['color']);var m=O.extend(true,{},g,s.title.mainTitle);var k=O.extend(true,{},g,s.title.subTitle);o.title.main.font=(m["font-weight"]+' '+m["font-size"]+' '+m["font-family"]);o.title.main.color=(m["color"]);o.title.sub.font=(k["font-weight"]+' '+k["font-size"]+' '+k["font-family"]);o.title.sub.color=(k["color"]);var n=s.bar;o.bar.isShowGradient=n.isShowGradient;o.bar.isShowInnerBorder=n.isShowInnerBorder;o.bar.isShowOutBorder=n.isShowOutBorder;o.bar.isShowShadow=n.isShowShadow;var p=s.line;o.line.isShowLineShadow=p.line.isShowShadow;o.line.isShowMarkerShadow=p.marker.isShowShadow;o.line.lineThickness=p.line.size;o.line.lineMarkerSize=p.marker.size;var q=s.axis;var r=O.extend(true,{},g,q.title);var u=O.extend(true,{},g,q.label);if(T.isExist(o.xAxis)){for(var i=0,v=o.xAxis.length;i<v;i++){var w=o.xAxis[i];this._setAxisThemes(w,r,u,q.lineColor);w.gridLine=w.gridLine||{};w.gridLine.majorColor=q.xAxisMajorGridLine.color;w.gridLine.majorThickness=q.xAxisMajorGridLine.thickness;w.gridLine.minorColor=q.xAxisMinorGridLine.color;w.gridLine.minorThickness=q.xAxisMinorGridLine.thickness;w.gridLine.subColor=q.xAxisSubGridLine.color}}if(T.isExist(o.yAxis)){for(var i=0,v=o.yAxis.length;i<v;i++){var w=o.yAxis[i];this._setAxisThemes(w,r,u,q.lineColor);w.gridLine=w.gridLine||{};w.gridLine.majorColor=q.yAxisMajorGridLine.color;w.gridLine.majorThickness=q.yAxisMajorGridLine.thickness;w.gridLine.minorColor=q.yAxisMinorGridLine.color;w.gridLine.minorThickness=q.yAxisMinorGridLine.thickness;w.gridLine.subColor=q.yAxisSubGridLine.color}}},_setAxisThemes:function(g,h,i,l){g.titleFont=h['font-weight']+" "+h['font-size']+" "+h['font-family'];g.titleColor=h['color'];g.labelFont=i['font-weight']+" "+i['font-size']+" "+i['font-family'];g.labelColor=i['color'];g.lineColor=l},updateProperties:function(p){var v=this._propsMgr.properties(p);this._xychart_options=O.extend(true,this._xychart_options,v);this._attach_additional_properties();this._xychart_layout.updateSettings(this._xychart_options);this._relayout(false);this._backgroundComponent.updateProperties(this._xychart_options);this._chartComponent.updateProperties(this._xychart_options);this._titleComponent.updateProperties(this._xychart_options);this._legendComponent.updateProperties(this._xychart_options)},getProperties:function(){return this._propsMgr.properties()},setDataset:function(g){this._dataTree=g.dataTree;this._metaData=g.metaData;this._initSubComponents(true);this._attach_additional_properties();this._relayout(false);this._chartComponent.updateOptions({metaData:this._metaData,dataTree:this._dataTree,properties:this._xychart_options});var h=[];var j=this._xychart_options.measureDefault.colors;var l=this._metaData.measureMembers;var m=this._xychart_options.measures||{};for(var i=0,k=l.length;i<k;i++){var o=m[i]||{};h.push(T.isExist(o.fillColor)?o.fillColor:j[i%j.length])}this._legendComponent.updateOptions({labels:l,legendTitle:this._metaData.dimension[0],colorList:h,properties:this._xychart_options})},getOptions:function(){return this._xychart_options},getSupportedAppEvents:function(){return this._chartComponent.getSupportedAppEvents()},doPrint:function(g){}});return f});sap.riv.module({qname:'sap.riv.viz.pie.AppDelegate',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.VizAppDelegate',version:'1.0.0'},{qname:'sap.riv.vizkit.DataTree',version:'1.0.0'},{qname:'sap.riv.viz.pie.PieController',version:'1.0.0'}],function Setup(O,V,D,P){var A=O.derive(V,{constructor:function(){this._rootController=undefined},appDidFinishLaunching:function(a,l){var d=l.data.rawData;var b=d.exportTree();var c={dataTree:D.dataTreeFromJSON(b.dataTree),metaData:b.metaData};this._rootController=new P({dataset:c,option:l.option})},rootController:function(){return this._rootController},getPreloadAssets:function(){return[]},updateProperties:function(p){this._rootController.updateProperties(p)},getProperties:function(){return this._rootController.getProperties()},getSupportedEvents:function(){return['selectData']},setDataset:function(d){var a=d.exportTree();var c={dataTree:D.dataTreeFromJSON(a.dataTree),metaData:a.metaData};this._rootController.setDataset(c)}});return A});sap.riv.module({qname:'sap.riv.vizkit.MouseEvent',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.Event',version:'1.0.0'}],function Setup(O,E){var M=O.derive(E,{constructor:function(t,a,c,l,p){this._relatedTarget=undefined;this._currentLocalXY=this._targetLocalXY=l;this._pageXY=p},_setCurrentLocalXY_:function(c){this._currentLocalXY=c},_setRelatedTarget_:function(r){this._relatedTarget=r},targetLocalXY:function(){return{x:this._targetLocalXY.x,y:this._targetLocalXY.y}},currentLocalXY:function(){return{x:this._currentLocalXY.x,y:this._currentLocalXY.y}},pageXY:function(){return{x:this._pageXY.x,y:this._pageXY.y}}});return M});sap.riv.module({qname:'sap.riv.viz.AbstractPieChart',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractVisualization',version:'1.0.0'}],function Setup(O,A){var a=O.derive(A,{constructor:function(h,p,d){}});return a});sap.riv.module({qname:'sap.riv.core.utils.ArrayUtils',version:'1.0.0'},function Setup(){var A={each:function(a,c){a=a||[];for(var i=0,l=a.length;i<l;i++){c.call(a,i,a[i])}},unique:function(a){a=a||[];a=a.sort();for(var i=1;i<a.length;i++){if(a[i]===a[i-1]){a.splice(i--,1)}}return a}};return A});sap.riv.module({qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractVisualization',version:'1.0.0'}],function Setup(O,A){var a=O.derive(A,{constructor:function(h,o,d){}});return a});sap.riv.module({qname:'sap.riv.viz.xychart.XYChartController',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.UIController',version:'1.0.0'},{qname:'sap.riv.viz.shared.tooltip.BaseTooltip',version:'1.0.0'},{qname:'sap.riv.viz.xychart.XYChartComponent',version:'1.0.0'}],function Setup(O,F,U,B,X){var C=O.derive(U,{constructor:function(o){this._dataset=o.dataset;this._chartComponent=undefined;this._option=o.option;this._tooltip=null},initUIComponent:function(w,h){this._chartComponent=new X({id:'rootComponent',dataset:this._dataset,xyChartOptions:this._option,clipToBound:false,size:{w:w,h:h}});return this._chartComponent},doThemeApplied:function(t){this._chartComponent.applyTheme(t)},updateProperties:function(p){this._chartComponent.updateProperties(p);this._tooltip.reset({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,properties:this._chartComponent.getOptions()})},getProperties:function(){return this._chartComponent.getProperties()},getSupportedEvents:function(){return this._chartComponent.getSupportedEvents()},getSupportedAppEvents:function(){return this._chartComponent.getSupportedAppEvents()},afterUIComponentLoaded:F.noop,beforeUIComponentAppear:F.noop,afterUIComponentAppear:function(){this._tooltip=new B({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,properties:this._chartComponent.getOptions()});var a=this._chartComponent.getSupportedAppEvents();for(var i=a.length;i--||i==0;){this._chartComponent._chartComponent._chartModule.on({eventName:a[i],listener:this._fireInternalAppEvent,scope:this})}},beforeUIComponentDisappear:F.noop,afterUIComponentDisappear:F.noop,setDataset:function(d){this._dataset=d;this._chartComponent.setDataset(d);this._tooltip.reset({parent:this._chartComponent,metaData:this._dataset.metaData,dataTree:this._dataset.dataTree,properties:this._chartComponent.getOptions()})},_fireInternalAppEvent:function(e){if(e.name==='showTooltip'){var p=e.data[0].point;var a=this._chartComponent._chartComponent._rootLayer.convertPointFromLayer(p,this._chartComponent._chartComponent._seriesLayer);var b={};var c=this._chartComponent._chartComponent.position();b.x=a.x+c.x;b.y=a.y+c.y;e.data[0].point=b;this._tooltip.show(e)}else if(e.name=='hideTooltip'){this._tooltip.hide(e)}this.fireAppEvent(e.name,e)}});return C});sap.riv.module({qname:'sap.riv.core.utils.DomWatcher',version:'1.0.0'},[{qname:'sap.riv.core.UADetector',version:'1.0.0'},{qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'}],function Setup(U,L){var w=0;var d=1;var n=function(){return w++};var a=function(){return d++};var b=function(e){for(var i in e){if(e.hasOwnProperty(i))return false}return true};var c=function(e,i){var v=null;if(window.getComputedStyle){v=window.getComputedStyle(e,null)[i]}else if(e.currentStyle){v=e.currentStyle[i]}return v};var f=function(e,v){if(!this._data)this._data={};if(arguments.length===2){this._data[e]=v}else return this._data[e]};var g=new L();var h=function(e){var i;var l=e.srcElement||e.target;var d=f.call(l,'domId');if(!d)return;var q=g.get(d).getIterator();while(q.hasMore()){i=q.nextValue();i.checkChange()}};var j=function(i){var e=t.get(i);var l=e.domElem;var d=f.call(l,'domId');if(!d){d=a();f.call(l,'domId',d);g.add(d,new L())}g.get(d).add(e.id,e);if(!f.call(l,'eventHandler')){if(typeof(l.onpropertychange)=="object"){l.attachEvent("onpropertychange",h)}else if(U.isFirefox()&&parseFloat(U.version())>3.6){l.addEventListener("DOMAttrModified",h)}f.call(l,'eventHandler',h)}};var r=function(e){var i=e.domElem;var d=f.call(i,'domId');if(!d)return;if(g.get(d).has(e.id))g.get(d).remove(e.id);if(g.get(d).isEmpty()){var h=f.call(i,'eventHandler');if(typeof(i.onpropertychange)=="object"){i.detachEvent("onpropertychange",h)}else if(U.isFirefox()&&parseFloat(U.version())>3.6){i.removeEventListener("DOMAttrModified",h)}f.call(i,'eventHandler',null)}};var s=undefined;var t=new L();var k=function(){var e=t.getIterator();var i;while(e.hasMore()){i=e.nextValue();i.checkChange()}};var m=function(e){if(!s)s=setInterval(k,100);if(!t.has(e.id))t.add(e.id,e)};var o=function(i){if(t.has(i)){t.remove(i)}if(t.isEmpty()){clearInterval(s);s=undefined}};var p=function(e){var i=e.domElem;if(typeof(i.onpropertychange)=="object"||(U.isFirefox()&&parseFloat(U.version())>3.6)){j(e.id)}else{m(e)}};var _=function(e){var q=t.get(e);if(!q)return;var u=q.domElem;if(!q.callback)return;var v=false;var i=0;var x=[];for(var l=q.cssProps.length;i<l;i++){var y=c(u,q.cssProps[i]);if(q.lastestVals[i]!=y){q.lastestVals[i]=y;v=true;x.push(q.cssProps[i])}}if(v)q.callback(x)};var D={watch:function(e,l,q){var u=n();var v=function(){_(u)};var x={id:u,domElem:e,cssProps:l.split(","),lastestVals:[l.split(",").length],callback:q,checkChange:v};for(var i=0,y=x.cssProps.length;i<y;i++){x.lastestVals[i]=c(e,x.cssProps[i])}if(!t.has(x.id))t.add(x.id,x);p(x);return u},unwatch:function(i){var l=t.get(i);var q=l.domElem;try{if(typeof(q.onpropertychange)=="object"||(U.isFirefox()&&parseFloat(U.version())>3.6)){r(l)}else o(l.id)}catch(e){}}};return(D)});sap.riv.module({qname:'sap.riv.vizkit.VizFrame',version:'1.0.0'},[{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'},{qname:'sap.riv.vizkit.GestureDetector',version:'1.0.0'},{qname:'sap.riv.core.utils.DomWatcher',version:'1.0.0'},{qname:'sap.riv.vizkit.Event',version:'1.0.0'},{qname:'sap.riv.vizkit.MouseEvent',version:'1.0.0'},{qname:'sap.riv.vizkit.TouchEvent',version:'1.0.0'},{qname:'sap.riv.core.Math',version:'1.0.0'}],function Setup(F,O,U,G,D,E,M,T,a){var $=jQuery;if(!$){FuncUtils.error('Cannot find jQuery')}var b=function(n){var c=undefined;do{if(n.nodeName=='BODY'){c=n;break}else{n=n.parentNode}}while(n);return c};var s=function(v){var h=v._holder;if(h.css('position')=="static"||h.css('position')=="fix"){var p=h.position();v.frame({x:p.left,y:p.top,width:h.width(),height:h.height()})}else{v.frame({x:0,y:0,width:h.width(),height:h.height()})}};var f=function(c){for(var i=0,l=c.length;i<l;i++){if(c[i]==="position"){s(this);break}}};var g=function(e){var d=$(e.target);while(!d.data('selfComp')){d=d.parent()}return d.data('selfComp')};var t=G.TransitionState;var V=O.derive(U,{constructor:function(o){if(o.container){this._holder=$(o.container);if(!b(this._holder.get(0))){F.error('The holder DIV must be a child of Body element.')}if(this._holder.css('display')==='none'){this.markHide()}this.clipToBound(false);this._regDOMEventHandlers();this._holder.append(this._container);this.anchorPoint({x:0,y:0});s(this);D.watch(this._holder.get(0),"position",O.proxy(f,this));this._parentVisible=true;this._attached=true;this._msTracking=[];this._touchSeqTracking={}}else{throw new Error('you have to provide a container for viz frame')}},_regDOMEventHandlers:function(){this._container.bind('click',O.proxy(this._handleDomEvent,this));this._container.bind('dblclick',O.proxy(this._handleDomEvent,this));this._container.bind('focusin',O.proxy(this._handleDomEvent,this));this._container.bind('focusout',O.proxy(this._handleDomEvent,this));this._container.bind('focus',O.proxy(this._handleDomEvent,this));this._container.bind('blur',O.proxy(this._handleDomEvent,this));this._container.bind('mousedown',O.proxy(this._handleDomEvent,this));this._container.bind('mouseup',O.proxy(this._handleDomEvent,this));this._container.bind('mouseenter',O.proxy(this._handleDomEvent,this));this._container.bind('mouseleave',O.proxy(this._handleDomEvent,this));this._container.bind('mousemove',O.proxy(this._handleDomEvent,this));this._container.bind('DOMNodeInsertedIntoDocument',O.proxy(this._registerDOMTouchHandler,this));this._container.bind('DOMNodeRemovedFromDocument',O.proxy(this._unregisterDOMTouchHandler,this))},_registerDOMTouchHandler:function(){this._container.bind('touchstart',O.proxy(this._handleDomEvent,this));this._container.bind('touchmove',O.proxy(this._handleDomEvent,this));this._container.bind('touchend',O.proxy(this._handleDomEvent,this));this._container.bind('touchcancel',O.proxy(this._handleDomEvent,this))},_unregisterDOMTouchHandler:function(){this._container.unbind('touchstart');this._container.unbind('touchmove');this._container.unbind('touchend');this._container.unbind('touchcancel')},_handleDomEvent:function(e){e.preventDefault();var h=g(e);switch(e.type){case'mousemove':if(h){var c=h.pagePosition();var l={x:e.pageX-c.x,y:e.pageY-c.y};if(this._msTracking.length){if(this._msTracking[this._msTracking.length-1]!==h){var d=[];var j=h;while(j){d.push(j);j=j.superComponent()}var k=0,m=false,n=a.min(this._msTracking.length,d.length);while(true){var o=undefined;if(!m&&this._msTracking[k]===d[d.length-1-k]){k++;m=k===n}else{while(this._msTracking.length>k){o=this._msTracking.pop();var p=new M('mouseleave',o,false,l,{x:e.pageX,y:e.pageY});p._setRelatedTarget_(h);o._fireMouseEvent_(p)}while(k<d.length){var j=d.shift();o=this._msTracking[d.length-1];this._msTracking[d.length]=j;var p=new M('mouseenter',j,false,l,{x:e.pageX,y:e.pageY});p._setRelatedTarget_(o);j._fireMouseEvent_(p)}break}}}}else{var j=h;do{this._msTracking.push(j);j._fireMouseEvent_(new M('mouseenter',j,false,l,{x:e.pageX,y:e.pageY}));j=j.superComponent()}while(j);this._msTracking.reverse()}h._fireMouseEvent_(new M('mousemove',h,true,l,{x:e.pageX,y:e.pageY}))}else{while(this._msTracking.length){var o=this._msTracking.pop();o._fireMouseEvent_(new M('mouseleave',o,false,l,{x:e.pageX,y:e.pageY}))}}break;case'mouseleave':while(this._msTracking.length){var o=this._msTracking.pop();var q=o.pagePosition();o._fireMouseEvent_(new M('mouseleave',o,false,{x:e.pageX-q.x,y:e.pageY-q.y},{x:e.pageX,y:e.pageY}))}break;case'mouseup':if(h){var c=h.pagePosition();h._fireMouseEvent_(new M('mouseup',h,true,{x:e.pageX-c.x,y:e.pageY-c.y},{x:e.pageX,y:e.pageY}))}break;case'mousedown':if(h){var c=h.pagePosition();h._fireMouseEvent_(new M('mousedown',h,true,{x:e.pageX-c.x,y:e.pageY-c.y},{x:e.pageX,y:e.pageY}))}break;case'dblclick':if(h){if(this._focusedComp){if(this._focusedComp.id()!==h.id()){this._focusedComp._fireEvent_(new E('blur',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusout',this._focusedLayer,true));this._focusedComp=h;this._focusedComp._fireEvent_(new E('focus',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusin',this._focusedComp,true))}}else{this._focusedComp=h;this._focusedComp._fireEvent_(new E('focus',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusin',this._focusedComp,true))}var c=h.pagePosition();this._focusedComp._fireMouseEvent_(new M('dblclick',this._focusedComp,true,{x:e.pageX-c.x,y:e.pageY-c.y},{x:e.pageX,y:e.pageY}))}else{if(this._focusedComp){this._focusedComp._fireEvent_(new E('blur',this._focusedLayer,false));this._focusedComp._fireEvent_(new E('focusout',this._focusedLayer,true));this._focusedComp=undefined}}break;case'click':if(h){if(this._focusedComp){if(this._focusedComp.id()!==h.id()){this._focusedComp._fireEvent_(new E('blur',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusout',this._focusedComp,true));this._focusedComp=h;this._focusedComp._fireEvent_(new E('focus',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusin',this._focusedComp,true))}}else{this._focusedComp=h;this._focusedComp._fireEvent_(new E('focus',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusin',this._focusedComp,true))}var c=h.pagePosition();this._focusedComp._fireMouseEvent_(new M('click',this._focusedComp,true,{x:e.pageX-c.x,y:e.pageY-c.y},{x:e.pageX,y:e.pageY}))}else{if(this._focusedComp){this._focusedComp._fireEvent_(new E('blur',this._focusedComp,false));this._focusedComp._fireEvent_(new E('focusout',this._focusedComp,true));this._focusedComp=undefined}}break;case'touchstart':for(var i=0,r,u=e.originalEvent.changedTouches,v=u.length;i<v;i++){r=u.item(i);this._touchSeqTracking[r.identifier]=false}this._handleGestureDetect(h,e.originalEvent);var w=T.buildFromDomTouchEvent('touchstart',h,e.originalEvent);h._fireTouchEvent_(w);break;case'touchmove':if(!this._handleGestureDetect(h,e.originalEvent)){var w=T.buildFromDomTouchEvent('touchmove',h,e.originalEvent);h._fireTouchEvent_(w)}break;case'touchend':this._handleGestureDetect(h,e.originalEvent);var x=[],y=[],z=[],A=[];for(var i=0,r,u=e.originalEvent.changedTouches,v=u.length;i<v;i++){r=u.item(i);this._touchSeqTracking[r.identifier]===true?y.push(r):x.push(r);delete this._touchSeqTracking[r.identifier]}if(x.length){for(var i=0,r,B=e.originalEvent.targetTouches,v=B.length;i<v;i++){r=B.item(i);A.push(r)}for(var i=0,r,C=e.originalEvent.touches,v=C.length;i<v;i++){r=C.item(i);z.push(r)}var H=T.buildFrom3TouchArray('touchcancel',h,z,y,A);h._fireTouchEvent_(H);var I=T.buildFrom3TouchArray('touchend',h,z,x,A);h._fireTouchEvent_(I)}else{var w=T.buildFromDomTouchEvent('touchcancel',h,e.originalEvent);h._fireTouchEvent_(w)}break;case'touchcancel':this._handleGestureDetect(h,e.originalEvent);for(var i=0,r,u=e.originalEvent.changedTouches,v=u.length;i<v;i++){r=u.item(i);delete this._touchSeqTracking[r.identifier]}var w=T.buildFromDomTouchEvent('touchcancel',h,e.originalEvent);h._fireTouchEvent_(w);break}},_handleGestureDetect:function(h,o){var c=[];var d=h;while(!d._gestureDetectors.length&&d._superComp){d=d._superComp}c=d._gestureDetectors;var e=false,j,n=false;for(var i=0,k,l,m=c.length;i<m;i++){l=c[i];switch(o.type){case'touchstart':l.touchBegin(o);break;case'touchmove':l.touchMove(o);break;case'touchend':l.touchEnd(o);break;case'touchcancel':l.touchCancel(o);break}k=l.state();j=(k===t.Began)||(k===t.Changed)||(k===t.Recognized);e=e||j;n=n||(j&&l.cancelTouches())}if(n){for(var i=0,p,q=o.changedTouches,m=q.length;i<m;i++){p=q.item(i);this._touchSeqTracking[p.identifier]=true}}return e},hidden:function(h){h?this._holder.hide():this._holder.show();if(h){this.markHide()}else{this.markShow()}}});return V});sap.riv.module({qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},[{qname:'sap.riv.core.Observable',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.ThemeManager',version:'1.0.0'},{qname:'sap.riv.vizkit.ImageManager',version:'1.0.0'},{qname:'sap.riv.vizkit.VizFrame',version:'1.0.0'},{qname:'sap.riv.graphics.CanvasHelper',version:'1.0.0'},{qname:'sap.riv.vizkit.UIComponent',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(O,F,a,T,I,V,C,U,L){var b=0;function n(){return b++}var A=U.Autosizing;var $=jQuery;if(!$){F.error('Cannot find jQuery')}var c=function(o){var _=n();this._id=o.id?o.id+'_'+_:_;L.debug("Chart Application["+this._id+"] initializing.","perf");if(!o.delegateClass){F.error('You have to specify a delegate for visualization custom behavior.')}if(!o.wrapperDivEl){F.error('You have to specify a div element for holding the visualization.')}this._vizFrame=new V({container:o.wrapperDivEl});this._canvasForPrinting=C.createCanvasElement(1,1);this._delegate=new o.delegateClass();var e=this._delegate.getPreloadAssets();I.loadImages(e,undefined,a.proxy(function(){this._delegate._afterLaunched(this,o.launchOption)},this));var f=this._vizFrame.subComponents().getIterator();while(f.hasMore()){L.debug("application["+this._id+"]"+"component["+f.nextValue().id()+"] initialized.","perf")}this._eventBridge=new O();this._addEvents(this._delegate.getSupportedEvents());T.on('defaultThemeChanged',this._handleDefaultThemeChanged);T.on('themeSettingChanged',this._handleThemeSettingChanged)};var d=c.prototype;d.id=function(){return this._id};d.printTo=function(o){if(o.targetCanvas){var t=C.getCanvasElement($(o.targetCanvas));var w=this._canvasForPrinting;var e=w.getContext('2d');var f=t.getContext('2d');var s=this.size();w.width(s.width);w.height(s.height);f.clearRect(0,0,t.width(),t.height());f.save();f.scale(t.width()/s.width,t.height()/s.height);f.translate(0,0);f.rect(0,0,s.width,s.height);f.clip();var p=[{processed:false,uiComp:this._vizFrame,subCompItr:this._vizFrame.subComponents().getIterator()}],g,h;while(p.length){g=p[p.length-1];h=g.uiComp;if(h.printable()&&!h.hidden()){if(!g.processed){h.printTo(e);f.drawImage(w,0,0);g.processed=true}if(g.subCompItr.hasMore()){var i=g.subCompItr.next().value;w.width(i.width());w.height(i.height());var j=i.frame();f.save();f.translate(j.x,j.y);f.beginPath();f.moveTo(0,0);f.lineTo(j.width,0);f.lineTo(j.width,j.height);f.lineTo(0,j.height);f.closePath();f.clip();p.push({processed:false,uiComp:i,subCompItr:i.subComponents().getIterator()})}else{f.restore();p.pop()}}else{f.restore();p.pop()}}}};d.size=function(s){if(s!==undefined){this._vizFrame.size(s);return this}else{return this._vizFrame.size()}};d.hidden=function(h){if(h!==undefined){if(this._vizFrame.hidden()!==h){this._vizFrame.hidden(h)}return this}else{return this._vizFrame.hidden()}};d.getSupportedEvent=function(){return this._eventBridge.getSupportedEvents()};d.addListener=function(e,l){this._eventBridge.addListeners({eventName:e,listener:l})};d.removeListener=function(e,l){this._eventBridge.removeListener(e,l)};d._addEvents=function(e){for(var i=0,l=e.length;i<l;i++){this._eventBridge.addEvents(e[i])}};d._fireEvent=function(){this._eventBridge.fireEvent.apply(this._eventBridge,arguments)};d.getPublicMethods=function(){this._delegate.getSupportedMethods()};d.invokePublicMethod=function(p,o){this._delegate._invokePublicMethod(p,o)};d.applyTheme=function(t){this._delegate._applyTheme(t)};d.properties=function(p){if(p!==undefined){this._delegate.updateProperties(p)}return this._delegate.getProperties()};d.setDataset=function(e){if(e){this._delegate.setDataset(e)}};d._setRootController=function(r){if(r){var e=r.rootUIComponent();e.frame(this._vizFrame.bounds());e.autoresizingMask(A.FlexibleWidth|A.FlexibleHeight);this._vizFrame.addSubComponent(e)}};d._handleDefaultThemeChanged=function(o,e){if(this._delegate._currentTheme()===o){this._delegate._applyTheme(e)}};d._handleThemeSettingChanged=function(t,k,o,e){this._delegate._updateThemeSetting(t,k,o,e)};return c});sap.riv.module({qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.vizkit.VizAppDelegate',version:'1.0.0'},{qname:'sap.riv.vizkit.DataTree',version:'1.0.0'},{qname:'sap.riv.viz.xychart.XYChartController',version:'1.0.0'}],function Setup(O,V,D,X){var A=O.derive(V,{constructor:function(){this._rootController=undefined},appDidFinishLaunching:function(a,l){var d=l.data.rawData;var b=d.exportTree();var c={dataTree:D.dataTreeFromJSON(b.dataTree),metaData:b.metaData};this._rootController=new X({dataset:c,option:l.option})},rootController:function(){return this._rootController},getPreloadAssets:function(){return[]},updateProperties:function(p){this._rootController.updateProperties(p)},getProperties:function(){return this._rootController.getProperties()},getSupportedEvents:function(){return['selectData']},setDataset:function(d){var a=d.exportTree();var c={dataTree:D.dataTreeFromJSON(a.dataTree),metaData:a.metaData};this._rootController.setDataset(c)}});return A});sap.riv.module({qname:'sap.riv.viz.shared.log.LogAnalyzer',version:'1.0.0',exported:true},[{qname:'sap.riv.core.utils.LinkedHashMap',version:'1.0.0'}],function Setup(L){var c={};var a={};var b={};var d=new L();var e=/Chart\[(.+?)\]\sinitializing\./;var f=/Chart\[(.+?)\]application\[(.+?)\]\sinitialized\./;var g=/application\[(.+?)\]component\[(.+?)\]\sinitialized\./;var h=/chartComponent\[(.+?)\]subComponent\[(.+?)\]initialized\./;var j=/layer\[(.+?)\]rendering\send\./;var t=/#(\d+)#/;function k(i){while(i.hasMore()){if(i.nextValue()===-1)return false}return true}function l(o){var m=o[0];var p=o.length;for(var i=1;i<p;i++){m=o[i]>m?o[i]:m}return m}var n={analyze:function(i){var m=e.exec(i);if(m){c[m[1]]=t.exec(i)[1];return}m=g.exec(i);if(m){b[m[2]]=m[1];return}m=f.exec(i);if(m){a[m[2]]=m[1];return}m=h.exec(i);if(m){if(!d.has(m[1])){d.add(m[1],new L())}d.get(m[1]).add(m[2],-1);return}m=j.exec(i);if(m){var o=t.exec(i)[1];var p=d.getIterator();while(p.hasMore()){var q=p.next();var r=q.value;if(r.has(m[1])&&r.get(m[1])===-1){r.add(m[1],o);var s=0;var u=r.getIterator();if(k(u)){u.reset();var v=[];while(u.hasMore()){v.push(u.nextValue())}var w=a[b[q.key]];s=l(v)-c[w];d.remove(q.key);return("chart["+w+"]time consume["+s+"]")}}}}}};return n});sap.riv.module({qname:'sap.riv.viz.MultiPieChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.pie.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractPieChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var m=O.derive(a,{constructor:function(h,p,d){var b;T.isExist(p)?b=p:b={};b.type='multipie';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:b,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return m});sap.riv.module({qname:'sap.riv.viz.shared.dataConverter.CrossTableDataset',version:'1.0.0',exported:true},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.ArrayUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.dataConverter.BaseDataset',version:'1.0.0'}],function Setup(O,A,T,B){var c=O.derive(B,{constructor:function(){this.metadata={columnAxis:[],rowAxis:[]};this.origData=[];this.data=[];this.aggregation=[];this.chartInstances={};this._axisCounter=0;this.ERROR_CHAR="NaN";this.AXIS_TYPE_MEASURE="measure";this.AXIS_TYPE_DIMENSION="dimension";this.AXIS_KEY_TYPE="type";this.AXIS_KEY_LEVEL="level";this.AGGREGATION_DEFAULTTYPE="default";this.AGGREGATION_INLINETYPE="inline"},_verifyAxesName:function(a,n){if(T.isString(n)&&n.length>0){for(var i=0;i<a.length;i++)if(a[i].name==n)throw new Error("Axis with this name already exists!");return n}else{return""}},_updateAxesLevels:function(a){var b=(a?this.metadata.rowAxis:this.metadata.columnAxis);for(var i=0;i<b.length;i++)b[i].level=parseInt(i,10)},_addAxis:function(i,n,m,t){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);return this._addAxisAt(i,a.length,n,m,t)},_addAxisAt:function(i,l,n,m,t){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);if(!m)throw new Error("Invalid params!");if(!m.length)throw new Error("Invalid params!");if(l<0||l>a.length)throw new Error("Invalid params! Level out of range!");if(typeof t=="undefined")t=this.AXIS_TYPE_DIMENSION;if(t!=this.AXIS_TYPE_MEASURE&&t!=this.AXIS_TYPE_DIMENSION)throw new Error("Invalid params!");n=this._verifyAxesName(a,n);var b=[];O.extend(true,b,m);var u=(i?"d":"c")+this._axisCounter;this._axisCounter++;var d={uid:u,level:l,name:n,members:b,type:t};if(l==a.length)a[a.length]=d;else{a.splice(l,0,d);this._updateAxesLevels(i)}this.markDirty();return u},_modifyAxis:function(i,l,n,m,t){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);if(!m)throw new Error("Invalid params!");if(!m.length)throw new Error("Invalid params!");if(l<0||l>=a.length)throw new Error("Invalid params! Level out of range!");if(n!=a[l].name)n=this._verifyAxesName(a,n);if(typeof t=="undefined")t=this.AXIS_TYPE_DIMENSION;if(t!=this.AXIS_TYPE_MEASURE&&t!=this.AXIS_TYPE_DIMENSION)throw new Error("Invalid params!");a[l].name=n;a[l].type=t;a[l].members=[];O.extend(true,a[l].members,m);this.markDirty();return{uid:a[l].uid,level:l,name:n,type:t}},_modifyAxisByUid:function(a,u,n,m,t){var b=(a?this.metadata.rowAxis:this.metadata.columnAxis);var r=null;for(var i=0;i<b.length;i++)if(b[i].uid==u){return this._modifyAxis(a,b[i].level,n,m,t)}return r},_getAxesInfo:function(i){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);var r=[];O.extend(true,r,a);O.each(r,function(b,v){delete v.members});return!r.length?null:r},_getAxisInfo:function(i,l){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);if(l<0||l>=a.length)throw new Error("Level out of range!");return{uid:a[l].uid,level:l,name:a[l].name,type:a[l].type}},_getAxisInfoByUid:function(a,u){var b=(a?this.metadata.rowAxis:this.metadata.columnAxis);for(var i=0;i<b.length;i++)if(b[i].uid==u)return{uid:u,level:b[i].level,name:b[i].name,type:b[i].type};return null},_getAxisMembersByUid:function(a,u){var b=(a?this.metadata.rowAxis:this.metadata.columnAxis);var t=[];for(var i=0;i<b.length;i++){if(b[i].uid==u){O.extend(true,t,b[i].members);return t}}return null},_getAxisMembers:function(i,l){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);if(l<0||l>=a.length)throw new Error("Invalid params! Level out of range!");var t=[];O.extend(true,t,a[l].members);return t},_removeAxis:function(i,l){var a=(i?this.metadata.rowAxis:this.metadata.columnAxis);if(l<0||l>=a.length)throw new Error("Invalid params! Level out of range!");var r={uid:a[l].uid,level:l,name:a[l].name,type:a[l].type};a.splice(l,1);this._updateAxesLevels(i);this.markDirty();return r},_removeAxisByUid:function(a,u){var b=(a?this.metadata.rowAxis:this.metadata.columnAxis);if(!u)throw new Error("Invalid uid!");var r={};for(var i=0;i<b.length;i++){if(b[i].uid==u){return this._removeAxis(a,i)}}return null},_getAxisUniqueMembersByType:function(i,t){var a=this._getAxesInfo(i);var b=[];for(var d=0;d<a.length;d++){if(t==a[d].type){var u=a[d].uid;b=this._getAxisMembersByUid(i,u);return A.unique(b)}}return null},_getAxisUniqueMembersByLevel:function(i,l){try{var t=this._getAxisMembers(i,l);return A.unique(t)}catch(e){return null}},_getAxisUniqueMembers:function(i,k,v){switch(k){case this.AXIS_KEY_TYPE:return this._getAxisUniqueMembersByType(i,v);case this.AXIS_KEY_LEVEL:return this._getAxisUniqueMembersByLevel(i,v);default:return null}},_cleanData:function(){this.data=[];O.extend(true,this.data,this.origData);if(this.metadata.columnAxis.length==0){throw new Error("There should be at least one column measure axis!")}if(this.metadata.rowAxis.length==0){throw new Error("There should be at least one row dimension axis!")}var a=this.metadata.columnAxis[0].members.length;var b=this.metadata.rowAxis.length;var d=this.metadata.rowAxis[b-1].members.length;var _=a;var e=d;if(!this.metadata.dataByColumn){_=d;e=a}if(!T.isExist(this.data))this.data=[];for(var i=0;i<_;i++){if(!T.isExist(this.data[i]))this.data[i]=[];for(var j=0;j<e;j++){if(!T.isExist(this.data[i][j])){this.data[i][j]=this.ERROR_CHAR}else{if(!T.isNumber(this.data[i][j])){var r=/(^-?\d+$)|(^(-?\d+)(\.\d+)?$)/;if(!r.test(this.data[i][j])){this.data[i][j]=this.ERROR_CHAR}}}}if(this.data[i].length>e)this.data[i].splice(e,this.data[i].length-e)}},addColumnAxis:function(n,m,t){return this._addAxis(false,n,m,t)},addColumnAxisAt:function(l,n,m,t){return this._addAxisAt(false,l,n,m,t)},modifyColumnAxis:function(l,n,m,t){return this._modifyAxis(false,l,n,m,t)},modifyColumnAxisByUid:function(u,n,m,t){return this._modifyAxisByUid(false,u,n,m,t)},getColumnAxesInfo:function(){return this._getAxesInfo(false)},getColumnAxisInfo:function(l){return this._getAxisInfo(false,l)},getColumnAxisInfoByUid:function(u){return this._getAxisInfoByUid(false,u)},getColumnAxisMembersByUid:function(u){return this._getAxisMembersByUid(false,u)},getColumnAxisMembers:function(l){return this._getAxisMembers(false,l)},getColumnAxisUniqueMembers:function(k,v){return this._getAxisUniqueMembers(false,k,v)},removeColumnAxis:function(l){return this._removeAxis(false,l)},removeColumnAxisByUid:function(u){return this._removeAxisByUid(false,u)},addRowAxis:function(n,m,t){return this._addAxis(true,n,m,t)},addRowAxisAt:function(l,n,m,t){return this._addAxisAt(true,l,n,m,t)},modifyRowAxis:function(l,n,m,t){return this._modifyAxis(true,l,n,m,t)},modifyRowAxisByUid:function(u,n,m,t){return this._modifyAxisByUid(true,u,n,m,t)},getRowAxesInfo:function(){return this._getAxesInfo(true)},getRowAxisInfo:function(l){return this._getAxisInfo(true,l)},getRowAxisInfoByUid:function(u){return this._getAxisInfoByUid(true,u)},getRowAxisMembersByUid:function(u){return this._getAxisMembersByUid(true,u)},getRowAxisMembers:function(l){return this._getAxisMembers(true,l)},getRowAxisUniqueMembers:function(k,v){return this._getAxisUniqueMembers(true,k,v)},removeRowAxis:function(l){return this._removeAxis(true,l)},removeRowAxisByUid:function(u){return this._removeAxisByUid(true,u)},setData:function(b,d){if(typeof(b)!='boolean'||!d)throw new Error("Invalid params!");if(!d.length)throw new Error("Invalid params!");this.metadata.dataByColumn=b;this.origData=[];O.extend(true,this.origData,d);this._cleanData();this.markDirty()},getData:function(b){var t=[];if(b==this.metadata.dataByColumn){O.extend(true,t,this.data)}else{for(var i=0;i<this.data[0].length;i++){t[i]=[];for(var j=0;j<this.data.length;j++)t[i][j]=this.data[j][i]}}return t},getValue:function(a,r){if(this.metadata.dataByColumn){return this.data[a][r]}else{return this.data[r][a]}},getColumnCount:function(){if(this.metadata.dataByColumn){return this.data.length}else{if(this.data.length>0){return this.data[0].length}else{return 0}}},getRowCount:function(){if(!this.metadata.dataByColumn){return this.data.length}else{if(this.data.length>0){return this.data[0].length}else{return 0}}},exportJsonStr:function(){function a(g){var h=(g?this.metadata.rowAxis:this.metadata.columnAxis);var t=(g?"rowAxis":"columnAxis");var d=[];d.push('"'+t+'":[');for(var i=0;i<h.length;i++){d.push('{"uid":"'+h[i].uid+'","level":'+h[i].level+',"name":"'+h[i].name+'","members":[');for(var j=0;j<h[i].members.length;j++){d.push('"'+h[i].members[j]+'"');if(j!=h[i].members.length-1)d.push(',')}d.push(']');d.push(',"type":"'+h[i].type+'"}');if(i!=h.length-1)d.push(',')}d.push(']');if(!g)d.push(',');return d};function b(){var d=[];d.push('"aggregation":[');for(var i=0;i<this.aggregation.length;i++){if(T.type(this.aggregation[i].label)=='string'){d.push('{"label":"'+this.aggregation[i].label+'","rowDimension":[')}else{d.push('{"label":[');for(var j=0;j<this.aggregation[i].label.length;j++){d.push('"'+this.aggregation[i].label[j]+'"');if(j!=this.aggregation[i].label.length-1)d.push(',')}d.push('],"rowDimension":[')}for(var j=0;j<this.aggregation[i].rowDimension.length;j++){d.push('"'+this.aggregation[i].rowDimension[j]+'"');if(j!=this.aggregation[i].rowDimension.length-1)d.push(',')}d.push(']');d.push(',"value":[');for(var t=0;t<this.aggregation[i].value.length;t++){d.push(this.aggregation[i].value[t]);if(t!=this.aggregation[i].value.length-1)d.push(',')}d.push('],');d.push('"type":"'+this.aggregation[i].type+'"');d.push('}');if(i!=this.aggregation.length-1)d.push(',')}d.push(']');return d};var d=new Array();d.push('{');d.push('"metadata":{');d=d.concat(a.call(this,false));d=d.concat(a.call(this,true));d.push(',');d.push('"dataByColumn":'+(typeof(this.metadata.dataByColumn)=='boolean'?this.metadata.dataByColumn:null));d.push('},');d.push('"data":[');for(var i=0;i<this.data.length;i++){d.push('[');for(var j=0,e=this.data[i].length;j<e;j++){var f=this.data[i][j];if(f==this.ERROR_CHAR){d.push("null")}else{d.push(f)}if(j!=e-1)d.push(',')}d.push(']');if(i!=this.data.length-1)d.push(',')}d.push('],');d=d.concat(b.call(this));d.push('}');return d.join('')},importJsonStr:function(v){if(typeof(v)!='string')throw new Error("Invalid JSON string!");var n=O.parseJSON(v);if(!n.metadata)throw new Error("JSON object does not contain metadata!");if(!n.data)throw new Error("JSON object does not contain data!");O.extend(true,this.metadata,n.metadata);this.origData=[];O.extend(true,this.origData,n.data);this.aggregation=[];O.extend(true,this.aggregation,n.aggregation);this._cleanData();this.markDirty()},clone:function(){var a={};O.extend(true,a,this);return a},empty:function(){this.metadata={columnAxis:[],rowAxis:[]};this.data=[];this.origData=[];this.aggregation=[]},registerChartInstance:function(a){if(T.isExist(a)){var b=this.chartInstances;if(!b.hasOwnProperty(a)){b[a]={dirtyDS:false};return true}else{return true}}throw new Error("Failed to register chart instance in dataset!")},markDirty:function(){var a=this.chartInstances;for(var i in a){if(a.hasOwnProperty(i)){a[i].dirtyDS=true}}},checkDirty:function(a){var b=this.chartInstances;if(T.isExist(b[a])){var d=b[a];if(d.dirtyDS){d.dirtyDS=false;return true}else{return false}}throw new Error("Failed to check dirty for the chart:"+a+"!")},addAggregation:function(l,v,r){if(T.isString(l)&&!(l instanceof Array)){throw new Error("Invalid params!")}else if(''==l){return}if(!T.isExist(v)||typeof(v)!='object'){throw new Error("Invalid params!")}if(T.isExist(r)){if(typeof(r)!='object'){throw new Error("Invalid params!")}if(r.length>=this.getRowAxesInfo().length){return}var a=false;for(var i=0;i<this.getRowCount();i++){var m=0;for(var j=0;j<r.length;j++){if(r[j]==this.getRowAxisMembers(j)[i]){m++}}if(m==r.length){a=true;break}}if(!a){throw new Error("Invalid params!")}}var _=l;var b=v;var d=T.isExist(r)?r:[];var e=T.isString(l)?this.AGGREGATION_DEFAULTTYPE:this.AGGREGATION_INLINETYPE;b.length=this.getColumnCount();this.aggregation.push({label:_,value:b,rowDimension:d,type:e})},getAggregation:function(r){if(!T.isExist(r)){return this.aggregation}var a=[];for(var i=0;i<this.aggregation.length;i++){var u=this.aggregation[i];if(r.length==0&&u.rowDimension.length==0){a.push(u)}else if(r.length>0){var m=0;for(var j=0;j<r.length;j++){if(j>=u.rowDimension.length||u.rowDimension[j]!=r[j]){m=0;break}m++}if(m==r.length){a.push(u)}}}return a},modifyAggregation:function(l,a,v,r){if(T.isString(a)&&!(a instanceof Array)){throw new Error("Invalid params!")}else if(''==a){return}if(!T.isExist(v)||typeof(v)!='object'){throw new Error("Invalid params!")}if(T.isExist(r)){if(typeof(r)!='object'){throw new Error("Invalid params!")}if(r.length>=this.getRowAxesInfo().length){return}var b=false;for(var i=0;i<this.getRowCount();i++){var m=0;for(var j=0;j<r.length;j++){if(r[j]==this.getRowAxisMembers(j)[i]){m++}}if(m==r.length){b=true;break}}if(!b){throw new Error("Invalid params!")}}var t=T.isString(a)?this.AGGREGATION_DEFAULTTYPE:this.AGGREGATION_INLINETYPE;this.aggregation[l].label=a;this.aggregation[l].value=v;this.aggregation[l].rowDimension=[];O.extend(true,this.aggregation[l].rowDimension,r);this.markDirty();return{level:l,label:a,value:v,rowDimension:r,type:t}},exportTree:function(){var m=this.getColumnAxisUniqueMembers(this.AXIS_KEY_TYPE,this.AXIS_TYPE_MEASURE);var a=this.getColumnAxisMembers(0);var b=this.metadata.columnAxis;var r=this.metadata.rowAxis;var d=b.slice(1);var e=0;var f=[];for(var j=0;j<r.length;j++){f.push({'name':r[j].name,'analysisAxisIndex':0})}if(r.length>0){e++}for(var j=0;j<d.length;j++){f.push({'name':d[j].name,'analysisAxisIndex':1})}if(d.length>0){e++}var s=function(w,t,x,u,y,z){var h=t[x];var C=null;for(var i=0;i<w.subNodes.length;i++){if(h.name===w.subNodes[i].label){C=w.subNodes[i];break}}if(C==null){C={};C.member=i;C.label=h.name;C.measureValues={};C.subNodes=[];for(var i=0;i<m.length;i++){C.measureValues[m[i]]={}}w.subNodes.push(C)}if(x==t.length-1){var D=[];for(var i=0,l=t.length;i<l;i++){var p=t[i];D.push({'analysisAxisIndex':p.analysisAxisIndex,'dimensionIndex':p.dimensionIndex,'dimensionItemIndex':p.dimensionItemIndex})}C.measureValues[u]={'sum':{result:z,tags:{'dimensionPath':D,'measureIndex':y}}}}else{s(C,t,x+1,u,y,z)}};var g=[];for(var i=0,l=this.getColumnCount();i<l;i++){g[i]=[];for(var j=0;j<d.length;j++){var h={'name':d[j].members[i],'analysisAxisIndex':1,'dimensionIndex':j,'dimensionItemIndex':i};g[i].push(h)}}var k=[];for(var i=0,l=this.getRowCount();i<l;i++){k[i]=[];for(var j=0;j<r.length;j++){var h={'name':r[j].members[i],'analysisAxisIndex':0,'dimensionIndex':j,'dimensionItemIndex':i};k[i].push(h)}}var n={};n.member="root";n.measureValues={};n.subNodes=[];for(var i=0;i<m.length;i++){n.measureValues[m[i]]={}}for(var i=0,l=this.getColumnCount();i<l;i++){for(var j=0,o=this.getRowCount();j<o;j++){var q=this.getValue(i,j);var t=k[j].concat(g[i]);var u=a[i];s(n,t,0,u,i,q)}}var v={dataTree:JSON.stringify(n),metaData:{measureMembers:m,dimension:f,axisNum:e}};return v}});return c});sap.riv.module({qname:'sap.riv.viz.shared.dataConverter.SimpleDMDataset',version:'1.0.0',exported:true},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.shared.dataConverter.BaseDataset',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(O,T,B,u){var a=void(0);var S=O.derive(B,{constructor:function(){this._measureNames=[''];this._dimensionLabels=[];this._dimensionName=[''];this._data=null;this._inValidData=null;this.ERROR_CHAR="NaN"},measureNames:function(n){if(arguments.length==1){if(T.isExist(arguments[0])){this._measureNames=n;return this}else{u.error("Measure Name doesn't exist")}}return this._measureNames},dimensionLabels:function(d){if(arguments.length==1){if(T.isExist(arguments[0])){this._dimensionLabels=d;return this}else{throw"Dimension Label isn't exist"}}return this._dimensionLabels},dimensionName:function(d){if(arguments.length==1){if(T.isExist(arguments[0])){this._dimensionName=d;return this}else{throw"Dimension Name isn't exist"}}return this._dimensionName},data:function(d){if(arguments.length>0){if((T.isExist(d))&&(T.isExist(d.length))){this._data=d}else{throw"Data is invalid."}}return this._data},exportTree:function(){var r={};r.member="root";r.measureValues={};r.subNodes=[];this._cleanData();for(var i=0,l=this._measureNames.length;i<l;i++){r.measureValues[this._measureNames[i]]={}}for(var i=0,b=this._dimensionLabels.length;i<b;i++){r.subNodes[i]={member:i,label:T.isExist(this._dimensionLabels[i])?this._dimensionLabels[i]:'',subNodes:[],measureValues:{}};for(var j=0,c=this._measureNames.length;j<c;j++){var v;if((this._inValidData[j]!==a)&&(this._inValidData[j][i]!==a)&&(this._inValidData[j][i]===this.ERROR_CHAR)){v=this.ERROR_CHAR}else{v=this._data[j][i]}r.subNodes[i].measureValues[this._measureNames[j]]={sum:{result:v,tags:{'dimensionPath':[{'analysisAxisIndex':0,'dimensionIndex':0,'dimensionItemIndex':i}],measureIndex:j}}}}}var d={dataTree:JSON.stringify(r),metaData:{measureMembers:this._measureNames,dimension:[{'name':this._dimensionName,'analysisAxisIndex':0}],axisNum:1}};return d},_cleanData:function(){var d=this._data;this._inValidData=[];var n=false;var _=this._measureNames.length;var b=this._dimensionLabels.length;if(b===0){n=true}else{var m=0;var l='';for(var i=0;i<d.length;i++){if((T.isExist(d[i]))&&(T.isExist(d[i].length))&&(d[i].length>m)){m=d[i].length}}if(m<b){for(var i=m;i<b;i++){l=this._dimensionLabels.pop()}b=this._dimensionLabels.length;if(b===0){this._dimensionLabels.push(l)}}}if(!T.isExist(d))d=this._data=[];for(var i=0;i<_;i++){if(!T.isExist(d[i]))d[i]=[];for(var j=0;j<b||j<d[i].length;j++){if(n){this._dimensionLabels.push(j+1)}else{if(!(j<b)){this._dimensionLabels.push('')}}b=this._dimensionLabels.length;if(!T.isExist(d[i][j])){this._inValidData[i]=this._inValidData[i]||[];this._inValidData[i][j]=this.ERROR_CHAR}else{if(!T.isNumber(d[i][j])){var r=/(^-?\d+$)|(^(-?\d+)(\.\d+)?$)/;if(!r.test(d[i][j])){this._inValidData[i]=this._inValidData[i]||[];this._inValidData[i][j]=this.ERROR_CHAR}}}}n=false}}});return S});sap.riv.module({qname:'sap.riv.viz.Environment',version:'1.0.0',exported:true},[{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(T,L){var _='en_US';var a=function(d){if(T.isExist(d)){_=d;sap.common.globalization.NumericFormatManager.setPVL(d)}};var b=function(d){if(T.isExist(d)){L.setLevel(d)}};var c=function(o){if(!o)return;if(o.enable)L.enable();if(!o.appenders)return;for(var i=0,l=o.appenders.length;i<l;i++){var d=o.appenders[i];if(d.appenderKey)L.addAppender(d.appenderKey,d.appender);else L.addAppender(d.appender)}};var e={constructor:function(){},initialize:function(o){a(o.locale);c(o.log)},setLocale:function(l){a(l)},getLocale:function(){return _},setLoggerEnable:function(d){if(d===true)L.enable();else if(d===false)L.disable()},addLogAppender:function(){if(arguments.length===1)return L.addAppender(arguments[0]);else if(arguments.length===2)return L.addAppender(arguments[0],arguments[1])},removeLogAppender:function(k){return L.removeAppender(k)},};return e});sap.riv.module({qname:'sap.riv.viz.BarChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var B=O.derive(a,{constructor:function(h,p,d){var b;T.isExist(p)?b=p:b={};b.type='bar';if(!T.isExist(b.measure)){b.measure={}}b.measure.type='bar';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:b,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return B});sap.riv.module({qname:'sap.riv.viz.CombinationChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var C=O.derive(a,{constructor:function(h,p,d){var b;T.isExist(p)?b=p:b={};b.type='combination';if(!T.isExist(b.measure)){b.measure={}}b.measure.type='combination';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:b,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return C});sap.riv.module({qname:'sap.riv.viz.PieChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.pie.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractPieChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var p=O.derive(a,{constructor:function(h,b,d){var c;T.isExist(b)?c=b:c={};c.type='pie';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({id:"PieApplication",wrapperDivEl:h,delegateClass:A,launchOption:{option:c,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")},});return p});sap.riv.module({qname:'sap.riv.viz.LineChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var b=O.derive(a,{constructor:function(h,p,d){var c;T.isExist(p)?c=p:c={};c.type='combination';if(!T.isExist(c.measure)){c.measure={}}c.measure.type='line';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:c,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return b});sap.riv.module({qname:'sap.riv.viz.ColumnChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var C=O.derive(a,{constructor:function(h,p,d){var b;T.isExist(p)?b=p:b={};b.type='combination';if(!T.isExist(b.measure)){b.measure={}}b.measure.type='bar';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:b,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return C});sap.riv.module({qname:'sap.riv.viz.Visualization',version:'1.0.0',exported:true},[{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractVisualization',version:'1.0.0'},{qname:'sap.riv.viz.PieChart',version:'1.0.0'},{qname:'sap.riv.viz.MultiPieChart',version:'1.0.0'},{qname:'sap.riv.viz.BarChart',version:'1.0.0'},{qname:'sap.riv.viz.LineChart',version:'1.0.0'},{qname:'sap.riv.viz.ColumnChart',version:'1.0.0'},{qname:'sap.riv.viz.CombinationChart',version:'1.0.0'},{qname:'sap.riv.core.utils.FunctionUtils',version:'1.0.0'}],function Setup(O,A,P,M,B,L,C,a,u){var V=O.derive(A,{constructor:function(t,h,p,d){switch(t){case'riv/pie':this._viz=new P(h,p,d);break;case'riv/multipie':this._viz=new M(h,p,d);break;case'riv/bar':this._viz=new B(h,p,d);break;case'riv/column':this._viz=new C(h,p,d);break;case'riv/line':this._viz=new L(h,p,d);break;case'riv/combination':this._viz=new a(h,p,d);break;default:u.error('Unsupported chart type');break}}});return V});sap.riv.module({qname:'sap.riv.viz.PieChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.pie.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractPieChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var p=O.derive(a,{constructor:function(h,b,d){var c;T.isExist(b)?c=b:c={};c.type='pie';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({id:"PieApplication",wrapperDivEl:h,delegateClass:A,launchOption:{option:c,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")},});return p});sap.riv.module({qname:'sap.riv.viz.LineChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var b=O.derive(a,{constructor:function(h,p,d){var c;T.isExist(p)?c=p:c={};c.type='combination';if(!T.isExist(c.measure)){c.measure={}}c.measure.type='line';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:c,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return b});sap.riv.module({qname:'sap.riv.viz.ColumnChart',version:'1.0.0',exported:true},[{qname:'sap.riv.vizkit.VizApplication',version:'1.0.0'},{qname:'sap.riv.viz.xychart.AppDelegate',version:'1.0.0'},{qname:'sap.riv.core.utils.ObjectUtils',version:'1.0.0'},{qname:'sap.riv.core.utils.TypeUtils',version:'1.0.0'},{qname:'sap.riv.viz.AbstractXYChart',version:'1.0.0'},{qname:'sap.riv.core.Logger',version:'1.0.0'}],function Setup(V,A,O,T,a,L){var C=O.derive(a,{constructor:function(h,p,d){var b;T.isExist(p)?b=p:b={};b.type='combination';if(!T.isExist(b.measure)){b.measure={}}b.measure.type='bar';L.debug("Chart["+this._id+"] initializing.","perf");this._viz=new V({wrapperDivEl:h,delegateClass:A,launchOption:{option:b,data:{rawData:d}}});L.debug("Chart["+this.id()+"]application["+this._viz.id()+"] initialized.","perf")}});return C});
