/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.commons.form.FormElement");jQuery.sap.require("sap.ui.commons.library");jQuery.sap.require("sap.ui.core.Element");sap.ui.core.Element.extend("sap.ui.commons.form.FormElement",{metadata:{publicMethods:["getLabelControl"],library:"sap.ui.commons",aggregations:{"label":{type:"sap.ui.commons.Label",altTypes:["string"],multiple:false},"fields":{type:"sap.ui.core.Control",multiple:true,singularName:"field"}}}});jQuery.sap.require("sap.ui.core.EnabledPropagator");sap.ui.core.EnabledPropagator.apply(sap.ui.commons.form.FormElement.prototype,[true]);(function(){sap.ui.commons.form.FormElement.prototype.init=function(){this._oFieldDelegate={oElement:this,onAfterRendering:b}};sap.ui.commons.form.FormElement.prototype.exit=function(){if(this._oLabel){this._oLabel.destroy();delete this._oLabel}this._oFieldDelegate=undefined};sap.ui.commons.form.FormElement.prototype.setLabel=function(A){var t=this;if(!this._oLabel){var o=this.getLabel();if(o){o.isRequired=o._sapui_isRequired;o.getLabelForRendering=o._sapui_getLabelForRendering}}this.setAggregation("label",A);var l=A;if(typeof l==="string"){if(!this._oLabel){this._oLabel=new sap.ui.commons.Label({text:l}).setParent(this);this._oLabel.isRequired=_;this._oLabel.getLabelForRendering=a}else{this._oLabel.setText(l)}}else{if(this._oLabel){this._oLabel.destroy();delete this._oLabel}l._sapui_isRequired=l.isRequired;l.isRequired=_;l._sapui_getLabelForRendering=l.getLabelForRendering;l.getLabelForRendering=a}return this};sap.ui.commons.form.FormElement.prototype.getLabelControl=function(){if(this._oLabel){return this._oLabel}else{return this.getLabel()}};sap.ui.commons.form.FormElement.prototype.addField=function(f){this.addAggregation("fields",f);f.addDelegate(this._oFieldDelegate);return this};sap.ui.commons.form.FormElement.prototype.insertField=function(f,i){this.insertAggregation("fields",f,i);f.addDelegate(this._oFieldDelegate);return this};sap.ui.commons.form.FormElement.prototype.removeField=function(f){var r=this.removeAggregation("fields",f);r.removeDelegate(this._oFieldDelegate);return r};sap.ui.commons.form.FormElement.prototype.removeAllFields=function(){var r=this.removeAllAggregation("fields");for(var i=0;i<r.length;i++){var R=r[i];R.removeDelegate(this._oFieldDelegate)}return r};sap.ui.commons.form.FormElement.prototype.destroyFields=function(){var f=this.getFields();for(var i=0;i<f.length;i++){var F=f[i];F.removeDelegate(this._oFieldDelegate)}this.destroyAggregation("fields");return this};sap.ui.commons.form.FormElement.prototype.updateFields=function(){var f=this.getFields();for(var i=0;i<f.length;i++){var F=f[i];F.removeDelegate(this._oFieldDelegate)}this.updateAggregation("fields");f=this.getFields();for(var i=0;i<f.length;i++){var F=f[i];F.addDelegate(this._oFieldDelegate)}return this};sap.ui.commons.form.FormElement.prototype.enhanceAccessibilityState=function(e,A){var l=this.getLabelControl();if(l&&l!=e){if(!A["labelledby"]){A["labelledby"]=l.getId()}var c=this.getParent();var E=c.getFormElements();if(this==E[0]){var C=this.getFields();if(e==C[0]){var t=c.getTitle();if(t){var i="";if(typeof t=="string"){i=c.getId()+"--title"}else{i=t.getId()}var d=A["describedby"];if(d){d=d+" "+i}else{d=i}A["describedby"]=d}}}}return A};sap.ui.commons.form.FormElement.prototype.onLayoutDataChange=function(e){var p=this.getParent();if(p&&p.onLayoutDataChange){p.onLayoutDataChange(e)}};var _=function(){var f=this.getParent();var F=f.getFields();for(var i=0;i<F.length;i++){var o=F[i];if(o.getRequired&&o.getRequired()===true){return true}}return false};var a=function(){if(this.getLabelFor()){return this.getLabelFor()}else{var f=this.getParent();var F=f.getFields();if(F[0]){return F[0].getId()}}};var b=function(e){var p=this.oElement.getParent();if(p&&p.contentOnAfterRendering){p.contentOnAfterRendering(this.oElement,e.srcControl)}}}());
